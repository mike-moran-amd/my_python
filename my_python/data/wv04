sudo kubeadm join 10.9.233.141:6443 --token ec8eiq.90ttjkzdrevj2n9n --discovery-token-ca-cert-hash sha256:074d9c4898aa4ca843d6993e1aa432682ed6b94678647ec8d5a7ad04162db449

Microsoft Windows [Version 10.0.19044.1889]
(c) Microsoft Corporation. All rights reserved.

C:\Users\mikmoran>ssh root@147.28.141.209
The authenticity of host '147.28.141.209 (147.28.141.209)' can't be established.
ECDSA key fingerprint is SHA256:7e+AfAWPaSZ/QcirSIeniu3AStN/pqd21JTCNoQ/wnw.
Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
Warning: Permanently added '147.28.141.209' (ECDSA) to the list of known hosts.
Welcome to Ubuntu 22.04.1 LTS (GNU/Linux 5.15.0-46-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

  System information as of Mon Aug 29 21:05:46 UTC 2022

  System load:            0.10791015625
  Usage of /:             0.6% of 438.04GB
  Memory usage:           2%
  Swap usage:             0%
  Processes:              617
  Users logged in:        0
  IPv4 address for bond0: 147.28.141.209
  IPv6 address for bond0: 2604:1380:4641:3b00::19

0 updates can be applied immediately.


The list of available updates is more than a week old.
To check for new updates run: sudo apt update


The programs included with the Ubuntu system are free software;
the exact distribution terms for each program are described in the
individual files in /usr/share/doc/*/copyright.

Ubuntu comes with ABSOLUTELY NO WARRANTY, to the extent permitted by
applicable law.

root@wv04:~# useradd -s /bin/bash -d /home/mfm/ -m -G sudo mfm
root@wv04:~# passwd mfm
New password:
Retype new password:
passwd: password updated successfully
root@wv04:~# cp -r ~/.ssh /home/mfm/.ssh
root@wv04:~# chown -R mfm:mfm /home/mfm/.ssh
root@wv04:~# exit
logout
Connection to 147.28.141.209 closed.

C:\Users\mikmoran>ssh mfm@147.28.141.209
Welcome to Ubuntu 22.04.1 LTS (GNU/Linux 5.15.0-46-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

  System information as of Mon Aug 29 21:07:23 UTC 2022

  System load:            0.12353515625
  Usage of /:             0.6% of 438.04GB
  Memory usage:           2%
  Swap usage:             0%
  Processes:              618
  Users logged in:        0
  IPv4 address for bond0: 147.28.141.209
  IPv6 address for bond0: 2604:1380:4641:3b00::19


0 updates can be applied immediately.


The list of available updates is more than a week old.
To check for new updates run: sudo apt update


The programs included with the Ubuntu system are free software;
the exact distribution terms for each program are described in the
individual files in /usr/share/doc/*/copyright.

Ubuntu comes with ABSOLUTELY NO WARRANTY, to the extent permitted by
applicable law.

To run a command as administrator (user "root"), use "sudo <command>".
See "man sudo_root" for details.

mfm@wv04:~$ sudo snap install multipass
[sudo] password for mfm:
multipass 1.10.1 from Canonical✓ installed
mfm@wv04:~$ multipass launch -c 4 -d 50G -m 8G -n node1
Launched: node1
mfm@wv04:~$ multipass launch -c 4 -d 50G -m 8G -n node2
Launched: node2
mfm@wv04:~$ multipass launch -c 4 -d 50G -m 8G -n node3
Launched: node3
mfm@wv04:~$ multipass info --all
Name:           node1
State:          Running
IPv4:           10.9.233.141
Release:        Ubuntu 20.04.4 LTS
Image hash:     77f2f05e39e5 (Ubuntu 20.04 LTS)
Load:           0.33 0.17 0.07
Disk usage:     1.4G out of 48.3G
Memory usage:   183.4M out of 7.8G
Mounts:         --

Name:           node2
State:          Running
IPv4:           10.9.233.229
Release:        Ubuntu 20.04.4 LTS
Image hash:     77f2f05e39e5 (Ubuntu 20.04 LTS)
Load:           0.09 0.04 0.01
Disk usage:     1.4G out of 48.3G
Memory usage:   186.3M out of 7.8G
Mounts:         --

Name:           node3
State:          Running
IPv4:           10.9.233.14
Release:        Ubuntu 20.04.4 LTS
Image hash:     77f2f05e39e5 (Ubuntu 20.04 LTS)
Load:           0.24 0.06 0.02
Disk usage:     1.4G out of 48.3G
Memory usage:   194.1M out of 7.8G
Mounts:         --
mfm@wv04:~$ multipass shell node1
Welcome to Ubuntu 20.04.4 LTS (GNU/Linux 5.4.0-125-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

  System information as of Mon Aug 29 21:12:33 UTC 2022

  System load:  0.09              Processes:             146
  Usage of /:   2.8% of 48.27GB   Users logged in:       0
  Memory usage: 3%                IPv4 address for ens3: 10.9.233.141
  Swap usage:   0%


0 updates can be applied immediately.

New release '22.04.1 LTS' available.
Run 'do-release-upgrade' to upgrade to it.


To run a command as administrator (user "root"), use "sudo <command>".
See "man sudo_root" for details.

ubuntu@node1:~$ vi doit22
ubuntu@node1:~$ . doit22
Hit:1 http://archive.ubuntu.com/ubuntu focal InRelease
Get:2 http://security.ubuntu.com/ubuntu focal-security InRelease [114 kB]
Get:3 http://archive.ubuntu.com/ubuntu focal-updates InRelease [114 kB]
Get:4 http://archive.ubuntu.com/ubuntu focal-backports InRelease [108 kB]
Get:5 http://security.ubuntu.com/ubuntu focal-security/main amd64 Packages [1683 kB]
Get:6 http://archive.ubuntu.com/ubuntu focal/universe amd64 Packages [8628 kB]
Get:7 http://security.ubuntu.com/ubuntu focal-security/main Translation-en [284 kB]
Get:8 http://security.ubuntu.com/ubuntu focal-security/main amd64 c-n-f Metadata [11.0 kB]
Get:9 http://security.ubuntu.com/ubuntu focal-security/restricted amd64 Packages [1147 kB]
Get:10 http://security.ubuntu.com/ubuntu focal-security/restricted Translation-en [163 kB]
Get:11 http://security.ubuntu.com/ubuntu focal-security/universe amd64 Packages [715 kB]
Get:12 http://security.ubuntu.com/ubuntu focal-security/universe Translation-en [130 kB]
Get:13 http://security.ubuntu.com/ubuntu focal-security/universe amd64 c-n-f Metadata [14.8 kB]
Get:14 http://security.ubuntu.com/ubuntu focal-security/multiverse amd64 Packages [22.2 kB]
Get:15 http://security.ubuntu.com/ubuntu focal-security/multiverse Translation-en [5376 B]
Get:16 http://security.ubuntu.com/ubuntu focal-security/multiverse amd64 c-n-f Metadata [508 B]
Get:17 http://archive.ubuntu.com/ubuntu focal/universe Translation-en [5124 kB]
Get:18 http://archive.ubuntu.com/ubuntu focal/universe amd64 c-n-f Metadata [265 kB]
Get:19 http://archive.ubuntu.com/ubuntu focal/multiverse amd64 Packages [144 kB]
Get:20 http://archive.ubuntu.com/ubuntu focal/multiverse Translation-en [104 kB]
Get:21 http://archive.ubuntu.com/ubuntu focal/multiverse amd64 c-n-f Metadata [9136 B]
Get:22 http://archive.ubuntu.com/ubuntu focal-updates/main amd64 Packages [2051 kB]
Get:23 http://archive.ubuntu.com/ubuntu focal-updates/main Translation-en [366 kB]
Get:24 http://archive.ubuntu.com/ubuntu focal-updates/main amd64 c-n-f Metadata [15.8 kB]
Get:25 http://archive.ubuntu.com/ubuntu focal-updates/restricted amd64 Packages [1234 kB]
Get:26 http://archive.ubuntu.com/ubuntu focal-updates/restricted Translation-en [175 kB]
Get:27 http://archive.ubuntu.com/ubuntu focal-updates/universe amd64 Packages [941 kB]
Get:28 http://archive.ubuntu.com/ubuntu focal-updates/universe Translation-en [213 kB]
Get:29 http://archive.ubuntu.com/ubuntu focal-updates/universe amd64 c-n-f Metadata [21.2 kB]
Get:30 http://archive.ubuntu.com/ubuntu focal-updates/multiverse amd64 Packages [24.4 kB]
Get:31 http://archive.ubuntu.com/ubuntu focal-updates/multiverse Translation-en [7336 B]
Get:32 http://archive.ubuntu.com/ubuntu focal-updates/multiverse amd64 c-n-f Metadata [588 B]
Get:33 http://archive.ubuntu.com/ubuntu focal-backports/main amd64 Packages [45.6 kB]
Get:34 http://archive.ubuntu.com/ubuntu focal-backports/main Translation-en [16.3 kB]
Get:35 http://archive.ubuntu.com/ubuntu focal-backports/main amd64 c-n-f Metadata [1420 B]
Get:36 http://archive.ubuntu.com/ubuntu focal-backports/restricted amd64 c-n-f Metadata [116 B]
Get:37 http://archive.ubuntu.com/ubuntu focal-backports/universe amd64 Packages [23.9 kB]
Get:38 http://archive.ubuntu.com/ubuntu focal-backports/universe Translation-en [16.0 kB]
Get:39 http://archive.ubuntu.com/ubuntu focal-backports/universe amd64 c-n-f Metadata [860 B]
Get:40 http://archive.ubuntu.com/ubuntu focal-backports/multiverse amd64 c-n-f Metadata [116 B]
Fetched 23.9 MB in 4s (5551 kB/s)
Reading package lists... Done
Building dependency tree
Reading state information... Done
7 packages can be upgraded. Run 'apt list --upgradable' to see them.
Reading package lists... Done
Building dependency tree
Reading state information... Done
lsb-release is already the newest version (11.1.0ubuntu2).
lsb-release set to manually installed.
ca-certificates is already the newest version (20211016~20.04.1).
ca-certificates set to manually installed.
curl is already the newest version (7.68.0-1ubuntu2.12).
curl set to manually installed.
gnupg is already the newest version (2.2.19-3ubuntu2.2).
gnupg set to manually installed.
0 upgraded, 0 newly installed, 0 to remove and 7 not upgraded.
deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu focal stable
Get:1 https://download.docker.com/linux/ubuntu focal InRelease [57.7 kB]
Get:2 https://download.docker.com/linux/ubuntu focal/stable amd64 Packages [17.9 kB]
Hit:3 http://security.ubuntu.com/ubuntu focal-security InRelease
Hit:4 http://archive.ubuntu.com/ubuntu focal InRelease
Hit:5 http://archive.ubuntu.com/ubuntu focal-updates InRelease
Hit:6 http://archive.ubuntu.com/ubuntu focal-backports InRelease
Fetched 75.6 kB in 1s (102 kB/s)
Reading package lists... Done
Building dependency tree
Reading state information... Done
7 packages can be upgraded. Run 'apt list --upgradable' to see them.
Reading package lists... Done
Building dependency tree
Reading state information... Done
The following NEW packages will be installed:
  containerd.io
0 upgraded, 1 newly installed, 0 to remove and 7 not upgraded.
Need to get 28.1 MB of archives.
After this operation, 127 MB of additional disk space will be used.
Get:1 https://download.docker.com/linux/ubuntu focal/stable amd64 containerd.io amd64 1.6.8-1 [28.1 MB]
Fetched 28.1 MB in 0s (87.9 MB/s)
Selecting previously unselected package containerd.io.
(Reading database ... 63818 files and directories currently installed.)
Preparing to unpack .../containerd.io_1.6.8-1_amd64.deb ...
Unpacking containerd.io (1.6.8-1) ...
Setting up containerd.io (1.6.8-1) ...
Created symlink /etc/systemd/system/multi-user.target.wants/containerd.service → /lib/systemd/system/containerd.service.
Processing triggers for man-db (2.9.1-1) ...
--2022-08-29 21:14:08--  https://github.com/opencontainers/runc/releases/download/v1.1.1/runc.amd64
Resolving github.com (github.com)... 140.82.112.4
Connecting to github.com (github.com)|140.82.112.4|:443... connected.
HTTP request sent, awaiting response... 302 Found
Location: https://objects.githubusercontent.com/github-production-release-asset-2e65be/36960321/decb03b0-76a4-4ee7-bd06-4e3a548d9f87?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIWNJYAX4CSVEH53A%2F20220829%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20220829T211409Z&X-Amz-Expires=300&X-Amz-Signature=0d48dd86ceca9d5dd86928028e0b6ef3f5fc86c5d57298ab725949c3e7c03529&X-Amz-SignedHeaders=host&actor_id=0&key_id=0&repo_id=36960321&response-content-disposition=attachment%3B%20filename%3Drunc.amd64&response-content-type=application%2Foctet-stream [following]
--2022-08-29 21:14:09--  https://objects.githubusercontent.com/github-production-release-asset-2e65be/36960321/decb03b0-76a4-4ee7-bd06-4e3a548d9f87?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIWNJYAX4CSVEH53A%2F20220829%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20220829T211409Z&X-Amz-Expires=300&X-Amz-Signature=0d48dd86ceca9d5dd86928028e0b6ef3f5fc86c5d57298ab725949c3e7c03529&X-Amz-SignedHeaders=host&actor_id=0&key_id=0&repo_id=36960321&response-content-disposition=attachment%3B%20filename%3Drunc.amd64&response-content-type=application%2Foctet-stream
Resolving objects.githubusercontent.com (objects.githubusercontent.com)... 185.199.110.133, 185.199.111.133, 185.199.109.133, ...
Connecting to objects.githubusercontent.com (objects.githubusercontent.com)|185.199.110.133|:443... connected.
HTTP request sent, awaiting response... 200 OK
Length: 9415040 (9.0M) [application/octet-stream]
Saving to: ‘runc.amd64’

runc.amd64                                 100%[=======================================================================================>]   8.98M  36.9MB/s    in 0.2s

2022-08-29 21:14:09 (36.9 MB/s) - ‘runc.amd64’ saved [9415040/9415040]

disabled_plugins = []
imports = []
oom_score = 0
plugin_dir = ""
required_plugins = []
root = "/var/lib/containerd"
state = "/run/containerd"
temp = ""
version = 2

[cgroup]
  path = ""

[debug]
  address = ""
  format = ""
  gid = 0
  level = ""
  uid = 0

[grpc]
  address = "/run/containerd/containerd.sock"
  gid = 0
  max_recv_message_size = 16777216
  max_send_message_size = 16777216
  tcp_address = ""
  tcp_tls_ca = ""
  tcp_tls_cert = ""
  tcp_tls_key = ""
  uid = 0

[metrics]
  address = ""
  grpc_histogram = false

[plugins]

  [plugins."io.containerd.gc.v1.scheduler"]
    deletion_threshold = 0
    mutation_threshold = 100
    pause_threshold = 0.02
    schedule_delay = "0s"
    startup_delay = "100ms"

  [plugins."io.containerd.grpc.v1.cri"]
    device_ownership_from_security_context = false
    disable_apparmor = false
    disable_cgroup = false
    disable_hugetlb_controller = true
    disable_proc_mount = false
    disable_tcp_service = true
    enable_selinux = false
    enable_tls_streaming = false
    enable_unprivileged_icmp = false
    enable_unprivileged_ports = false
    ignore_image_defined_volumes = false
    max_concurrent_downloads = 3
    max_container_log_line_size = 16384
    netns_mounts_under_state_dir = false
    restrict_oom_score_adj = false
    sandbox_image = "k8s.gcr.io/pause:3.6"
    selinux_category_range = 1024
    stats_collect_period = 10
    stream_idle_timeout = "4h0m0s"
    stream_server_address = "127.0.0.1"
    stream_server_port = "0"
    systemd_cgroup = false
    tolerate_missing_hugetlb_controller = true
    unset_seccomp_profile = ""

    [plugins."io.containerd.grpc.v1.cri".cni]
      bin_dir = "/opt/cni/bin"
      conf_dir = "/etc/cni/net.d"
      conf_template = ""
      ip_pref = ""
      max_conf_num = 1

    [plugins."io.containerd.grpc.v1.cri".containerd]
      default_runtime_name = "runc"
      disable_snapshot_annotations = true
      discard_unpacked_layers = false
      ignore_rdt_not_enabled_errors = false
      no_pivot = false
      snapshotter = "overlayfs"

      [plugins."io.containerd.grpc.v1.cri".containerd.default_runtime]
        base_runtime_spec = ""
        cni_conf_dir = ""
        cni_max_conf_num = 0
        container_annotations = []
        pod_annotations = []
        privileged_without_host_devices = false
        runtime_engine = ""
        runtime_path = ""
        runtime_root = ""
        runtime_type = ""

        [plugins."io.containerd.grpc.v1.cri".containerd.default_runtime.options]

      [plugins."io.containerd.grpc.v1.cri".containerd.runtimes]

        [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.runc]
          base_runtime_spec = ""
          cni_conf_dir = ""
          cni_max_conf_num = 0
          container_annotations = []
          pod_annotations = []
          privileged_without_host_devices = false
          runtime_engine = ""
          runtime_path = ""
          runtime_root = ""
          runtime_type = "io.containerd.runc.v2"

          [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.runc.options]
            BinaryName = ""
            CriuImagePath = ""
            CriuPath = ""
            CriuWorkPath = ""
            IoGid = 0
            IoUid = 0
            NoNewKeyring = false
            NoPivotRoot = false
            Root = ""
            ShimCgroup = ""
            SystemdCgroup = false

      [plugins."io.containerd.grpc.v1.cri".containerd.untrusted_workload_runtime]
        base_runtime_spec = ""
        cni_conf_dir = ""
        cni_max_conf_num = 0
        container_annotations = []
        pod_annotations = []
        privileged_without_host_devices = false
        runtime_engine = ""
        runtime_path = ""
        runtime_root = ""
        runtime_type = ""

        [plugins."io.containerd.grpc.v1.cri".containerd.untrusted_workload_runtime.options]

    [plugins."io.containerd.grpc.v1.cri".image_decryption]
      key_model = "node"

    [plugins."io.containerd.grpc.v1.cri".registry]
      config_path = ""

      [plugins."io.containerd.grpc.v1.cri".registry.auths]

      [plugins."io.containerd.grpc.v1.cri".registry.configs]

      [plugins."io.containerd.grpc.v1.cri".registry.headers]

      [plugins."io.containerd.grpc.v1.cri".registry.mirrors]

    [plugins."io.containerd.grpc.v1.cri".x509_key_pair_streaming]
      tls_cert_file = ""
      tls_key_file = ""

  [plugins."io.containerd.internal.v1.opt"]
    path = "/opt/containerd"

  [plugins."io.containerd.internal.v1.restart"]
    interval = "10s"

  [plugins."io.containerd.internal.v1.tracing"]
    sampling_ratio = 1.0
    service_name = "containerd"

  [plugins."io.containerd.metadata.v1.bolt"]
    content_sharing_policy = "shared"

  [plugins."io.containerd.monitor.v1.cgroups"]
    no_prometheus = false

  [plugins."io.containerd.runtime.v1.linux"]
    no_shim = false
    runtime = "runc"
    runtime_root = ""
    shim = "containerd-shim"
    shim_debug = false

  [plugins."io.containerd.runtime.v2.task"]
    platforms = ["linux/amd64"]
    sched_core = false

  [plugins."io.containerd.service.v1.diff-service"]
    default = ["walking"]

  [plugins."io.containerd.service.v1.tasks-service"]
    rdt_config_file = ""

  [plugins."io.containerd.snapshotter.v1.aufs"]
    root_path = ""

  [plugins."io.containerd.snapshotter.v1.btrfs"]
    root_path = ""

  [plugins."io.containerd.snapshotter.v1.devmapper"]
    async_remove = false
    base_image_size = ""
    discard_blocks = false
    fs_options = ""
    fs_type = ""
    pool_name = ""
    root_path = ""

  [plugins."io.containerd.snapshotter.v1.native"]
    root_path = ""

  [plugins."io.containerd.snapshotter.v1.overlayfs"]
    root_path = ""
    upperdir_label = false

  [plugins."io.containerd.snapshotter.v1.zfs"]
    root_path = ""

  [plugins."io.containerd.tracing.processor.v1.otlp"]
    endpoint = ""
    insecure = false
    protocol = ""

[proxy_plugins]

[stream_processors]

  [stream_processors."io.containerd.ocicrypt.decoder.v1.tar"]
    accepts = ["application/vnd.oci.image.layer.v1.tar+encrypted"]
    args = ["--decryption-keys-path", "/etc/containerd/ocicrypt/keys"]
    env = ["OCICRYPT_KEYPROVIDER_CONFIG=/etc/containerd/ocicrypt/ocicrypt_keyprovider.conf"]
    path = "ctd-decoder"
    returns = "application/vnd.oci.image.layer.v1.tar"

  [stream_processors."io.containerd.ocicrypt.decoder.v1.tar.gzip"]
    accepts = ["application/vnd.oci.image.layer.v1.tar+gzip+encrypted"]
    args = ["--decryption-keys-path", "/etc/containerd/ocicrypt/keys"]
    env = ["OCICRYPT_KEYPROVIDER_CONFIG=/etc/containerd/ocicrypt/ocicrypt_keyprovider.conf"]
    path = "ctd-decoder"
    returns = "application/vnd.oci.image.layer.v1.tar+gzip"

[timeouts]
  "io.containerd.timeout.bolt.open" = "0s"
  "io.containerd.timeout.shim.cleanup" = "5s"
  "io.containerd.timeout.shim.load" = "5s"
  "io.containerd.timeout.shim.shutdown" = "3s"
  "io.containerd.timeout.task.state" = "2s"

[ttrpc]
  address = ""
  gid = 0
  uid = 0
Rules updated
Rules updated (v6)
Rules updated
Rules updated (v6)
Rules updated
Rules updated (v6)
Rules updated
Rules updated (v6)
Rules updated
Rules updated (v6)
Rules updated
Rules updated (v6)
Firewall not enabled (skipping reload)
Skipping adding existing rule
Skipping adding existing rule (v6)
Rules updated
Rules updated (v6)
Firewall not enabled (skipping reload)
br_netfilter
net.bridge.bridge-nf-call-ip6tables = 1
net.bridge.bridge-nf-call-iptables = 1
net.ipv4.ip_forward = 1
* Applying /etc/sysctl.d/10-console-messages.conf ...
kernel.printk = 4 4 1 7
* Applying /etc/sysctl.d/10-ipv6-privacy.conf ...
net.ipv6.conf.all.use_tempaddr = 2
net.ipv6.conf.default.use_tempaddr = 2
* Applying /etc/sysctl.d/10-kernel-hardening.conf ...
kernel.kptr_restrict = 1
* Applying /etc/sysctl.d/10-link-restrictions.conf ...
fs.protected_hardlinks = 1
fs.protected_symlinks = 1
* Applying /etc/sysctl.d/10-magic-sysrq.conf ...
kernel.sysrq = 176
* Applying /etc/sysctl.d/10-network-security.conf ...
net.ipv4.conf.default.rp_filter = 2
net.ipv4.conf.all.rp_filter = 2
* Applying /etc/sysctl.d/10-ptrace.conf ...
kernel.yama.ptrace_scope = 1
* Applying /etc/sysctl.d/10-zeropage.conf ...
vm.mmap_min_addr = 65536
* Applying /usr/lib/sysctl.d/50-default.conf ...
net.ipv4.conf.default.promote_secondaries = 1
sysctl: setting key "net.ipv4.conf.all.promote_secondaries": Invalid argument
net.ipv4.ping_group_range = 0 2147483647
net.core.default_qdisc = fq_codel
fs.protected_regular = 1
fs.protected_fifos = 1
* Applying /usr/lib/sysctl.d/50-pid-max.conf ...
kernel.pid_max = 4194304
* Applying /etc/sysctl.d/99-cloudimg-ipv6.conf ...
net.ipv6.conf.all.use_tempaddr = 0
net.ipv6.conf.default.use_tempaddr = 0
* Applying /etc/sysctl.d/99-sysctl.conf ...
* Applying /etc/sysctl.d/k8s.conf ...
net.ipv4.ip_forward = 1
* Applying /usr/lib/sysctl.d/protect-links.conf ...
fs.protected_fifos = 1
fs.protected_hardlinks = 1
fs.protected_regular = 2
fs.protected_symlinks = 1
* Applying /etc/sysctl.conf ...
LABEL=cloudimg-rootfs   /        ext4   defaults        0 1
LABEL=UEFI      /boot/efi       vfat    umask=0077      0 1
LABEL=cloudimg-rootfs   /        ext4   defaults        0 1
LABEL=UEFI      /boot/efi       vfat    umask=0077      0 1
net.bridge.bridge-nf-call-iptables = 1
Hit:1 https://download.docker.com/linux/ubuntu focal InRelease
Hit:2 http://archive.ubuntu.com/ubuntu focal InRelease
Hit:3 http://security.ubuntu.com/ubuntu focal-security InRelease
Hit:4 http://archive.ubuntu.com/ubuntu focal-updates InRelease
Hit:5 http://archive.ubuntu.com/ubuntu focal-backports InRelease
Reading package lists... Done
Building dependency tree
Reading state information... Done
7 packages can be upgraded. Run 'apt list --upgradable' to see them.
Reading package lists... Done
Building dependency tree
Reading state information... Done
ca-certificates is already the newest version (20211016~20.04.1).
curl is already the newest version (7.68.0-1ubuntu2.12).
The following NEW packages will be installed:
  apt-transport-https
0 upgraded, 1 newly installed, 0 to remove and 7 not upgraded.
Need to get 1704 B of archives.
After this operation, 162 kB of additional disk space will be used.
Get:1 http://archive.ubuntu.com/ubuntu focal-updates/universe amd64 apt-transport-https all 2.0.9 [1704 B]
Fetched 1704 B in 0s (18.0 kB/s)
Selecting previously unselected package apt-transport-https.
(Reading database ... 63834 files and directories currently installed.)
Preparing to unpack .../apt-transport-https_2.0.9_all.deb ...
Unpacking apt-transport-https (2.0.9) ...
Setting up apt-transport-https (2.0.9) ...
deb [signed-by=/usr/share/keyrings/kubernetes-archive-keyring.gpg] https://apt.kubernetes.io/ kubernetes-xenial main
Hit:1 https://download.docker.com/linux/ubuntu focal InRelease
Hit:2 http://archive.ubuntu.com/ubuntu focal InRelease
Hit:3 http://archive.ubuntu.com/ubuntu focal-updates InRelease
Hit:4 http://archive.ubuntu.com/ubuntu focal-backports InRelease
Hit:5 http://security.ubuntu.com/ubuntu focal-security InRelease
Get:6 https://packages.cloud.google.com/apt kubernetes-xenial InRelease [9383 B]
Get:7 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 Packages [58.4 kB]
Fetched 67.8 kB in 1s (96.1 kB/s)
Reading package lists... Done
Building dependency tree
Reading state information... Done
7 packages can be upgraded. Run 'apt list --upgradable' to see them.
Reading package lists... Done
Building dependency tree
Reading state information... Done
The following additional packages will be installed:
  conntrack cri-tools ebtables kubernetes-cni socat
Suggested packages:
  nftables
The following NEW packages will be installed:
  conntrack cri-tools ebtables kubeadm kubectl kubelet kubernetes-cni socat
0 upgraded, 8 newly installed, 0 to remove and 7 not upgraded.
Need to get 75.9 MB of archives.
After this operation, 310 MB of additional disk space will be used.
Get:4 http://archive.ubuntu.com/ubuntu focal/main amd64 conntrack amd64 1:1.4.5-2 [30.3 kB]
Get:1 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 cri-tools amd64 1.24.2-00 [12.3 MB]
Get:7 http://archive.ubuntu.com/ubuntu focal/main amd64 ebtables amd64 2.0.11-3build1 [80.3 kB]
Get:8 http://archive.ubuntu.com/ubuntu focal/main amd64 socat amd64 1.7.3.3-2 [323 kB]
Get:2 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 kubernetes-cni amd64 0.8.7-00 [25.0 MB]
Get:3 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 kubelet amd64 1.25.0-00 [19.5 MB]
Get:5 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 kubectl amd64 1.25.0-00 [9500 kB]
Get:6 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 kubeadm amd64 1.25.0-00 [9213 kB]
Fetched 75.9 MB in 1s (55.4 MB/s)
Selecting previously unselected package conntrack.
(Reading database ... 63838 files and directories currently installed.)
Preparing to unpack .../0-conntrack_1%3a1.4.5-2_amd64.deb ...
Unpacking conntrack (1:1.4.5-2) ...
Selecting previously unselected package cri-tools.
Preparing to unpack .../1-cri-tools_1.24.2-00_amd64.deb ...
Unpacking cri-tools (1.24.2-00) ...
Selecting previously unselected package ebtables.
Preparing to unpack .../2-ebtables_2.0.11-3build1_amd64.deb ...
Unpacking ebtables (2.0.11-3build1) ...
Selecting previously unselected package kubernetes-cni.
Preparing to unpack .../3-kubernetes-cni_0.8.7-00_amd64.deb ...
Unpacking kubernetes-cni (0.8.7-00) ...
Selecting previously unselected package socat.
Preparing to unpack .../4-socat_1.7.3.3-2_amd64.deb ...
Unpacking socat (1.7.3.3-2) ...
Selecting previously unselected package kubelet.
Preparing to unpack .../5-kubelet_1.25.0-00_amd64.deb ...
Unpacking kubelet (1.25.0-00) ...
Selecting previously unselected package kubectl.
Preparing to unpack .../6-kubectl_1.25.0-00_amd64.deb ...
Unpacking kubectl (1.25.0-00) ...
Selecting previously unselected package kubeadm.
Preparing to unpack .../7-kubeadm_1.25.0-00_amd64.deb ...
Unpacking kubeadm (1.25.0-00) ...
Setting up conntrack (1:1.4.5-2) ...
Setting up kubectl (1.25.0-00) ...
Setting up ebtables (2.0.11-3build1) ...
Setting up socat (1.7.3.3-2) ...
Setting up cri-tools (1.24.2-00) ...
Setting up kubernetes-cni (0.8.7-00) ...
Setting up kubelet (1.25.0-00) ...
Created symlink /etc/systemd/system/multi-user.target.wants/kubelet.service → /lib/systemd/system/kubelet.service.
Setting up kubeadm (1.25.0-00) ...
Processing triggers for man-db (2.9.1-1) ...
ubuntu@node1:~$ sudo kubeadm init --pod-network-cidr=192.168.0.0/16
[init] Using Kubernetes version: v1.25.0
[preflight] Running pre-flight checks
[preflight] Pulling images required for setting up a Kubernetes cluster
[preflight] This might take a minute or two, depending on the speed of your internet connection
[preflight] You can also perform this action in beforehand using 'kubeadm config images pull'
[certs] Using certificateDir folder "/etc/kubernetes/pki"
[certs] Generating "ca" certificate and key
[certs] Generating "apiserver" certificate and key
[certs] apiserver serving cert is signed for DNS names [kubernetes kubernetes.default kubernetes.default.svc kubernetes.default.svc.cluster.local node1] and IPs [10.96.0.1 10.9.233.141]
[certs] Generating "apiserver-kubelet-client" certificate and key
[certs] Generating "front-proxy-ca" certificate and key
[certs] Generating "front-proxy-client" certificate and key
[certs] Generating "etcd/ca" certificate and key
[certs] Generating "etcd/server" certificate and key
[certs] etcd/server serving cert is signed for DNS names [localhost node1] and IPs [10.9.233.141 127.0.0.1 ::1]
[certs] Generating "etcd/peer" certificate and key
[certs] etcd/peer serving cert is signed for DNS names [localhost node1] and IPs [10.9.233.141 127.0.0.1 ::1]
[certs] Generating "etcd/healthcheck-client" certificate and key
[certs] Generating "apiserver-etcd-client" certificate and key
[certs] Generating "sa" key and public key
[kubeconfig] Using kubeconfig folder "/etc/kubernetes"
[kubeconfig] Writing "admin.conf" kubeconfig file
[kubeconfig] Writing "kubelet.conf" kubeconfig file
[kubeconfig] Writing "controller-manager.conf" kubeconfig file
[kubeconfig] Writing "scheduler.conf" kubeconfig file
[kubelet-start] Writing kubelet environment file with flags to file "/var/lib/kubelet/kubeadm-flags.env"
[kubelet-start] Writing kubelet configuration to file "/var/lib/kubelet/config.yaml"
[kubelet-start] Starting the kubelet
[control-plane] Using manifest folder "/etc/kubernetes/manifests"
[control-plane] Creating static Pod manifest for "kube-apiserver"
[control-plane] Creating static Pod manifest for "kube-controller-manager"
[control-plane] Creating static Pod manifest for "kube-scheduler"
[etcd] Creating static Pod manifest for local etcd in "/etc/kubernetes/manifests"
[wait-control-plane] Waiting for the kubelet to boot up the control plane as static Pods from directory "/etc/kubernetes/manifests". This can take up to 4m0s
[apiclient] All control plane components are healthy after 6.002754 seconds
[upload-config] Storing the configuration used in ConfigMap "kubeadm-config" in the "kube-system" Namespace
[kubelet] Creating a ConfigMap "kubelet-config" in namespace kube-system with the configuration for the kubelets in the cluster
[upload-certs] Skipping phase. Please see --upload-certs
[mark-control-plane] Marking the node node1 as control-plane by adding the labels: [node-role.kubernetes.io/control-plane node.kubernetes.io/exclude-from-external-load-balancers]
[mark-control-plane] Marking the node node1 as control-plane by adding the taints [node-role.kubernetes.io/control-plane:NoSchedule]
[bootstrap-token] Using token: ec8eiq.90ttjkzdrevj2n9n
[bootstrap-token] Configuring bootstrap tokens, cluster-info ConfigMap, RBAC Roles
[bootstrap-token] Configured RBAC rules to allow Node Bootstrap tokens to get nodes
[bootstrap-token] Configured RBAC rules to allow Node Bootstrap tokens to post CSRs in order for nodes to get long term certificate credentials
[bootstrap-token] Configured RBAC rules to allow the csrapprover controller automatically approve CSRs from a Node Bootstrap Token
[bootstrap-token] Configured RBAC rules to allow certificate rotation for all node client certificates in the cluster
[bootstrap-token] Creating the "cluster-info" ConfigMap in the "kube-public" namespace
[kubelet-finalize] Updating "/etc/kubernetes/kubelet.conf" to point to a rotatable kubelet client certificate and key
[addons] Applied essential addon: CoreDNS
[addons] Applied essential addon: kube-proxy

Your Kubernetes control-plane has initialized successfully!

To start using your cluster, you need to run the following as a regular user:

  mkdir -p $HOME/.kube
  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
  sudo chown $(id -u):$(id -g) $HOME/.kube/config

Alternatively, if you are the root user, you can run:

  export KUBECONFIG=/etc/kubernetes/admin.conf

You should now deploy a pod network to the cluster.
Run "kubectl apply -f [podnetwork].yaml" with one of the options listed at:
  https://kubernetes.io/docs/concepts/cluster-administration/addons/

Then you can join any number of worker nodes by running the following on each as root:

kubeadm join 10.9.233.141:6443 --token ec8eiq.90ttjkzdrevj2n9n \
        --discovery-token-ca-cert-hash sha256:074d9c4898aa4ca843d6993e1aa432682ed6b94678647ec8d5a7ad04162db449
ubuntu@node1:~$ mkdir -p $HOME/.kube
ubuntu@node1:~$ sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
ubuntu@node1:~$ sudo chown $(id -u):$(id -g) $HOME/.kube/config
ubuntu@node1:~$ kubectl get nodes
NAME    STATUS     ROLES           AGE    VERSION
node1   NotReady   control-plane   3m1s   v1.25.0
ubuntu@node1:~$ kubectl create -f https://projectcalico.docs.tigera.io/manifests/tigera-operator.yaml
namespace/tigera-operator created
customresourcedefinition.apiextensions.k8s.io/bgpconfigurations.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/bgppeers.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/blockaffinities.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/caliconodestatuses.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/clusterinformations.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/felixconfigurations.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/globalnetworkpolicies.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/globalnetworksets.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/hostendpoints.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/ipamblocks.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/ipamconfigs.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/ipamhandles.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/ippools.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/ipreservations.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/kubecontrollersconfigurations.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/networkpolicies.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/networksets.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/apiservers.operator.tigera.io created
customresourcedefinition.apiextensions.k8s.io/imagesets.operator.tigera.io created
customresourcedefinition.apiextensions.k8s.io/installations.operator.tigera.io created
customresourcedefinition.apiextensions.k8s.io/tigerastatuses.operator.tigera.io created
serviceaccount/tigera-operator created
clusterrole.rbac.authorization.k8s.io/tigera-operator created
clusterrolebinding.rbac.authorization.k8s.io/tigera-operator created
deployment.apps/tigera-operator created
ubuntu@node1:~$ kubectl create -f https://projectcalico.docs.tigera.io/manifests/custom-resources.yaml
installation.operator.tigera.io/default created
apiserver.operator.tigera.io/default created
ubuntu@node1:~$ kubectl get nodes --show-labels
NAME    STATUS     ROLES           AGE     VERSION   LABELS
node1   NotReady   control-plane   3m43s   v1.25.0   beta.kubernetes.io/arch=amd64,beta.kubernetes.io/os=linux,kubernetes.io/arch=amd64,kubernetes.io/hostname=node1,kubernetes.io/os=linux,node-role.kubernetes.io/control-plane=,node.kubernetes.io/exclude-from-external-load-balancers=
ubuntu@node1:~$ exit
logout
mfm@wv04:~$ multipass shell node2
Welcome to Ubuntu 20.04.4 LTS (GNU/Linux 5.4.0-125-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

  System information as of Mon Aug 29 21:24:06 UTC 2022

  System load:  0.08              Processes:             142
  Usage of /:   2.8% of 48.27GB   Users logged in:       0
  Memory usage: 3%                IPv4 address for ens3: 10.9.233.229
  Swap usage:   0%


0 updates can be applied immediately.

New release '22.04.1 LTS' available.
Run 'do-release-upgrade' to upgrade to it.


To run a command as administrator (user "root"), use "sudo <command>".
See "man sudo_root" for details.

ubuntu@node2:~$ vi doit22
ubuntu@node2:~$ ubuntu@node2:~$ . doit22
Get:1 http://security.ubuntu.com/ubuntu focal-security InRelease [114 kB]
Hit:2 http://archive.ubuntu.com/ubuntu focal InRelease
Get:3 http://archive.ubuntu.com/ubuntu focal-updates InRelease [114 kB]
Get:4 http://security.ubuntu.com/ubuntu focal-security/main amd64 Packages [1683 kB]
Get:5 http://archive.ubuntu.com/ubuntu focal-backports InRelease [108 kB]
Get:6 http://archive.ubuntu.com/ubuntu focal/universe amd64 Packages [8628 kB]
Get:7 http://security.ubuntu.com/ubuntu focal-security/main Translation-en [284 kB]
Get:8 http://security.ubuntu.com/ubuntu focal-security/main amd64 c-n-f Metadata [11.0 kB]
Get:9 http://security.ubuntu.com/ubuntu focal-security/restricted amd64 Packages [1147 kB]
Get:10 http://security.ubuntu.com/ubuntu focal-security/restricted Translation-en [163 kB]
Get:11 http://security.ubuntu.com/ubuntu focal-security/universe amd64 Packages [715 kB]
Get:12 http://security.ubuntu.com/ubuntu focal-security/universe Translation-en [130 kB]
Get:13 http://security.ubuntu.com/ubuntu focal-security/universe amd64 c-n-f Metadata [14.8 kB]
Get:14 http://security.ubuntu.com/ubuntu focal-security/multiverse amd64 Packages [22.2 kB]
Get:15 http://security.ubuntu.com/ubuntu focal-security/multiverse Translation-en [5376 B]
Get:16 http://security.ubuntu.com/ubuntu focal-security/multiverse amd64 c-n-f Metadata [508 B]
Get:17 http://archive.ubuntu.com/ubuntu focal/universe Translation-en [5124 kB]
Get:18 http://archive.ubuntu.com/ubuntu focal/universe amd64 c-n-f Metadata [265 kB]
Get:19 http://archive.ubuntu.com/ubuntu focal/multiverse amd64 Packages [144 kB]
Get:20 http://archive.ubuntu.com/ubuntu focal/multiverse Translation-en [104 kB]
Get:21 http://archive.ubuntu.com/ubuntu focal/multiverse amd64 c-n-f Metadata [9136 B]
Get:22 http://archive.ubuntu.com/ubuntu focal-updates/main amd64 Packages [2051 kB]
Get:23 http://archive.ubuntu.com/ubuntu focal-updates/main Translation-en [366 kB]
Get:24 http://archive.ubuntu.com/ubuntu focal-updates/main amd64 c-n-f Metadata [15.8 kB]
Get:25 http://archive.ubuntu.com/ubuntu focal-updates/restricted amd64 Packages [1234 kB]
Get:26 http://archive.ubuntu.com/ubuntu focal-updates/restricted Translation-en [175 kB]
Get:27 http://archive.ubuntu.com/ubuntu focal-updates/universe amd64 Packages [941 kB]
Get:28 http://archive.ubuntu.com/ubuntu focal-updates/universe Translation-en [213 kB]
Get:29 http://archive.ubuntu.com/ubuntu focal-updates/universe amd64 c-n-f Metadata [21.2 kB]
Get:30 http://archive.ubuntu.com/ubuntu focal-updates/multiverse amd64 Packages [24.4 kB]
Get:31 http://archive.ubuntu.com/ubuntu focal-updates/multiverse Translation-en [7336 B]
Get:32 http://archive.ubuntu.com/ubuntu focal-updates/multiverse amd64 c-n-f Metadata [588 B]
Get:33 http://archive.ubuntu.com/ubuntu focal-backports/main amd64 Packages [45.6 kB]
Get:34 http://archive.ubuntu.com/ubuntu focal-backports/main Translation-en [16.3 kB]
Get:35 http://archive.ubuntu.com/ubuntu focal-backports/main amd64 c-n-f Metadata [1420 B]
Get:36 http://archive.ubuntu.com/ubuntu focal-backports/restricted amd64 c-n-f Metadata [116 B]
Get:37 http://archive.ubuntu.com/ubuntu focal-backports/universe amd64 Packages [23.9 kB]
Get:38 http://archive.ubuntu.com/ubuntu focal-backports/universe Translation-en [16.0 kB]
Get:39 http://archive.ubuntu.com/ubuntu focal-backports/universe amd64 c-n-f Metadata [860 B]
Get:40 http://archive.ubuntu.com/ubuntu focal-backports/multiverse amd64 c-n-f Metadata [116 B]
Fetched 23.9 MB in 4s (5670 kB/s)
Reading package lists... Done
Building dependency tree
Reading state information... Done
7 packages can be upgraded. Run 'apt list --upgradable' to see them.
Reading package lists... Done
Building dependency tree
Reading state information... Done
lsb-release is already the newest version (11.1.0ubuntu2).
lsb-release set to manually installed.
ca-certificates is already the newest version (20211016~20.04.1).
ca-certificates set to manually installed.
curl is already the newest version (7.68.0-1ubuntu2.12).
curl set to manually installed.
gnupg is already the newest version (2.2.19-3ubuntu2.2).
gnupg set to manually installed.
0 upgraded, 0 newly installed, 0 to remove and 7 not upgraded.
deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu focal stable
Get:1 https://download.docker.com/linux/ubuntu focal InRelease [57.7 kB]
Hit:2 http://archive.ubuntu.com/ubuntu focal InRelease
Hit:3 http://security.ubuntu.com/ubuntu focal-security InRelease
Get:4 https://download.docker.com/linux/ubuntu focal/stable amd64 Packages [17.9 kB]
Hit:5 http://archive.ubuntu.com/ubuntu focal-updates InRelease
Hit:6 http://archive.ubuntu.com/ubuntu focal-backports InRelease
Fetched 75.6 kB in 1s (120 kB/s)
Reading package lists... Done
Building dependency tree
Reading state information... Done
7 packages can be upgraded. Run 'apt list --upgradable' to see them.
Reading package lists... Done
Building dependency tree
Reading state information... Done
The following NEW packages will be installed:
  containerd.io
0 upgraded, 1 newly installed, 0 to remove and 7 not upgraded.
Need to get 28.1 MB of archives.
After this operation, 127 MB of additional disk space will be used.
Get:1 https://download.docker.com/linux/ubuntu focal/stable amd64 containerd.io amd64 1.6.8-1 [28.1 MB]
Fetched 28.1 MB in 1s (39.7 MB/s)
Selecting previously unselected package containerd.io.
(Reading database ... 63818 files and directories currently installed.)
Preparing to unpack .../containerd.io_1.6.8-1_amd64.deb ...
Unpacking containerd.io (1.6.8-1) ...
Setting up containerd.io (1.6.8-1) ...
Created symlink /etc/systemd/system/multi-user.target.wants/containerd.service → /lib/systemd/system/containerd.service.
Processing triggers for man-db (2.9.1-1) ...
--2022-08-29 21:24:58--  https://github.com/opencontainers/runc/releases/download/v1.1.1/runc.amd64
Resolving github.com (github.com)... 140.82.114.3
Connecting to github.com (github.com)|140.82.114.3|:443... connected.
HTTP request sent, awaiting response... 302 Found
Location: https://objects.githubusercontent.com/github-production-release-asset-2e65be/36960321/decb03b0-76a4-4ee7-bd06-4e3a548d9f87?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIWNJYAX4CSVEH53A%2F20220829%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20220829T212458Z&X-Amz-Expires=300&X-Amz-Signature=d559e01200aa9c585eb072e0b961aa6eb6c91fc84c1d0dc71e436fa5617299ec&X-Amz-SignedHeaders=host&actor_id=0&key_id=0&repo_id=36960321&response-content-disposition=attachment%3B%20filename%3Drunc.amd64&response-content-type=application%2Foctet-stream [following]
--2022-08-29 21:24:58--  https://objects.githubusercontent.com/github-production-release-asset-2e65be/36960321/decb03b0-76a4-4ee7-bd06-4e3a548d9f87?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIWNJYAX4CSVEH53A%2F20220829%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20220829T212458Z&X-Amz-Expires=300&X-Amz-Signature=d559e01200aa9c585eb072e0b961aa6eb6c91fc84c1d0dc71e436fa5617299ec&X-Amz-SignedHeaders=host&actor_id=0&key_id=0&repo_id=36960321&response-content-disposition=attachment%3B%20filename%3Drunc.amd64&response-content-type=application%2Foctet-stream
Resolving objects.githubusercontent.com (objects.githubusercontent.com)... 185.199.108.133, 185.199.111.133, 185.199.110.133, ...
Connecting to objects.githubusercontent.com (objects.githubusercontent.com)|185.199.108.133|:443... connected.
HTTP request sent, awaiting response... 200 OK
Length: 9415040 (9.0M) [application/octet-stream]
Saving to: ‘runc.amd64’

runc.amd64                                 100%[=======================================================================================>]   8.98M  --.-KB/s    in 0.1s

2022-08-29 21:24:58 (61.9 MB/s) - ‘runc.amd64’ saved [9415040/9415040]

disabled_plugins = []
imports = []
oom_score = 0
plugin_dir = ""
required_plugins = []
root = "/var/lib/containerd"
state = "/run/containerd"
temp = ""
version = 2

[cgroup]
  path = ""

[debug]
  address = ""
  format = ""
  gid = 0
  level = ""
  uid = 0

[grpc]
  address = "/run/containerd/containerd.sock"
  gid = 0
  max_recv_message_size = 16777216
  max_send_message_size = 16777216
  tcp_address = ""
  tcp_tls_ca = ""
  tcp_tls_cert = ""
  tcp_tls_key = ""
  uid = 0

[metrics]
  address = ""
  grpc_histogram = false

[plugins]

  [plugins."io.containerd.gc.v1.scheduler"]
    deletion_threshold = 0
    mutation_threshold = 100
    pause_threshold = 0.02
    schedule_delay = "0s"
    startup_delay = "100ms"

  [plugins."io.containerd.grpc.v1.cri"]
    device_ownership_from_security_context = false
    disable_apparmor = false
    disable_cgroup = false
    disable_hugetlb_controller = true
    disable_proc_mount = false
    disable_tcp_service = true
    enable_selinux = false
    enable_tls_streaming = false
    enable_unprivileged_icmp = false
    enable_unprivileged_ports = false
    ignore_image_defined_volumes = false
    max_concurrent_downloads = 3
    max_container_log_line_size = 16384
    netns_mounts_under_state_dir = false
    restrict_oom_score_adj = false
    sandbox_image = "k8s.gcr.io/pause:3.6"
    selinux_category_range = 1024
    stats_collect_period = 10
    stream_idle_timeout = "4h0m0s"
    stream_server_address = "127.0.0.1"
    stream_server_port = "0"
    systemd_cgroup = false
    tolerate_missing_hugetlb_controller = true
    unset_seccomp_profile = ""

    [plugins."io.containerd.grpc.v1.cri".cni]
      bin_dir = "/opt/cni/bin"
      conf_dir = "/etc/cni/net.d"
      conf_template = ""
      ip_pref = ""
      max_conf_num = 1

    [plugins."io.containerd.grpc.v1.cri".containerd]
      default_runtime_name = "runc"
      disable_snapshot_annotations = true
      discard_unpacked_layers = false
      ignore_rdt_not_enabled_errors = false
      no_pivot = false
      snapshotter = "overlayfs"

      [plugins."io.containerd.grpc.v1.cri".containerd.default_runtime]
        base_runtime_spec = ""
        cni_conf_dir = ""
        cni_max_conf_num = 0
        container_annotations = []
        pod_annotations = []
        privileged_without_host_devices = false
        runtime_engine = ""
        runtime_path = ""
        runtime_root = ""
        runtime_type = ""

        [plugins."io.containerd.grpc.v1.cri".containerd.default_runtime.options]

      [plugins."io.containerd.grpc.v1.cri".containerd.runtimes]

        [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.runc]
          base_runtime_spec = ""
          cni_conf_dir = ""
          cni_max_conf_num = 0
          container_annotations = []
          pod_annotations = []
          privileged_without_host_devices = false
          runtime_engine = ""
          runtime_path = ""
          runtime_root = ""
          runtime_type = "io.containerd.runc.v2"

          [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.runc.options]
            BinaryName = ""
            CriuImagePath = ""
            CriuPath = ""
            CriuWorkPath = ""
            IoGid = 0
            IoUid = 0
            NoNewKeyring = false
            NoPivotRoot = false
            Root = ""
            ShimCgroup = ""
            SystemdCgroup = false

      [plugins."io.containerd.grpc.v1.cri".containerd.untrusted_workload_runtime]
        base_runtime_spec = ""
        cni_conf_dir = ""
        cni_max_conf_num = 0
        container_annotations = []
        pod_annotations = []
        privileged_without_host_devices = false
        runtime_engine = ""
        runtime_path = ""
        runtime_root = ""
        runtime_type = ""

        [plugins."io.containerd.grpc.v1.cri".containerd.untrusted_workload_runtime.options]

    [plugins."io.containerd.grpc.v1.cri".image_decryption]
      key_model = "node"

    [plugins."io.containerd.grpc.v1.cri".registry]
      config_path = ""

      [plugins."io.containerd.grpc.v1.cri".registry.auths]

      [plugins."io.containerd.grpc.v1.cri".registry.configs]

      [plugins."io.containerd.grpc.v1.cri".registry.headers]

      [plugins."io.containerd.grpc.v1.cri".registry.mirrors]

    [plugins."io.containerd.grpc.v1.cri".x509_key_pair_streaming]
      tls_cert_file = ""
      tls_key_file = ""

  [plugins."io.containerd.internal.v1.opt"]
    path = "/opt/containerd"

  [plugins."io.containerd.internal.v1.restart"]
    interval = "10s"

  [plugins."io.containerd.internal.v1.tracing"]
    sampling_ratio = 1.0
    service_name = "containerd"

  [plugins."io.containerd.metadata.v1.bolt"]
    content_sharing_policy = "shared"

  [plugins."io.containerd.monitor.v1.cgroups"]
    no_prometheus = false

  [plugins."io.containerd.runtime.v1.linux"]
    no_shim = false
    runtime = "runc"
    runtime_root = ""
    shim = "containerd-shim"
    shim_debug = false

  [plugins."io.containerd.runtime.v2.task"]
    platforms = ["linux/amd64"]
    sched_core = false

  [plugins."io.containerd.service.v1.diff-service"]
    default = ["walking"]

  [plugins."io.containerd.service.v1.tasks-service"]
    rdt_config_file = ""

  [plugins."io.containerd.snapshotter.v1.aufs"]
    root_path = ""

  [plugins."io.containerd.snapshotter.v1.btrfs"]
    root_path = ""

  [plugins."io.containerd.snapshotter.v1.devmapper"]
    async_remove = false
    base_image_size = ""
    discard_blocks = false
    fs_options = ""
    fs_type = ""
    pool_name = ""
    root_path = ""

  [plugins."io.containerd.snapshotter.v1.native"]
    root_path = ""

  [plugins."io.containerd.snapshotter.v1.overlayfs"]
    root_path = ""
    upperdir_label = false

  [plugins."io.containerd.snapshotter.v1.zfs"]
    root_path = ""

  [plugins."io.containerd.tracing.processor.v1.otlp"]
    endpoint = ""
    insecure = false
    protocol = ""

[proxy_plugins]

[stream_processors]

  [stream_processors."io.containerd.ocicrypt.decoder.v1.tar"]
    accepts = ["application/vnd.oci.image.layer.v1.tar+encrypted"]
    args = ["--decryption-keys-path", "/etc/containerd/ocicrypt/keys"]
    env = ["OCICRYPT_KEYPROVIDER_CONFIG=/etc/containerd/ocicrypt/ocicrypt_keyprovider.conf"]
    path = "ctd-decoder"
    returns = "application/vnd.oci.image.layer.v1.tar"

  [stream_processors."io.containerd.ocicrypt.decoder.v1.tar.gzip"]
    accepts = ["application/vnd.oci.image.layer.v1.tar+gzip+encrypted"]
    args = ["--decryption-keys-path", "/etc/containerd/ocicrypt/keys"]
    env = ["OCICRYPT_KEYPROVIDER_CONFIG=/etc/containerd/ocicrypt/ocicrypt_keyprovider.conf"]
    path = "ctd-decoder"
    returns = "application/vnd.oci.image.layer.v1.tar+gzip"

[timeouts]
  "io.containerd.timeout.bolt.open" = "0s"
  "io.containerd.timeout.shim.cleanup" = "5s"
  "io.containerd.timeout.shim.load" = "5s"
  "io.containerd.timeout.shim.shutdown" = "3s"
  "io.containerd.timeout.task.state" = "2s"

[ttrpc]
  address = ""
  gid = 0
  uid = 0
Rules updated
Rules updated (v6)
Rules updated
Rules updated (v6)
Rules updated
Rules updated (v6)
Rules updated
Rules updated (v6)
Rules updated
Rules updated (v6)
Rules updated
Rules updated (v6)
Firewall not enabled (skipping reload)
Skipping adding existing rule
Skipping adding existing rule (v6)
Rules updated
Rules updated (v6)
Firewall not enabled (skipping reload)
br_netfilter
net.bridge.bridge-nf-call-ip6tables = 1
net.bridge.bridge-nf-call-iptables = 1
net.ipv4.ip_forward = 1
* Applying /etc/sysctl.d/10-console-messages.conf ...
kernel.printk = 4 4 1 7
* Applying /etc/sysctl.d/10-ipv6-privacy.conf ...
net.ipv6.conf.all.use_tempaddr = 2
net.ipv6.conf.default.use_tempaddr = 2
* Applying /etc/sysctl.d/10-kernel-hardening.conf ...
kernel.kptr_restrict = 1
* Applying /etc/sysctl.d/10-link-restrictions.conf ...
fs.protected_hardlinks = 1
fs.protected_symlinks = 1
* Applying /etc/sysctl.d/10-magic-sysrq.conf ...
kernel.sysrq = 176
* Applying /etc/sysctl.d/10-network-security.conf ...
net.ipv4.conf.default.rp_filter = 2
net.ipv4.conf.all.rp_filter = 2
* Applying /etc/sysctl.d/10-ptrace.conf ...
kernel.yama.ptrace_scope = 1
* Applying /etc/sysctl.d/10-zeropage.conf ...
vm.mmap_min_addr = 65536
* Applying /usr/lib/sysctl.d/50-default.conf ...
net.ipv4.conf.default.promote_secondaries = 1
sysctl: setting key "net.ipv4.conf.all.promote_secondaries": Invalid argument
net.ipv4.ping_group_range = 0 2147483647
net.core.default_qdisc = fq_codel
fs.protected_regular = 1
fs.protected_fifos = 1
* Applying /usr/lib/sysctl.d/50-pid-max.conf ...
kernel.pid_max = 4194304
* Applying /etc/sysctl.d/99-cloudimg-ipv6.conf ...
net.ipv6.conf.all.use_tempaddr = 0
net.ipv6.conf.default.use_tempaddr = 0
* Applying /etc/sysctl.d/99-sysctl.conf ...
* Applying /etc/sysctl.d/k8s.conf ...
net.ipv4.ip_forward = 1
* Applying /usr/lib/sysctl.d/protect-links.conf ...
fs.protected_fifos = 1
fs.protected_hardlinks = 1
fs.protected_regular = 2
fs.protected_symlinks = 1
* Applying /etc/sysctl.conf ...
LABEL=cloudimg-rootfs   /        ext4   defaults        0 1
LABEL=UEFI      /boot/efi       vfat    umask=0077      0 1
net.bridge.bridge-nf-call-iptables = 1
Hit:1 https://download.docker.com/linux/ubuntu focal InRelease
Hit:2 http://archive.ubuntu.com/ubuntu focal InRelease
Hit:3 http://archive.ubuntu.com/ubuntu focal-updates InRelease
Hit:4 http://archive.ubuntu.com/ubuntu focal-backports InRelease
Hit:5 http://security.ubuntu.com/ubuntu focal-security InRelease
Reading package lists... Done
Building dependency tree
Reading state information... Done
7 packages can be upgraded. Run 'apt list --upgradable' to see them.
Reading package lists... Done
Building dependency tree
Reading state information... Done
ca-certificates is already the newest version (20211016~20.04.1).
curl is already the newest version (7.68.0-1ubuntu2.12).
The following NEW packages will be installed:
  apt-transport-https
0 upgraded, 1 newly installed, 0 to remove and 7 not upgraded.
Need to get 1704 B of archives.
After this operation, 162 kB of additional disk space will be used.
Get:1 http://archive.ubuntu.com/ubuntu focal-updates/universe amd64 apt-transport-https all 2.0.9 [1704 B]
Fetched 1704 B in 0s (17.4 kB/s)
Selecting previously unselected package apt-transport-https.
(Reading database ... 63834 files and directories currently installed.)
Preparing to unpack .../apt-transport-https_2.0.9_all.deb ...
Unpacking apt-transport-https (2.0.9) ...
Setting up apt-transport-https (2.0.9) ...
deb [signed-by=/usr/share/keyrings/kubernetes-archive-keyring.gpg] https://apt.kubernetes.io/ kubernetes-xenial main
Hit:1 https://download.docker.com/linux/ubuntu focal InRelease
Hit:2 http://archive.ubuntu.com/ubuntu focal InRelease
Hit:3 http://archive.ubuntu.com/ubuntu focal-updates InRelease
Hit:4 http://archive.ubuntu.com/ubuntu focal-backports InRelease
Hit:5 http://security.ubuntu.com/ubuntu focal-security InRelease
Get:6 https://packages.cloud.google.com/apt kubernetes-xenial InRelease [9383 B]
Get:7 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 Packages [58.4 kB]
Fetched 67.8 kB in 1s (97.3 kB/s)
Reading package lists... Done
Building dependency tree
Reading state information... Done
7 packages can be upgraded. Run 'apt list --upgradable' to see them.
Reading package lists... Done
Building dependency tree
Reading state information... Done
The following additional packages will be installed:
  conntrack cri-tools ebtables kubernetes-cni socat
Suggested packages:
  nftables
The following NEW packages will be installed:
  conntrack cri-tools ebtables kubeadm kubectl kubelet kubernetes-cni socat
0 upgraded, 8 newly installed, 0 to remove and 7 not upgraded.
Need to get 75.9 MB of archives.
After this operation, 310 MB of additional disk space will be used.
Get:4 http://archive.ubuntu.com/ubuntu focal/main amd64 conntrack amd64 1:1.4.5-2 [30.3 kB]
Get:1 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 cri-tools amd64 1.24.2-00 [12.3 MB]
Get:7 http://archive.ubuntu.com/ubuntu focal/main amd64 ebtables amd64 2.0.11-3build1 [80.3 kB]
Get:8 http://archive.ubuntu.com/ubuntu focal/main amd64 socat amd64 1.7.3.3-2 [323 kB]
Get:2 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 kubernetes-cni amd64 0.8.7-00 [25.0 MB]
Get:3 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 kubelet amd64 1.25.0-00 [19.5 MB]
Get:5 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 kubectl amd64 1.25.0-00 [9500 kB]
Get:6 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 kubeadm amd64 1.25.0-00 [9213 kB]
Fetched 75.9 MB in 1s (58.2 MB/s)
Selecting previously unselected package conntrack.
(Reading database ... 63838 files and directories currently installed.)
Preparing to unpack .../0-conntrack_1%3a1.4.5-2_amd64.deb ...
Unpacking conntrack (1:1.4.5-2) ...
Selecting previously unselected package cri-tools.
Preparing to unpack .../1-cri-tools_1.24.2-00_amd64.deb ...
Unpacking cri-tools (1.24.2-00) ...
Selecting previously unselected package ebtables.
Preparing to unpack .../2-ebtables_2.0.11-3build1_amd64.deb ...
Unpacking ebtables (2.0.11-3build1) ...
Selecting previously unselected package kubernetes-cni.
Preparing to unpack .../3-kubernetes-cni_0.8.7-00_amd64.deb ...
Unpacking kubernetes-cni (0.8.7-00) ...
Selecting previously unselected package socat.
Preparing to unpack .../4-socat_1.7.3.3-2_amd64.deb ...
Unpacking socat (1.7.3.3-2) ...
Selecting previously unselected package kubelet.
Preparing to unpack .../5-kubelet_1.25.0-00_amd64.deb ...
Unpacking kubelet (1.25.0-00) ...
Selecting previously unselected package kubectl.
Preparing to unpack .../6-kubectl_1.25.0-00_amd64.deb ...
Unpacking kubectl (1.25.0-00) ...
Selecting previously unselected package kubeadm.
Preparing to unpack .../7-kubeadm_1.25.0-00_amd64.deb ...
Unpacking kubeadm (1.25.0-00) ...
Setting up conntrack (1:1.4.5-2) ...
Setting up kubectl (1.25.0-00) ...
Setting up ebtables (2.0.11-3build1) ...
Setting up socat (1.7.3.3-2) ...
Setting up cri-tools (1.24.2-00) ...
Setting up kubernetes-cni (0.8.7-00) ...
Setting up kubelet (1.25.0-00) ...
Created symlink /etc/systemd/system/multi-user.target.wants/kubelet.service → /lib/systemd/system/kubelet.service.
Setting up kubeadm (1.25.0-00) ...
Processing triggers for man-db (2.9.1-1) ...
ubuntu@node2:~$ kubeadm join 10.9.233.141:6443 --token ec8eiq.90ttjkzdrevj2n9n --discovery-token-ca-cert-hash sha256:074d9c4898aa4ca843d6993e1aa432682ed6b94678647ec8d5a7ad04162db449
[preflight] Running pre-flight checks
error execution phase preflight: [preflight] Some fatal errors occurred:
        [ERROR IsPrivilegedUser]: user is not running as root
[preflight] If you know what you are doing, you can make a check non-fatal with `--ignore-preflight-errors=...`
To see the stack trace of this error execute with --v=5 or higher
ubuntu@node2:~$ sudo kubeadm join 10.9.233.141:6443 --token ec8eiq.90ttjkzdrevj2n9n --discovery-token-ca-cert-hash sha256:074d9c4898aa4ca843d6993e1aa432682ed6b94678647ec8d
5a7ad04162db449
[preflight] Running pre-flight checks
[preflight] Reading configuration from the cluster...
[preflight] FYI: You can look at this config file with 'kubectl -n kube-system get cm kubeadm-config -o yaml'
[kubelet-start] Writing kubelet configuration to file "/var/lib/kubelet/config.yaml"
[kubelet-start] Writing kubelet environment file with flags to file "/var/lib/kubelet/kubeadm-flags.env"
[kubelet-start] Starting the kubelet
[kubelet-start] Waiting for the kubelet to perform the TLS Bootstrap...

This node has joined the cluster:
* Certificate signing request was sent to apiserver and a response was received.
* The Kubelet was informed of the new secure connection details.

Run 'kubectl get nodes' on the control-plane to see this node join the cluster.

ubuntu@node2:~$ exit
logout
mfm@wv04:~$ multipass shell node3
Welcome to Ubuntu 20.04.4 LTS (GNU/Linux 5.4.0-125-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

  System information as of Mon Aug 29 21:26:32 UTC 2022

  System load:  0.0               Processes:             134
  Usage of /:   2.8% of 48.27GB   Users logged in:       0
  Memory usage: 3%                IPv4 address for ens3: 10.9.233.14
  Swap usage:   0%


0 updates can be applied immediately.

New release '22.04.1 LTS' available.
Run 'do-release-upgrade' to upgrade to it.


To run a command as administrator (user "root"), use "sudo <command>".
See "man sudo_root" for details.

ubuntu@node3:~$ vi doit22
ubuntu@node3:~$ . doit22
Get:1 http://security.ubuntu.com/ubuntu focal-security InRelease [114 kB]
Hit:2 http://archive.ubuntu.com/ubuntu focal InRelease
Get:3 http://archive.ubuntu.com/ubuntu focal-updates InRelease [114 kB]
Get:4 http://security.ubuntu.com/ubuntu focal-security/main amd64 Packages [1683 kB]
Get:5 http://archive.ubuntu.com/ubuntu focal-backports InRelease [108 kB]
Get:6 http://security.ubuntu.com/ubuntu focal-security/main Translation-en [284 kB]
Get:7 http://security.ubuntu.com/ubuntu focal-security/main amd64 c-n-f Metadata [11.0 kB]
Get:8 http://security.ubuntu.com/ubuntu focal-security/restricted amd64 Packages [1147 kB]
Get:9 http://security.ubuntu.com/ubuntu focal-security/restricted Translation-en [163 kB]
Get:10 http://security.ubuntu.com/ubuntu focal-security/universe amd64 Packages [715 kB]
Get:11 http://security.ubuntu.com/ubuntu focal-security/universe Translation-en [130 kB]
Get:12 http://security.ubuntu.com/ubuntu focal-security/universe amd64 c-n-f Metadata [14.8 kB]
Get:13 http://security.ubuntu.com/ubuntu focal-security/multiverse amd64 Packages [22.2 kB]
Get:14 http://security.ubuntu.com/ubuntu focal-security/multiverse Translation-en [5376 B]
Get:15 http://security.ubuntu.com/ubuntu focal-security/multiverse amd64 c-n-f Metadata [508 B]
Get:16 http://archive.ubuntu.com/ubuntu focal/universe amd64 Packages [8628 kB]
Get:17 http://archive.ubuntu.com/ubuntu focal/universe Translation-en [5124 kB]
Get:18 http://archive.ubuntu.com/ubuntu focal/universe amd64 c-n-f Metadata [265 kB]
Get:19 http://archive.ubuntu.com/ubuntu focal/multiverse amd64 Packages [144 kB]
Get:20 http://archive.ubuntu.com/ubuntu focal/multiverse Translation-en [104 kB]
Get:21 http://archive.ubuntu.com/ubuntu focal/multiverse amd64 c-n-f Metadata [9136 B]
Get:22 http://archive.ubuntu.com/ubuntu focal-updates/main amd64 Packages [2051 kB]
Get:23 http://archive.ubuntu.com/ubuntu focal-updates/main Translation-en [366 kB]
Get:24 http://archive.ubuntu.com/ubuntu focal-updates/main amd64 c-n-f Metadata [15.8 kB]
Get:25 http://archive.ubuntu.com/ubuntu focal-updates/restricted amd64 Packages [1234 kB]
Get:26 http://archive.ubuntu.com/ubuntu focal-updates/restricted Translation-en [175 kB]
Get:27 http://archive.ubuntu.com/ubuntu focal-updates/universe amd64 Packages [941 kB]
Get:28 http://archive.ubuntu.com/ubuntu focal-updates/universe Translation-en [213 kB]
Get:29 http://archive.ubuntu.com/ubuntu focal-updates/universe amd64 c-n-f Metadata [21.2 kB]
Get:30 http://archive.ubuntu.com/ubuntu focal-updates/multiverse amd64 Packages [24.4 kB]
Get:31 http://archive.ubuntu.com/ubuntu focal-updates/multiverse Translation-en [7336 B]
Get:32 http://archive.ubuntu.com/ubuntu focal-updates/multiverse amd64 c-n-f Metadata [588 B]
Get:33 http://archive.ubuntu.com/ubuntu focal-backports/main amd64 Packages [45.6 kB]
Get:34 http://archive.ubuntu.com/ubuntu focal-backports/main Translation-en [16.3 kB]
Get:35 http://archive.ubuntu.com/ubuntu focal-backports/main amd64 c-n-f Metadata [1420 B]
Get:36 http://archive.ubuntu.com/ubuntu focal-backports/restricted amd64 c-n-f Metadata [116 B]
Get:37 http://archive.ubuntu.com/ubuntu focal-backports/universe amd64 Packages [23.9 kB]
Get:38 http://archive.ubuntu.com/ubuntu focal-backports/universe Translation-en [16.0 kB]
Get:39 http://archive.ubuntu.com/ubuntu focal-backports/universe amd64 c-n-f Metadata [860 B]
Get:40 http://archive.ubuntu.com/ubuntu focal-backports/multiverse amd64 c-n-f Metadata [116 B]
Fetched 23.9 MB in 4s (5778 kB/s)
Reading package lists... Done
Building dependency tree
Reading state information... Done
7 packages can be upgraded. Run 'apt list --upgradable' to see them.
Reading package lists... Done
Building dependency tree
Reading state information... Done
lsb-release is already the newest version (11.1.0ubuntu2).
lsb-release set to manually installed.
ca-certificates is already the newest version (20211016~20.04.1).
ca-certificates set to manually installed.
curl is already the newest version (7.68.0-1ubuntu2.12).
curl set to manually installed.
gnupg is already the newest version (2.2.19-3ubuntu2.2).
gnupg set to manually installed.
0 upgraded, 0 newly installed, 0 to remove and 7 not upgraded.
deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu focal stable
Get:1 https://download.docker.com/linux/ubuntu focal InRelease [57.7 kB]
Hit:2 http://archive.ubuntu.com/ubuntu focal InRelease
Get:3 https://download.docker.com/linux/ubuntu focal/stable amd64 Packages [17.9 kB]
Hit:4 http://archive.ubuntu.com/ubuntu focal-updates InRelease
Hit:5 http://archive.ubuntu.com/ubuntu focal-backports InRelease
Get:6 http://security.ubuntu.com/ubuntu focal-security InRelease [114 kB]
Fetched 189 kB in 1s (272 kB/s)
Reading package lists... Done
Building dependency tree
Reading state information... Done
7 packages can be upgraded. Run 'apt list --upgradable' to see them.
Reading package lists... Done
Building dependency tree
Reading state information... Done
The following NEW packages will be installed:
  containerd.io
0 upgraded, 1 newly installed, 0 to remove and 7 not upgraded.
Need to get 28.1 MB of archives.
After this operation, 127 MB of additional disk space will be used.
Get:1 https://download.docker.com/linux/ubuntu focal/stable amd64 containerd.io amd64 1.6.8-1 [28.1 MB]
Fetched 28.1 MB in 0s (92.0 MB/s)
Selecting previously unselected package containerd.io.
(Reading database ... 63818 files and directories currently installed.)
Preparing to unpack .../containerd.io_1.6.8-1_amd64.deb ...
Unpacking containerd.io (1.6.8-1) ...
Setting up containerd.io (1.6.8-1) ...
Created symlink /etc/systemd/system/multi-user.target.wants/containerd.service → /lib/systemd/system/containerd.service.
Processing triggers for man-db (2.9.1-1) ...
--2022-08-29 21:27:12--  https://github.com/opencontainers/runc/releases/download/v1.1.1/runc.amd64
Resolving github.com (github.com)... 140.82.112.3
Connecting to github.com (github.com)|140.82.112.3|:443... connected.
HTTP request sent, awaiting response... 302 Found
Location: https://objects.githubusercontent.com/github-production-release-asset-2e65be/36960321/decb03b0-76a4-4ee7-bd06-4e3a548d9f87?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIWNJYAX4CSVEH53A%2F20220829%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20220829T212712Z&X-Amz-Expires=300&X-Amz-Signature=4b129e7fdd95784839aae04e03d3fab6a8ca41d8f5739331a2c7f379d0428168&X-Amz-SignedHeaders=host&actor_id=0&key_id=0&repo_id=36960321&response-content-disposition=attachment%3B%20filename%3Drunc.amd64&response-content-type=application%2Foctet-stream [following]
--2022-08-29 21:27:12--  https://objects.githubusercontent.com/github-production-release-asset-2e65be/36960321/decb03b0-76a4-4ee7-bd06-4e3a548d9f87?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIWNJYAX4CSVEH53A%2F20220829%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20220829T212712Z&X-Amz-Expires=300&X-Amz-Signature=4b129e7fdd95784839aae04e03d3fab6a8ca41d8f5739331a2c7f379d0428168&X-Amz-SignedHeaders=host&actor_id=0&key_id=0&repo_id=36960321&response-content-disposition=attachment%3B%20filename%3Drunc.amd64&response-content-type=application%2Foctet-stream
Resolving objects.githubusercontent.com (objects.githubusercontent.com)... 185.199.111.133, 185.199.108.133, 185.199.109.133, ...
Connecting to objects.githubusercontent.com (objects.githubusercontent.com)|185.199.111.133|:443... connected.
HTTP request sent, awaiting response... 200 OK
Length: 9415040 (9.0M) [application/octet-stream]
Saving to: ‘runc.amd64’

runc.amd64                                 100%[=======================================================================================>]   8.98M  --.-KB/s    in 0.03s

2022-08-29 21:27:12 (282 MB/s) - ‘runc.amd64’ saved [9415040/9415040]

disabled_plugins = []
imports = []
oom_score = 0
plugin_dir = ""
required_plugins = []
root = "/var/lib/containerd"
state = "/run/containerd"
temp = ""
version = 2

[cgroup]
  path = ""

[debug]
  address = ""
  format = ""
  gid = 0
  level = ""
  uid = 0

[grpc]
  address = "/run/containerd/containerd.sock"
  gid = 0
  max_recv_message_size = 16777216
  max_send_message_size = 16777216
  tcp_address = ""
  tcp_tls_ca = ""
  tcp_tls_cert = ""
  tcp_tls_key = ""
  uid = 0

[metrics]
  address = ""
  grpc_histogram = false

[plugins]

  [plugins."io.containerd.gc.v1.scheduler"]
    deletion_threshold = 0
    mutation_threshold = 100
    pause_threshold = 0.02
    schedule_delay = "0s"
    startup_delay = "100ms"

  [plugins."io.containerd.grpc.v1.cri"]
    device_ownership_from_security_context = false
    disable_apparmor = false
    disable_cgroup = false
    disable_hugetlb_controller = true
    disable_proc_mount = false
    disable_tcp_service = true
    enable_selinux = false
    enable_tls_streaming = false
    enable_unprivileged_icmp = false
    enable_unprivileged_ports = false
    ignore_image_defined_volumes = false
    max_concurrent_downloads = 3
    max_container_log_line_size = 16384
    netns_mounts_under_state_dir = false
    restrict_oom_score_adj = false
    sandbox_image = "k8s.gcr.io/pause:3.6"
    selinux_category_range = 1024
    stats_collect_period = 10
    stream_idle_timeout = "4h0m0s"
    stream_server_address = "127.0.0.1"
    stream_server_port = "0"
    systemd_cgroup = false
    tolerate_missing_hugetlb_controller = true
    unset_seccomp_profile = ""

    [plugins."io.containerd.grpc.v1.cri".cni]
      bin_dir = "/opt/cni/bin"
      conf_dir = "/etc/cni/net.d"
      conf_template = ""
      ip_pref = ""
      max_conf_num = 1

    [plugins."io.containerd.grpc.v1.cri".containerd]
      default_runtime_name = "runc"
      disable_snapshot_annotations = true
      discard_unpacked_layers = false
      ignore_rdt_not_enabled_errors = false
      no_pivot = false
      snapshotter = "overlayfs"

      [plugins."io.containerd.grpc.v1.cri".containerd.default_runtime]
        base_runtime_spec = ""
        cni_conf_dir = ""
        cni_max_conf_num = 0
        container_annotations = []
        pod_annotations = []
        privileged_without_host_devices = false
        runtime_engine = ""
        runtime_path = ""
        runtime_root = ""
        runtime_type = ""

        [plugins."io.containerd.grpc.v1.cri".containerd.default_runtime.options]

      [plugins."io.containerd.grpc.v1.cri".containerd.runtimes]

        [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.runc]
          base_runtime_spec = ""
          cni_conf_dir = ""
          cni_max_conf_num = 0
          container_annotations = []
          pod_annotations = []
          privileged_without_host_devices = false
          runtime_engine = ""
          runtime_path = ""
          runtime_root = ""
          runtime_type = "io.containerd.runc.v2"

          [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.runc.options]
            BinaryName = ""
            CriuImagePath = ""
            CriuPath = ""
            CriuWorkPath = ""
            IoGid = 0
            IoUid = 0
            NoNewKeyring = false
            NoPivotRoot = false
            Root = ""
            ShimCgroup = ""
            SystemdCgroup = false

      [plugins."io.containerd.grpc.v1.cri".containerd.untrusted_workload_runtime]
        base_runtime_spec = ""
        cni_conf_dir = ""
        cni_max_conf_num = 0
        container_annotations = []
        pod_annotations = []
        privileged_without_host_devices = false
        runtime_engine = ""
        runtime_path = ""
        runtime_root = ""
        runtime_type = ""

        [plugins."io.containerd.grpc.v1.cri".containerd.untrusted_workload_runtime.options]

    [plugins."io.containerd.grpc.v1.cri".image_decryption]
      key_model = "node"

    [plugins."io.containerd.grpc.v1.cri".registry]
      config_path = ""

      [plugins."io.containerd.grpc.v1.cri".registry.auths]

      [plugins."io.containerd.grpc.v1.cri".registry.configs]

      [plugins."io.containerd.grpc.v1.cri".registry.headers]

      [plugins."io.containerd.grpc.v1.cri".registry.mirrors]

    [plugins."io.containerd.grpc.v1.cri".x509_key_pair_streaming]
      tls_cert_file = ""
      tls_key_file = ""

  [plugins."io.containerd.internal.v1.opt"]
    path = "/opt/containerd"

  [plugins."io.containerd.internal.v1.restart"]
    interval = "10s"

  [plugins."io.containerd.internal.v1.tracing"]
    sampling_ratio = 1.0
    service_name = "containerd"

  [plugins."io.containerd.metadata.v1.bolt"]
    content_sharing_policy = "shared"

  [plugins."io.containerd.monitor.v1.cgroups"]
    no_prometheus = false

  [plugins."io.containerd.runtime.v1.linux"]
    no_shim = false
    runtime = "runc"
    runtime_root = ""
    shim = "containerd-shim"
    shim_debug = false

  [plugins."io.containerd.runtime.v2.task"]
    platforms = ["linux/amd64"]
    sched_core = false

  [plugins."io.containerd.service.v1.diff-service"]
    default = ["walking"]

  [plugins."io.containerd.service.v1.tasks-service"]
    rdt_config_file = ""

  [plugins."io.containerd.snapshotter.v1.aufs"]
    root_path = ""

  [plugins."io.containerd.snapshotter.v1.btrfs"]
    root_path = ""

  [plugins."io.containerd.snapshotter.v1.devmapper"]
    async_remove = false
    base_image_size = ""
    discard_blocks = false
    fs_options = ""
    fs_type = ""
    pool_name = ""
    root_path = ""

  [plugins."io.containerd.snapshotter.v1.native"]
    root_path = ""

  [plugins."io.containerd.snapshotter.v1.overlayfs"]
    root_path = ""
    upperdir_label = false

  [plugins."io.containerd.snapshotter.v1.zfs"]
    root_path = ""

  [plugins."io.containerd.tracing.processor.v1.otlp"]
    endpoint = ""
    insecure = false
    protocol = ""

[proxy_plugins]

[stream_processors]

  [stream_processors."io.containerd.ocicrypt.decoder.v1.tar"]
    accepts = ["application/vnd.oci.image.layer.v1.tar+encrypted"]
    args = ["--decryption-keys-path", "/etc/containerd/ocicrypt/keys"]
    env = ["OCICRYPT_KEYPROVIDER_CONFIG=/etc/containerd/ocicrypt/ocicrypt_keyprovider.conf"]
    path = "ctd-decoder"
    returns = "application/vnd.oci.image.layer.v1.tar"

  [stream_processors."io.containerd.ocicrypt.decoder.v1.tar.gzip"]
    accepts = ["application/vnd.oci.image.layer.v1.tar+gzip+encrypted"]
    args = ["--decryption-keys-path", "/etc/containerd/ocicrypt/keys"]
    env = ["OCICRYPT_KEYPROVIDER_CONFIG=/etc/containerd/ocicrypt/ocicrypt_keyprovider.conf"]
    path = "ctd-decoder"
    returns = "application/vnd.oci.image.layer.v1.tar+gzip"

[timeouts]
  "io.containerd.timeout.bolt.open" = "0s"
  "io.containerd.timeout.shim.cleanup" = "5s"
  "io.containerd.timeout.shim.load" = "5s"
  "io.containerd.timeout.shim.shutdown" = "3s"
  "io.containerd.timeout.task.state" = "2s"

[ttrpc]
  address = ""
  gid = 0
  uid = 0
Rules updated
Rules updated (v6)
Rules updated
Rules updated (v6)
Rules updated
Rules updated (v6)
Rules updated
Rules updated (v6)
Rules updated
Rules updated (v6)
Rules updated
Rules updated (v6)
Firewall not enabled (skipping reload)
Skipping adding existing rule
Skipping adding existing rule (v6)
Rules updated
Rules updated (v6)
Firewall not enabled (skipping reload)
br_netfilter
net.bridge.bridge-nf-call-ip6tables = 1
net.bridge.bridge-nf-call-iptables = 1
net.ipv4.ip_forward = 1
* Applying /etc/sysctl.d/10-console-messages.conf ...
kernel.printk = 4 4 1 7
* Applying /etc/sysctl.d/10-ipv6-privacy.conf ...
net.ipv6.conf.all.use_tempaddr = 2
net.ipv6.conf.default.use_tempaddr = 2
* Applying /etc/sysctl.d/10-kernel-hardening.conf ...
kernel.kptr_restrict = 1
* Applying /etc/sysctl.d/10-link-restrictions.conf ...
fs.protected_hardlinks = 1
fs.protected_symlinks = 1
* Applying /etc/sysctl.d/10-magic-sysrq.conf ...
kernel.sysrq = 176
* Applying /etc/sysctl.d/10-network-security.conf ...
net.ipv4.conf.default.rp_filter = 2
net.ipv4.conf.all.rp_filter = 2
* Applying /etc/sysctl.d/10-ptrace.conf ...
kernel.yama.ptrace_scope = 1
* Applying /etc/sysctl.d/10-zeropage.conf ...
vm.mmap_min_addr = 65536
* Applying /usr/lib/sysctl.d/50-default.conf ...
net.ipv4.conf.default.promote_secondaries = 1
sysctl: setting key "net.ipv4.conf.all.promote_secondaries": Invalid argument
net.ipv4.ping_group_range = 0 2147483647
net.core.default_qdisc = fq_codel
fs.protected_regular = 1
fs.protected_fifos = 1
* Applying /usr/lib/sysctl.d/50-pid-max.conf ...
kernel.pid_max = 4194304
* Applying /etc/sysctl.d/99-cloudimg-ipv6.conf ...
net.ipv6.conf.all.use_tempaddr = 0
net.ipv6.conf.default.use_tempaddr = 0
* Applying /etc/sysctl.d/99-sysctl.conf ...
* Applying /etc/sysctl.d/k8s.conf ...
net.ipv4.ip_forward = 1
* Applying /usr/lib/sysctl.d/protect-links.conf ...
fs.protected_fifos = 1
fs.protected_hardlinks = 1
fs.protected_regular = 2
fs.protected_symlinks = 1
* Applying /etc/sysctl.conf ...
LABEL=cloudimg-rootfs   /        ext4   defaults        0 1
LABEL=UEFI      /boot/efi       vfat    umask=0077      0 1
net.bridge.bridge-nf-call-iptables = 1
Hit:1 https://download.docker.com/linux/ubuntu focal InRelease
Hit:2 http://archive.ubuntu.com/ubuntu focal InRelease
Hit:3 http://archive.ubuntu.com/ubuntu focal-updates InRelease
Hit:4 http://archive.ubuntu.com/ubuntu focal-backports InRelease
Get:5 http://security.ubuntu.com/ubuntu focal-security InRelease [114 kB]
Fetched 114 kB in 1s (163 kB/s)
Reading package lists... Done
Building dependency tree
Reading state information... Done
7 packages can be upgraded. Run 'apt list --upgradable' to see them.
Reading package lists... Done
Building dependency tree
Reading state information... Done
ca-certificates is already the newest version (20211016~20.04.1).
curl is already the newest version (7.68.0-1ubuntu2.12).
The following NEW packages will be installed:
  apt-transport-https
0 upgraded, 1 newly installed, 0 to remove and 7 not upgraded.
Need to get 1704 B of archives.
After this operation, 162 kB of additional disk space will be used.
Get:1 http://archive.ubuntu.com/ubuntu focal-updates/universe amd64 apt-transport-https all 2.0.9 [1704 B]
Fetched 1704 B in 0s (17.9 kB/s)
Selecting previously unselected package apt-transport-https.
(Reading database ... 63834 files and directories currently installed.)
Preparing to unpack .../apt-transport-https_2.0.9_all.deb ...
Unpacking apt-transport-https (2.0.9) ...
Setting up apt-transport-https (2.0.9) ...
deb [signed-by=/usr/share/keyrings/kubernetes-archive-keyring.gpg] https://apt.kubernetes.io/ kubernetes-xenial main
Hit:1 https://download.docker.com/linux/ubuntu focal InRelease
Hit:3 http://archive.ubuntu.com/ubuntu focal InRelease
Hit:4 http://archive.ubuntu.com/ubuntu focal-updates InRelease
Hit:5 http://archive.ubuntu.com/ubuntu focal-backports InRelease
Get:2 https://packages.cloud.google.com/apt kubernetes-xenial InRelease [9383 B]
Get:6 http://security.ubuntu.com/ubuntu focal-security InRelease [114 kB]
Get:7 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 Packages [58.4 kB]
Fetched 182 kB in 1s (259 kB/s)
Reading package lists... Done
Building dependency tree
Reading state information... Done
7 packages can be upgraded. Run 'apt list --upgradable' to see them.
Reading package lists... Done
Building dependency tree
Reading state information... Done
The following additional packages will be installed:
  conntrack cri-tools ebtables kubernetes-cni socat
Suggested packages:
  nftables
The following NEW packages will be installed:
  conntrack cri-tools ebtables kubeadm kubectl kubelet kubernetes-cni socat
0 upgraded, 8 newly installed, 0 to remove and 7 not upgraded.
Need to get 75.9 MB of archives.
After this operation, 310 MB of additional disk space will be used.
Get:1 http://archive.ubuntu.com/ubuntu focal/main amd64 conntrack amd64 1:1.4.5-2 [30.3 kB]
Get:2 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 cri-tools amd64 1.24.2-00 [12.3 MB]
Get:7 http://archive.ubuntu.com/ubuntu focal/main amd64 ebtables amd64 2.0.11-3build1 [80.3 kB]
Get:8 http://archive.ubuntu.com/ubuntu focal/main amd64 socat amd64 1.7.3.3-2 [323 kB]
Get:3 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 kubernetes-cni amd64 0.8.7-00 [25.0 MB]
Get:4 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 kubelet amd64 1.25.0-00 [19.5 MB]
Get:5 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 kubectl amd64 1.25.0-00 [9500 kB]
Get:6 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 kubeadm amd64 1.25.0-00 [9213 kB]
Fetched 75.9 MB in 1s (56.9 MB/s)
Selecting previously unselected package conntrack.
(Reading database ... 63838 files and directories currently installed.)
Preparing to unpack .../0-conntrack_1%3a1.4.5-2_amd64.deb ...
Unpacking conntrack (1:1.4.5-2) ...
Selecting previously unselected package cri-tools.
Preparing to unpack .../1-cri-tools_1.24.2-00_amd64.deb ...
Unpacking cri-tools (1.24.2-00) ...
Selecting previously unselected package ebtables.
Preparing to unpack .../2-ebtables_2.0.11-3build1_amd64.deb ...
Unpacking ebtables (2.0.11-3build1) ...
Selecting previously unselected package kubernetes-cni.
Preparing to unpack .../3-kubernetes-cni_0.8.7-00_amd64.deb ...
Unpacking kubernetes-cni (0.8.7-00) ...
Selecting previously unselected package socat.
Preparing to unpack .../4-socat_1.7.3.3-2_amd64.deb ...
Unpacking socat (1.7.3.3-2) ...
Selecting previously unselected package kubelet.
Preparing to unpack .../5-kubelet_1.25.0-00_amd64.deb ...
Unpacking kubelet (1.25.0-00) ...
Selecting previously unselected package kubectl.
Preparing to unpack .../6-kubectl_1.25.0-00_amd64.deb ...
Unpacking kubectl (1.25.0-00) ...
Selecting previously unselected package kubeadm.
Preparing to unpack .../7-kubeadm_1.25.0-00_amd64.deb ...
Unpacking kubeadm (1.25.0-00) ...
Setting up conntrack (1:1.4.5-2) ...
Setting up kubectl (1.25.0-00) ...
Setting up ebtables (2.0.11-3build1) ...
Setting up socat (1.7.3.3-2) ...
Setting up cri-tools (1.24.2-00) ...
Setting up kubernetes-cni (0.8.7-00) ...
Setting up kubelet (1.25.0-00) ...
Created symlink /etc/systemd/system/multi-user.target.wants/kubelet.service → /lib/systemd/system/kubelet.service.
Setting up kubeadm (1.25.0-00) ...
Processing triggers for man-db (2.9.1-1) ...
ubuntu@node3:~$ sudo kubeadm join 10.9.233.141:6443 --token ec8eiq.90ttjkzdrevj2n9n --discovery-token-ca-cert-hash sha256:074d9c4898aa4ca843d6993e1aa432682ed6b94678647ec8d5a7ad04162db449
[preflight] Running pre-flight checks
[preflight] Reading configuration from the cluster...
[preflight] FYI: You can look at this config file with 'kubectl -n kube-system get cm kubeadm-config -o yaml'
[kubelet-start] Writing kubelet configuration to file "/var/lib/kubelet/config.yaml"
[kubelet-start] Writing kubelet environment file with flags to file "/var/lib/kubelet/kubeadm-flags.env"
[kubelet-start] Starting the kubelet
[kubelet-start] Waiting for the kubelet to perform the TLS Bootstrap...

This node has joined the cluster:
* Certificate signing request was sent to apiserver and a response was received.
* The Kubelet was informed of the new secure connection details.

Run 'kubectl get nodes' on the control-plane to see this node join the cluster.

ubuntu@node3:~$ exit
logout
mfm@wv04:~$ mkdir ~/.kube
mfm@wv04:~$ multipass copy-files mode1:.kube/config ~/.kube/
transfer failed: instance "mode1" does not exist
mfm@wv04:~$ multipass copy-files node1:.kube/config ~/.kube/
transfer failed: [sftp pull] error opening file for writing: Permission denied
mfm@wv04:~$ sudo multipass copy-files node1:.kube/config ~/.kube/
[sudo] password for mfm:
Destination path "/home/mfm//.kube/" is not writable
mfm@wv04:~$ ll ~/.kube
total 8
drwxrwxr-x 2 mfm mfm 4096 Aug 29 21:29 ./
drwxr-x--- 6 mfm mfm 4096 Aug 29 21:29 ../
mfm@wv04:~$ multipass copy-files node1:.kube/config ~/.kube/
transfer failed: [sftp pull] error opening file for writing: Permission denied
mfm@wv04:~$ ll
total 36
drwxr-x--- 6 mfm  mfm  4096 Aug 29 21:29 ./
drwxr-xr-x 3 root root 4096 Aug 29 21:06 ../
-rw-r--r-- 1 mfm  mfm   220 Jan  6  2022 .bash_logout
-rw-r--r-- 1 mfm  mfm  3771 Jan  6  2022 .bashrc
drwx------ 2 mfm  mfm  4096 Aug 29 21:07 .cache/
drwxrwxr-x 2 mfm  mfm  4096 Aug 29 21:29 .kube/
-rw-r--r-- 1 mfm  mfm   807 Jan  6  2022 .profile
drwx------ 2 mfm  mfm  4096 Aug 29 21:07 .ssh/
-rw-r--r-- 1 mfm  mfm     0 Aug 29 21:08 .sudo_as_admin_successful
drwx------ 3 mfm  mfm  4096 Aug 29 21:08 snap/
mfm@wv04:~$ cd .kube
mfm@wv04:/home/mfm/.kube$ ll
total 8
drwxrwxr-x 2 mfm mfm 4096 Aug 29 21:29 ./
drwxr-x--- 6 mfm mfm 4096 Aug 29 21:29 ../
mfm@wv04:/home/mfm/.kube$ ls
mfm@wv04:/home/mfm/.kube$ ll
total 8
drwxrwxr-x 2 mfm mfm 4096 Aug 29 21:29 ./
drwxr-x--- 6 mfm mfm 4096 Aug 29 21:29 ../
mfm@wv04:/home/mfm/.kube$ multipass copy-files node1:.kube/config .
transfer failed: [sftp pull] error opening file for writing: Permission denied
mfm@wv04:/home/mfm/.kube$ sudo multipass copy-files node1:.kube/config .
Destination path "." is not writable
mfm@wv04:/home/mfm/.kube$ sudo multipass copy-files node1:.kube/config config
]]Destination path "config" is not writable
mfm@wv04:/home/mfm/.kube$ touch config
mfm@wv04:/home/mfm/.kube$ ll
total 8
drwxrwxr-x 2 mfm mfm 4096 Aug 29 21:35 ./
drwxr-x--- 6 mfm mfm 4096 Aug 29 21:29 ../
-rw-rw-r-- 1 mfm mfm    0 Aug 29 21:35 config
mfm@wv04:/home/mfm/.kube$ chmod 777 config
mfm@wv04:/home/mfm/.kube$ sudo multipass copy-files node1:.kube/config config
Destination path "config" is not writable
mfm@wv04:/home/mfm/.kube$ ll
total 8
drwxrwxr-x 2 mfm mfm 4096 Aug 29 21:35 ./
drwxr-x--- 6 mfm mfm 4096 Aug 29 21:29 ../
-rwxrwxrwx 1 mfm mfm    0 Aug 29 21:35 config*
mfm@wv04:/home/mfm/.kube$ cd ..
mfm@wv04:/home/mfm$ chmod 777 .kube
mfm@wv04:/home/mfm$ ll
total 36
drwxr-x--- 6 mfm  mfm  4096 Aug 29 21:29 ./
drwxr-xr-x 3 root root 4096 Aug 29 21:06 ../
-rw-r--r-- 1 mfm  mfm   220 Jan  6  2022 .bash_logout
-rw-r--r-- 1 mfm  mfm  3771 Jan  6  2022 .bashrc
drwx------ 2 mfm  mfm  4096 Aug 29 21:07 .cache/
drwxrwxrwx 2 mfm  mfm  4096 Aug 29 21:35 .kube/
-rw-r--r-- 1 mfm  mfm   807 Jan  6  2022 .profile
drwx------ 2 mfm  mfm  4096 Aug 29 21:07 .ssh/
-rw-r--r-- 1 mfm  mfm     0 Aug 29 21:08 .sudo_as_admin_successful
drwx------ 3 mfm  mfm  4096 Aug 29 21:08 snap/
mfm@wv04:/home/mfm$ cd kube
-bash: cd: kube: No such file or directory
mfm@wv04:/home/mfm$ cd .kube/
mfm@wv04:/home/mfm/.kube$ ll
total 8
drwxrwxrwx 2 mfm mfm 4096 Aug 29 21:35 ./
drwxr-x--- 6 mfm mfm 4096 Aug 29 21:29 ../
-rwxrwxrwx 1 mfm mfm    0 Aug 29 21:35 config*
mfm@wv04:/home/mfm/.kube$ multipass copy-files node1:.kube/config config
transfer failed: [sftp pull] error opening file for writing: Permission denied
mfm@wv04:/home/mfm/.kube$
mfm@wv04:/home/mfm/.kube$ cd
mfm@wv04:/home/mfm$ sudo bash
root@wv04:/home/mfm# multipass copy-files node1:.kube/config config
Destination path "config" is not writable
root@wv04:/home/mfm# touch config
root@wv04:/home/mfm# ll
total 36
drwxr-x--- 6 mfm  mfm  4096 Aug 29 21:42 ./
drwxr-xr-x 3 root root 4096 Aug 29 21:06 ../
-rw-r--r-- 1 mfm  mfm   220 Jan  6  2022 .bash_logout
-rw-r--r-- 1 mfm  mfm  3771 Jan  6  2022 .bashrc
drwx------ 2 mfm  mfm  4096 Aug 29 21:07 .cache/
drwxrwxrwx 2 mfm  mfm  4096 Aug 29 21:35 .kube/
-rw-r--r-- 1 mfm  mfm   807 Jan  6  2022 .profile
drwx------ 2 mfm  mfm  4096 Aug 29 21:07 .ssh/
-rw-r--r-- 1 mfm  mfm     0 Aug 29 21:08 .sudo_as_admin_successful
-rw-r--r-- 1 root root    0 Aug 29 21:42 config
drwx------ 3 mfm  mfm  4096 Aug 29 21:08 snap/
root@wv04:/home/mfm# chmod 666 config
root@wv04:/home/mfm# multipass copy-files node1:.kube/config config
Destination path "config" is not writable
root@wv04:/home/mfm# which multipass
/snap/bin/multipass
root@wv04:/home/mfm# file /snap/bin/multipass
/snap/bin/multipass: symbolic link to /usr/bin/snap
root@wv04:/home/mfm# file /usr/bin/snap
/usr/bin/snap: ELF 64-bit LSB pie executable, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/ld-linux-x86-64.so.2, Go BuildID=Cvh2Ldavl-lehYJnE9r0/EgnRTDzNVeKy7TiD6zz-/eoYtBJn39PluAjeq94pU/f-22_aXrr3aFsLbWg4yh, stripped
root@wv04:/home/mfm# exit
exit
mfm@wv04:/home/mfm$ multipass shell node1
Welcome to Ubuntu 20.04.4 LTS (GNU/Linux 5.4.0-125-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

  System information as of Mon Aug 29 21:44:36 UTC 2022

  System load:  0.23              Processes:             231
  Usage of /:   8.8% of 48.27GB   Users logged in:       0
  Memory usage: 16%               IPv4 address for ens3: 10.9.233.141
  Swap usage:   0%


6 updates can be applied immediately.
To see these additional updates run: apt list --upgradable

New release '22.04.1 LTS' available.
Run 'do-release-upgrade' to upgrade to it.


Last login: Mon Aug 29 21:12:34 2022 from 10.9.233.1
ubuntu@node1:~$ ll
total 9244
drwxr-xr-x 5 ubuntu ubuntu    4096 Aug 29 21:24 ./
drwxr-xr-x 3 root   root      4096 Aug 29 21:09 ../
-rw------- 1 ubuntu ubuntu     426 Aug 29 21:24 .bash_history
-rw-r--r-- 1 ubuntu ubuntu     220 Feb 25  2020 .bash_logout
-rw-r--r-- 1 ubuntu ubuntu    3771 Feb 25  2020 .bashrc
drwx------ 2 ubuntu ubuntu    4096 Aug 29 21:09 .cache/
drwxrwxr-x 3 ubuntu ubuntu    4096 Aug 29 21:23 .kube/
-rw-r--r-- 1 ubuntu ubuntu     807 Feb 25  2020 .profile
drwx------ 2 ubuntu ubuntu    4096 Aug 29 21:09 .ssh/
-rw-r--r-- 1 ubuntu ubuntu       0 Aug 29 21:13 .sudo_as_admin_successful
-rw------- 1 ubuntu ubuntu     775 Aug 29 21:13 .viminfo
-rw-rw-r-- 1 ubuntu ubuntu     165 Aug 29 21:14 .wget-hsts
-rw-rw-r-- 1 ubuntu ubuntu    2039 Aug 29 21:13 doit22
-rw-rw-r-- 1 ubuntu ubuntu 9415040 Mar 29 03:22 runc.amd64
ubuntu@node1:~$ cd .kube
ubuntu@node1:~/.kube$ ll
total 20
drwxrwxr-x 3 ubuntu ubuntu 4096 Aug 29 21:23 ./
drwxr-xr-x 5 ubuntu ubuntu 4096 Aug 29 21:24 ../
drwxr-x--- 4 ubuntu ubuntu 4096 Aug 29 21:23 cache/
-rw------- 1 ubuntu ubuntu 5640 Aug 29 21:22 config
ubuntu@node1:~/.kube$ cat config
apiVersion: v1
clusters:
- cluster:
    certificate-authority-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUMvakNDQWVhZ0F3SUJBZ0lCQURBTkJna3Foa2lHOXcwQkFRc0ZBREFWTVJNd0VRWURWUVFERXdwcmRXSmwKY201bGRHVnpNQjRYRFRJeU1EZ3lPVEl4TWpBd01Wb1hEVE15TURneU5qSXhNakF3TVZvd0ZURVRNQkVHQTFVRQpBeE1LYTNWaVpYSnVaWFJsY3pDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBTGJ5CndqTzM5clFHYXhyM3ZrTHAwa0RkVW5QRkNKSVR4OG4rUjRlV3BwQW5nckNMWlo2RkwvNzQxNG84VVp6bENISHcKb2hka3o3SkdJOHAvcER3SlppUi9hcEx3MEpyRGs2WW1qbmpZRkZia0pIelhVa0swU0ZQVUxkQXJtOWozcnpGMAp2Q1VENGo4ajRhMGJwejdqV0tNZmNSMnFWK0hOS3RTNjVWM3NEZFlsOXpVekFkTmhKcFRJdmxqTkp6SVppZHcyCk1XdFZ5cFFQTmc0ejZuN1BaQWRwRTJpbDh3bW1ab3Z5UE9KR0xQL21SdlJPZGFpSTFGZEJMTU9yVTh0WGpIT24KL2FRaW9yeHZoY0dwRXZMRWo5aFdVd1k0a2ZrRXpjZG91L2JHY0hTYUhxUi9FOGxFbis0Z2FCendkN3VIRDlRNApzRkkxVTFCbEwya0NSS2VwYWZFQ0F3RUFBYU5aTUZjd0RnWURWUjBQQVFIL0JBUURBZ0trTUE4R0ExVWRFd0VCCi93UUZNQU1CQWY4d0hRWURWUjBPQkJZRUZMdW4rUUYvTHJSSElUSW5UaWtqZElqVFZVS09NQlVHQTFVZEVRUU8KTUF5Q0NtdDFZbVZ5Ym1WMFpYTXdEUVlKS29aSWh2Y05BUUVMQlFBRGdnRUJBRVdGNzVhZ280bzBTZ3VqY0pnWgpMKzBUVTNwUFBUREtucFJXbjlnU1VCQlhrQ0haYXZaTXRpbmErL25TUmRNeGJmN1FNRkJaUnk1eEx5TFgrcGhGCjhvbkhKQTV5WjYvSHZQOGhOK0huODQ3dzlhYlQydGMrM3Z1NmZCT3d1L3JUdlhoSXJBem5wVCtWYjZLbk5wMkMKa2c3Ny9qYi84djFxOHhiUS95czNyZDNPTU9ZUHF2eERVdnpKRTZpSnBrSnFQYVgyc1NlV3RsZ0RlOUsvR2psNApmdEFvRFVoeCtycDFSY0ZTREswVm13NTdmMG1wKytWVGxlOXNmbVByVDA4WHRpYk51TmRqK1BiOEhKL2daM1oyCnJveG8wQW1aOVZobmpVTHVZQ1YvSlhzT1paN0tIdWtMSTRaWWczRFNuV3FjdGlpYXRoT1U3TUxFYWh0S1JkWlUKbE5RPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    server: https://10.9.233.141:6443
  name: kubernetes
contexts:
- context:
    cluster: kubernetes
    user: kubernetes-admin
  name: kubernetes-admin@kubernetes
current-context: kubernetes-admin@kubernetes
kind: Config
preferences: {}
users:
- name: kubernetes-admin
  user:
    client-certificate-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURJVENDQWdtZ0F3SUJBZ0lJRVpuSHVvNmFJUTB3RFFZSktvWklodmNOQVFFTEJRQXdGVEVUTUJFR0ExVUUKQXhNS2EzVmlaWEp1WlhSbGN6QWVGdzB5TWpBNE1qa3lNVEl3TURGYUZ3MHlNekE0TWpreU1USXdNRE5hTURReApGekFWQmdOVkJBb1REbk41YzNSbGJUcHRZWE4wWlhKek1Sa3dGd1lEVlFRREV4QnJkV0psY201bGRHVnpMV0ZrCmJXbHVNSUlCSWpBTkJna3Foa2lHOXcwQkFRRUZBQU9DQVE4QU1JSUJDZ0tDQVFFQXEwVllEeGlickJxQmJQNjMKY3VacWp2djlUUjhHS0Q5cEVYcXQyWjFBZTNzWWdTZDE3NDhFSWE1NWVWc1A4TDN6UUdIREJpU0gwcDVrdDYySApteGpBTzJTY2M0eDQ4eXZGSTRQbzlsZkpnODRYTTZHYkVNd2F0RGx2YjVhcGNJR2VOVkc3eExjRlVVK2FsQUtHClF4R0RWTzBzUXFTZWhHSndmbmgyMlAyWkRvSDRpWEhrckdNSHZYVUpGQlRVM2JyRVN5eTNiZmRQWmtYSVNNVzMKS0ZSV25aOG5Vb2FpS2czNkFPWWxScy9GVXVIUlljZjMvcks2WHUwVHE2eHNUdVZNZTc2UXRwdVJBd0hsMFp6bgpQRjNISDFjL0tGKzZoRVphQXVVelFsdElJNGl5WUpRdFpqQTdhbmpRT2VyVWtzQlFYalFUalpzOUE3YVNMOGY1CkxpNnFKUUlEQVFBQm8xWXdWREFPQmdOVkhROEJBZjhFQkFNQ0JhQXdFd1lEVlIwbEJBd3dDZ1lJS3dZQkJRVUgKQXdJd0RBWURWUjBUQVFIL0JBSXdBREFmQmdOVkhTTUVHREFXZ0JTN3Ava0JmeTYwUnlFeUowNHBJM1NJMDFWQwpqakFOQmdrcWhraUc5dzBCQVFzRkFBT0NBUUVBSDgzK1RwWjR6aHNreWlhb0lhUnJsOTZyRm10TWtHT0FMQWJsCm0rMnYzbjVBNjduYnpVcDNkaVZ6U1l5KzhRZU1JUG0vTk1GaDlXamlCYmxpdTNWQ2pydHlZdHA2bjYzV2w4aFAKT2N6Vm5aem00R3ZTSHFubkRTSGMzUEM5UGVYNnl4c0dsYmRqR2VUQng1ZnRVd0E0b1N6VENDZERZVS9jWHlnNQpGRHhSSWNEVE9rdU44L3ZxK0dsNEZESm0wNkc3TU5rQWVEZUNVeUEzK0EyMVJYOUVaTWZLMmttNnNpbENjd2VWClhlek5CM2I1T3c3dUJmamFaMUwzU2RhYkl1YlZRaHZQTnVEeDdmYjJSdzVZeFI1R0ZGQndKNitwMFVZcmZkNEcKcWJPUS9oL2hQOXRrcjg0THZ6SnFEQnA1REtlN3ZnWDJDT0JMaTQ0TEQ1c2FtOUZmVVE9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    client-key-data: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcEFJQkFBS0NBUUVBcTBWWUR4aWJyQnFCYlA2M2N1WnFqdnY5VFI4R0tEOXBFWHF0MloxQWUzc1lnU2QxCjc0OEVJYTU1ZVZzUDhMM3pRR0hEQmlTSDBwNWt0NjJIbXhqQU8yU2NjNHg0OHl2Rkk0UG85bGZKZzg0WE02R2IKRU13YXREbHZiNWFwY0lHZU5WRzd4TGNGVVUrYWxBS0dReEdEVk8wc1FxU2VoR0p3Zm5oMjJQMlpEb0g0aVhIawpyR01IdlhVSkZCVFUzYnJFU3l5M2JmZFBaa1hJU01XM0tGUlduWjhuVW9haUtnMzZBT1lsUnMvRlV1SFJZY2YzCi9ySzZYdTBUcTZ4c1R1Vk1lNzZRdHB1UkF3SGwwWnpuUEYzSEgxYy9LRis2aEVaYUF1VXpRbHRJSTRpeVlKUXQKWmpBN2FualFPZXJVa3NCUVhqUVRqWnM5QTdhU0w4ZjVMaTZxSlFJREFRQUJBb0lCQVFDQUJITVB4WnNHaDBGYQprUUhhTm5STHIvcmpuRjdqMHBIY2FOQnRxbWE2WllZcGM2OXBnb0xhRWlubUZiVFNnNGpCQk5IYlU0N2FWVjUvCkZJd1oxK1JJQUtvWWpGVVRuaEhhdkF4enBhYVFpSWs3Skg1ZGpkSWdDQlpOV0ZZS0xEaHZMa3FsZlEvU2VTZlgKbmhOeEtqUDZWTlVTY3kyeFVrczNuUjlvamhYTGl3eVdhbFJUY05kQTlWM1F3VjRwb2l6dndjOXFnTHRtUzJHZAoxdVNuc1M5ZHNvZzVKK2FTSER2anYzMi9BWFlUYlptWjFTR0Z2R0FtMkcybTYyY0kxS1p0VzRiOEIxZk5sMmgyCkw2Skp0dW9sQkwzMmJ4bFdaV0d4eWk2RXdjenNGOWtzZ1Ixc002dmwxWnpDcGJtWnl1UmM1SXVKWk5zVG1QMXYKNlBUWW03VTVBb0dCQU1HVVhudWZGRWlaai90bFZsbWRzMGtoWHZ3Z3ZQU01pckMrZmtmNEpGOUFUUzhEdFBWdQpobGRvTW9BUFBJZTdkdkY2dTRib1NTQWg2Q1ZndVVKVllXNUgrQU1KTWkxMFdsbUF0Qy85aHgyMitHV1hNcXhnCjIxUTFCR1FDd3ZkTHhSMVlFZXVBdFRmQnpGNVNOU0JQbUJxbU9hbXdkbGlqUTFqV0p0aXNGZzlQQW9HQkFPSi8KYnlTMU1RSFYwMlZpYUR6TFhOUXhpTURFTTYvaDRSaUVLWGRKRXdlYUxybnhVS3JrbDJXT25tdUtZVGpuZ3pqcQpHTVNhekRKTU1VYWkzY1RmSUNPaWRrL1lpNVFCOXZZOUIyWjU0Qm5CbUNSMXNUWUpRTVo5azR3SmtTM0VQd05rCnlhZTVHSU95c3htSVNvOUwxdzlad21qZkNLdFpOTjlsVXJaZTZYSkxBb0dBUGYyQVlFQXFJN0doYlJVZm1PVXEKYzhIUEJCaUx5aGh6bFhQN1Jwck5NditKZUFQTTRFZTdsNlFUZi9UaEltcERCY09TNS9uYzZRQlNzaDJPVmhLMwpkN1J1VkxLT01nWXZwTGZWZkFUSlR4ZTM1ZmlNVHExWnIxYW5DRXZtR1lGWEp6Vjd6NW5RN29FT0xDcFJQdjZlCksvS05ScXp1eVNYSFBGeWY1Z1Q5cjNzQ2dZRUF6Y1MrSVZnbkhLYTR0WXV3YlVMSG85TVlqUi95WVNCUmtpZEgKVUtKbmttbUZkOUgrMmpKd1JJaEw3aUU2Y0NzTHNPSWovRUV4cjZRK3hCQmtiMTNSNGUzUGxIeURXY1JySzR1SQpOSllXZk8rL0c2aDhoVDNreGk4Qm82QnhiMld4WlpEa0R1YittVzc0ZlFLdjBmMHhkVFd6Zy9qVDlHOUh0SWhsCm0xOGdzSDhDZ1lBbjJEeXRocUI2c3RlRk5XSHVOZ3puRk9JVzBIQUlBRUtWQ0ZQZ0g0WmlVTG00UVBRNUlhN28Kd3RCMGpaeTJhb1k1NXVnK3V3REpYSjZXTnhENjNoamFvNXNkMTFDVW9iRVErOGtRS1FjQjJadmcybmN0RWVBTgpwMWhWRGJhSituaUFwR05CdGswZHRMUDRwYjM3RmZ1SUJmMklPbVBGKytCVFByVjJyUFFlYVE9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo=
ubuntu@node1:~/.kube$ exit
logout
mfm@wv04:/home/mfm$ cd .kube/
mfm@wv04:/home/mfm/.kube$ ll
total 8
drwxrwxrwx 2 mfm mfm 4096 Aug 29 21:35 ./
drwxr-x--- 6 mfm mfm 4096 Aug 29 21:42 ../
-rwxrwxrwx 1 mfm mfm    0 Aug 29 21:35 config*
mfm@wv04:/home/mfm/.kube$ chmod 600 config
mfm@wv04:/home/mfm/.kube$ vi config
mfm@wv04:/home/mfm/.kube$ mfm@wv04:/home/mfm/.kube$ kubectl get nodes
kubectl: command not found
mfm@wv04:/home/mfm/.kube$ cd
mfm@wv04:/home/mfm$ sudo apt install kubectl
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
E: Unable to locate package kubectl
mfm@wv04:/home/mfm$ multipass shell node1
Welcome to Ubuntu 20.04.4 LTS (GNU/Linux 5.4.0-125-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

  System information as of Mon Aug 29 21:47:48 UTC 2022

  System load:  0.21              Processes:             235
  Usage of /:   8.8% of 48.27GB   Users logged in:       0
  Memory usage: 16%               IPv4 address for ens3: 10.9.233.141
  Swap usage:   0%


6 updates can be applied immediately.
To see these additional updates run: apt list --upgradable

New release '22.04.1 LTS' available.
Run 'do-release-upgrade' to upgrade to it.


Last login: Mon Aug 29 21:44:37 2022 from 10.9.233.1
ubuntu@node1:~$ kubectl get node
NAME    STATUS   ROLES           AGE   VERSION
node1   Ready    control-plane   27m   v1.25.0
node2   Ready    <none>          21m   v1.25.0
node3   Ready    <none>          19m   v1.25.0
ubuntu@node1:~$ exit
logout
mfm@wv04:/home/mfm$ cat .kube/config
apiVersion: v1
clusters:
- cluster:
    certificate-authority-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUMvakNDQWVhZ0F3SUJBZ0lCQURBTkJna3Foa2lHOXcwQkFRc0ZBREFWTVJNd0VRWURWUVFERXdwcmRXSmwKY201bGRHVnpNQjRYRFRJeU1EZ3lPVEl4TWpBd01Wb1hEVE15TURneU5qSXhNakF3TVZvd0ZURVRNQkVHQTFVRQpBeE1LYTNWaVpYSnVaWFJsY3pDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBTGJ5CndqTzM5clFHYXhyM3ZrTHAwa0RkVW5QRkNKSVR4OG4rUjRlV3BwQW5nckNMWlo2RkwvNzQxNG84VVp6bENISHcKb2hka3o3SkdJOHAvcER3SlppUi9hcEx3MEpyRGs2WW1qbmpZRkZia0pIelhVa0swU0ZQVUxkQXJtOWozcnpGMAp2Q1VENGo4ajRhMGJwejdqV0tNZmNSMnFWK0hOS3RTNjVWM3NEZFlsOXpVekFkTmhKcFRJdmxqTkp6SVppZHcyCk1XdFZ5cFFQTmc0ejZuN1BaQWRwRTJpbDh3bW1ab3Z5UE9KR0xQL21SdlJPZGFpSTFGZEJMTU9yVTh0WGpIT24KL2FRaW9yeHZoY0dwRXZMRWo5aFdVd1k0a2ZrRXpjZG91L2JHY0hTYUhxUi9FOGxFbis0Z2FCendkN3VIRDlRNApzRkkxVTFCbEwya0NSS2VwYWZFQ0F3RUFBYU5aTUZjd0RnWURWUjBQQVFIL0JBUURBZ0trTUE4R0ExVWRFd0VCCi93UUZNQU1CQWY4d0hRWURWUjBPQkJZRUZMdW4rUUYvTHJSSElUSW5UaWtqZElqVFZVS09NQlVHQTFVZEVRUU8KTUF5Q0NtdDFZbVZ5Ym1WMFpYTXdEUVlKS29aSWh2Y05BUUVMQlFBRGdnRUJBRVdGNzVhZ280bzBTZ3VqY0pnWgpMKzBUVTNwUFBUREtucFJXbjlnU1VCQlhrQ0haYXZaTXRpbmErL25TUmRNeGJmN1FNRkJaUnk1eEx5TFgrcGhGCjhvbkhKQTV5WjYvSHZQOGhOK0huODQ3dzlhYlQydGMrM3Z1NmZCT3d1L3JUdlhoSXJBem5wVCtWYjZLbk5wMkMKa2c3Ny9qYi84djFxOHhiUS95czNyZDNPTU9ZUHF2eERVdnpKRTZpSnBrSnFQYVgyc1NlV3RsZ0RlOUsvR2psNApmdEFvRFVoeCtycDFSY0ZTREswVm13NTdmMG1wKytWVGxlOXNmbVByVDA4WHRpYk51TmRqK1BiOEhKL2daM1oyCnJveG8wQW1aOVZobmpVTHVZQ1YvSlhzT1paN0tIdWtMSTRaWWczRFNuV3FjdGlpYXRoT1U3TUxFYWh0S1JkWlUKbE5RPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    server: https://10.9.233.141:6443
  name: kubernetes
contexts:
- context:
    cluster: kubernetes
    user: kubernetes-admin
  name: kubernetes-admin@kubernetes
current-context: kubernetes-admin@kubernetes
kind: Config
preferences: {}
users:
- name: kubernetes-admin
  user:
    client-certificate-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURJVENDQWdtZ0F3SUJBZ0lJRVpuSHVvNmFJUTB3RFFZSktvWklodmNOQVFFTEJRQXdGVEVUTUJFR0ExVUUKQXhNS2EzVmlaWEp1WlhSbGN6QWVGdzB5TWpBNE1qa3lNVEl3TURGYUZ3MHlNekE0TWpreU1USXdNRE5hTURReApGekFWQmdOVkJBb1REbk41YzNSbGJUcHRZWE4wWlhKek1Sa3dGd1lEVlFRREV4QnJkV0psY201bGRHVnpMV0ZrCmJXbHVNSUlCSWpBTkJna3Foa2lHOXcwQkFRRUZBQU9DQVE4QU1JSUJDZ0tDQVFFQXEwVllEeGlickJxQmJQNjMKY3VacWp2djlUUjhHS0Q5cEVYcXQyWjFBZTNzWWdTZDE3NDhFSWE1NWVWc1A4TDN6UUdIREJpU0gwcDVrdDYySApteGpBTzJTY2M0eDQ4eXZGSTRQbzlsZkpnODRYTTZHYkVNd2F0RGx2YjVhcGNJR2VOVkc3eExjRlVVK2FsQUtHClF4R0RWTzBzUXFTZWhHSndmbmgyMlAyWkRvSDRpWEhrckdNSHZYVUpGQlRVM2JyRVN5eTNiZmRQWmtYSVNNVzMKS0ZSV25aOG5Vb2FpS2czNkFPWWxScy9GVXVIUlljZjMvcks2WHUwVHE2eHNUdVZNZTc2UXRwdVJBd0hsMFp6bgpQRjNISDFjL0tGKzZoRVphQXVVelFsdElJNGl5WUpRdFpqQTdhbmpRT2VyVWtzQlFYalFUalpzOUE3YVNMOGY1CkxpNnFKUUlEQVFBQm8xWXdWREFPQmdOVkhROEJBZjhFQkFNQ0JhQXdFd1lEVlIwbEJBd3dDZ1lJS3dZQkJRVUgKQXdJd0RBWURWUjBUQVFIL0JBSXdBREFmQmdOVkhTTUVHREFXZ0JTN3Ava0JmeTYwUnlFeUowNHBJM1NJMDFWQwpqakFOQmdrcWhraUc5dzBCQVFzRkFBT0NBUUVBSDgzK1RwWjR6aHNreWlhb0lhUnJsOTZyRm10TWtHT0FMQWJsCm0rMnYzbjVBNjduYnpVcDNkaVZ6U1l5KzhRZU1JUG0vTk1GaDlXamlCYmxpdTNWQ2pydHlZdHA2bjYzV2w4aFAKT2N6Vm5aem00R3ZTSHFubkRTSGMzUEM5UGVYNnl4c0dsYmRqR2VUQng1ZnRVd0E0b1N6VENDZERZVS9jWHlnNQpGRHhSSWNEVE9rdU44L3ZxK0dsNEZESm0wNkc3TU5rQWVEZUNVeUEzK0EyMVJYOUVaTWZLMmttNnNpbENjd2VWClhlek5CM2I1T3c3dUJmamFaMUwzU2RhYkl1YlZRaHZQTnVEeDdmYjJSdzVZeFI1R0ZGQndKNitwMFVZcmZkNEcKcWJPUS9oL2hQOXRrcjg0THZ6SnFEQnA1REtlN3ZnWDJDT0JMaTQ0TEQ1c2FtOUZmVVE9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    client-key-data: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcEFJQkFBS0NBUUVBcTBWWUR4aWJyQnFCYlA2M2N1WnFqdnY5VFI4R0tEOXBFWHF0MloxQWUzc1lnU2QxCjc0OEVJYTU1ZVZzUDhMM3pRR0hEQmlTSDBwNWt0NjJIbXhqQU8yU2NjNHg0OHl2Rkk0UG85bGZKZzg0WE02R2IKRU13YXREbHZiNWFwY0lHZU5WRzd4TGNGVVUrYWxBS0dReEdEVk8wc1FxU2VoR0p3Zm5oMjJQMlpEb0g0aVhIawpyR01IdlhVSkZCVFUzYnJFU3l5M2JmZFBaa1hJU01XM0tGUlduWjhuVW9haUtnMzZBT1lsUnMvRlV1SFJZY2YzCi9ySzZYdTBUcTZ4c1R1Vk1lNzZRdHB1UkF3SGwwWnpuUEYzSEgxYy9LRis2aEVaYUF1VXpRbHRJSTRpeVlKUXQKWmpBN2FualFPZXJVa3NCUVhqUVRqWnM5QTdhU0w4ZjVMaTZxSlFJREFRQUJBb0lCQVFDQUJITVB4WnNHaDBGYQprUUhhTm5STHIvcmpuRjdqMHBIY2FOQnRxbWE2WllZcGM2OXBnb0xhRWlubUZiVFNnNGpCQk5IYlU0N2FWVjUvCkZJd1oxK1JJQUtvWWpGVVRuaEhhdkF4enBhYVFpSWs3Skg1ZGpkSWdDQlpOV0ZZS0xEaHZMa3FsZlEvU2VTZlgKbmhOeEtqUDZWTlVTY3kyeFVrczNuUjlvamhYTGl3eVdhbFJUY05kQTlWM1F3VjRwb2l6dndjOXFnTHRtUzJHZAoxdVNuc1M5ZHNvZzVKK2FTSER2anYzMi9BWFlUYlptWjFTR0Z2R0FtMkcybTYyY0kxS1p0VzRiOEIxZk5sMmgyCkw2Skp0dW9sQkwzMmJ4bFdaV0d4eWk2RXdjenNGOWtzZ1Ixc002dmwxWnpDcGJtWnl1UmM1SXVKWk5zVG1QMXYKNlBUWW03VTVBb0dCQU1HVVhudWZGRWlaai90bFZsbWRzMGtoWHZ3Z3ZQU01pckMrZmtmNEpGOUFUUzhEdFBWdQpobGRvTW9BUFBJZTdkdkY2dTRib1NTQWg2Q1ZndVVKVllXNUgrQU1KTWkxMFdsbUF0Qy85aHgyMitHV1hNcXhnCjIxUTFCR1FDd3ZkTHhSMVlFZXVBdFRmQnpGNVNOU0JQbUJxbU9hbXdkbGlqUTFqV0p0aXNGZzlQQW9HQkFPSi8KYnlTMU1RSFYwMlZpYUR6TFhOUXhpTURFTTYvaDRSaUVLWGRKRXdlYUxybnhVS3JrbDJXT25tdUtZVGpuZ3pqcQpHTVNhekRKTU1VYWkzY1RmSUNPaWRrL1lpNVFCOXZZOUIyWjU0Qm5CbUNSMXNUWUpRTVo5azR3SmtTM0VQd05rCnlhZTVHSU95c3htSVNvOUwxdzlad21qZkNLdFpOTjlsVXJaZTZYSkxBb0dBUGYyQVlFQXFJN0doYlJVZm1PVXEKYzhIUEJCaUx5aGh6bFhQN1Jwck5NditKZUFQTTRFZTdsNlFUZi9UaEltcERCY09TNS9uYzZRQlNzaDJPVmhLMwpkN1J1VkxLT01nWXZwTGZWZkFUSlR4ZTM1ZmlNVHExWnIxYW5DRXZtR1lGWEp6Vjd6NW5RN29FT0xDcFJQdjZlCksvS05ScXp1eVNYSFBGeWY1Z1Q5cjNzQ2dZRUF6Y1MrSVZnbkhLYTR0WXV3YlVMSG85TVlqUi95WVNCUmtpZEgKVUtKbmttbUZkOUgrMmpKd1JJaEw3aUU2Y0NzTHNPSWovRUV4cjZRK3hCQmtiMTNSNGUzUGxIeURXY1JySzR1SQpOSllXZk8rL0c2aDhoVDNreGk4Qm82QnhiMld4WlpEa0R1YittVzc0ZlFLdjBmMHhkVFd6Zy9qVDlHOUh0SWhsCm0xOGdzSDhDZ1lBbjJEeXRocUI2c3RlRk5XSHVOZ3puRk9JVzBIQUlBRUtWQ0ZQZ0g0WmlVTG00UVBRNUlhN28Kd3RCMGpaeTJhb1k1NXVnK3V3REpYSjZXTnhENjNoamFvNXNkMTFDVW9iRVErOGtRS1FjQjJadmcybmN0RWVBTgpwMWhWRGJhSituaUFwR05CdGswZHRMUDRwYjM3RmZ1SUJmMklPbVBGKytCVFByVjJyUFFlYVE9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo=

mfm@wv04:/home/mfm$ sudo apt update
Hit:1 http://archive.ubuntu.com/ubuntu jammy InRelease
Get:2 http://archive.ubuntu.com/ubuntu jammy-updates InRelease [114 kB]
Get:3 http://archive.ubuntu.com/ubuntu jammy-backports InRelease [99.8 kB]
Get:4 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 Packages [520 kB]
Get:5 http://archive.ubuntu.com/ubuntu jammy-updates/main Translation-en [125 kB]
Get:6 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 c-n-f Metadata [8020 B]
Get:7 http://archive.ubuntu.com/ubuntu jammy-updates/restricted amd64 Packages [282 kB]
Get:8 http://archive.ubuntu.com/ubuntu jammy-updates/restricted Translation-en [43.8 kB]
Get:9 http://archive.ubuntu.com/ubuntu jammy-updates/universe amd64 Packages [221 kB]
Get:10 http://archive.ubuntu.com/ubuntu jammy-updates/universe Translation-en [74.8 kB]
Get:11 http://archive.ubuntu.com/ubuntu jammy-backports/main amd64 Packages [3008 B]
Get:12 http://archive.ubuntu.com/ubuntu jammy-backports/main Translation-en [1432 B]
Get:13 http://archive.ubuntu.com/ubuntu jammy-backports/main amd64 c-n-f Metadata [272 B]
Get:14 http://archive.ubuntu.com/ubuntu jammy-backports/universe amd64 Packages [6724 B]
Get:15 http://security.ubuntu.com/ubuntu jammy-security InRelease [110 kB]
Get:16 http://archive.ubuntu.com/ubuntu jammy-backports/universe Translation-en [9216 B]
Get:17 http://archive.ubuntu.com/ubuntu jammy-backports/universe amd64 c-n-f Metadata [352 B]
Get:18 http://security.ubuntu.com/ubuntu jammy-security/main amd64 Packages [275 kB]
Get:19 http://security.ubuntu.com/ubuntu jammy-security/main Translation-en [66.8 kB]
Get:20 http://security.ubuntu.com/ubuntu jammy-security/restricted amd64 Packages [250 kB]
Get:21 http://security.ubuntu.com/ubuntu jammy-security/restricted Translation-en [38.6 kB]
Get:22 http://security.ubuntu.com/ubuntu jammy-security/universe amd64 Packages [116 kB]
Get:23 http://security.ubuntu.com/ubuntu jammy-security/universe Translation-en [40.7 kB]
Fetched 2407 kB in 3s (878 kB/s)
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
8 packages can be upgraded. Run 'apt list --upgradable' to see them.
mfm@wv04:/home/mfm$ sudo apt install -y apt-transport-https ca-certificates curl
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
ca-certificates is already the newest version (20211016).
ca-certificates set to manually installed.
curl is already the newest version (7.81.0-1ubuntu1.3).
curl set to manually installed.
apt-transport-https is already the newest version (2.4.7).
0 upgraded, 0 newly installed, 0 to remove and 8 not upgraded.
mfm@wv04:/home/mfm$ sudo curl -fsSLo /usr/share/keyrings/kubernetes-archive-keyring.gpg https://packages.cloud.google.com/apt/doc/apt-key.gpg
mfm@wv04:/home/mfm$ echo "deb [signed-by=/usr/share/keyrings/kubernetes-archive-keyring.gpg] https://apt.kubernetes.io/ kubernetes-xenial main" | sudo tee /etc/apt/sources.list.d/kubernetes.list
deb [signed-by=/usr/share/keyrings/kubernetes-archive-keyring.gpg] https://apt.kubernetes.io/ kubernetes-xenial main
mfm@wv04:/home/mfm$ sudo apt update
Hit:2 http://security.ubuntu.com/ubuntu jammy-security InRelease
Hit:3 http://archive.ubuntu.com/ubuntu jammy InRelease
Get:1 https://packages.cloud.google.com/apt kubernetes-xenial InRelease [9383 B]
Hit:4 http://archive.ubuntu.com/ubuntu jammy-updates InRelease
Hit:5 http://archive.ubuntu.com/ubuntu jammy-backports InRelease
Get:6 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 Packages [58.4 kB]
Fetched 67.8 kB in 1s (74.1 kB/s)
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
8 packages can be upgraded. Run 'apt list --upgradable' to see them.
mfm@wv04:/home/mfm$ sudo apt install -y kubelet kubeadm kubectl
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
The following additional packages will be installed:
  conntrack cri-tools ebtables kubernetes-cni socat
The following NEW packages will be installed:
  conntrack cri-tools ebtables kubeadm kubectl kubelet kubernetes-cni socat
0 upgraded, 8 newly installed, 0 to remove and 8 not upgraded.
Need to get 75.9 MB of archives.
After this operation, 310 MB of additional disk space will be used.
Get:6 http://archive.ubuntu.com/ubuntu jammy/main amd64 conntrack amd64 1:1.4.6-2build2 [33.5 kB]
Get:1 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 cri-tools amd64 1.24.2-00 [12.3 MB]
Get:7 http://archive.ubuntu.com/ubuntu jammy/main amd64 ebtables amd64 2.0.11-4build2 [84.9 kB]
Get:2 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 kubernetes-cni amd64 0.8.7-00 [25.0 MB]
Get:8 http://archive.ubuntu.com/ubuntu jammy/main amd64 socat amd64 1.7.4.1-3ubuntu4 [349 kB]
Get:3 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 kubelet amd64 1.25.0-00 [19.5 MB]
Get:4 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 kubectl amd64 1.25.0-00 [9500 kB]
Get:5 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 kubeadm amd64 1.25.0-00 [9213 kB]
Fetched 75.9 MB in 2s (39.7 MB/s)
Selecting previously unselected package conntrack.
(Reading database ... 73720 files and directories currently installed.)
Preparing to unpack .../0-conntrack_1%3a1.4.6-2build2_amd64.deb ...
Unpacking conntrack (1:1.4.6-2build2) ...
Selecting previously unselected package cri-tools.
Preparing to unpack .../1-cri-tools_1.24.2-00_amd64.deb ...
Unpacking cri-tools (1.24.2-00) ...
Selecting previously unselected package ebtables.
Preparing to unpack .../2-ebtables_2.0.11-4build2_amd64.deb ...
Unpacking ebtables (2.0.11-4build2) ...
Selecting previously unselected package kubernetes-cni.
Preparing to unpack .../3-kubernetes-cni_0.8.7-00_amd64.deb ...
Unpacking kubernetes-cni (0.8.7-00) ...
Selecting previously unselected package socat.
Preparing to unpack .../4-socat_1.7.4.1-3ubuntu4_amd64.deb ...
Unpacking socat (1.7.4.1-3ubuntu4) ...
Selecting previously unselected package kubelet.
Preparing to unpack .../5-kubelet_1.25.0-00_amd64.deb ...
Unpacking kubelet (1.25.0-00) ...
Selecting previously unselected package kubectl.
Preparing to unpack .../6-kubectl_1.25.0-00_amd64.deb ...
Unpacking kubectl (1.25.0-00) ...
Selecting previously unselected package kubeadm.
Preparing to unpack .../7-kubeadm_1.25.0-00_amd64.deb ...
Unpacking kubeadm (1.25.0-00) ...
Setting up conntrack (1:1.4.6-2build2) ...
Setting up kubectl (1.25.0-00) ...
Setting up ebtables (2.0.11-4build2) ...
Setting up socat (1.7.4.1-3ubuntu4) ...
Setting up cri-tools (1.24.2-00) ...
Setting up kubernetes-cni (0.8.7-00) ...
Setting up kubelet (1.25.0-00) ...
Created symlink /etc/systemd/system/multi-user.target.wants/kubelet.service → /lib/systemd/system/kubelet.service.
Setting up kubeadm (1.25.0-00) ...
Processing triggers for man-db (2.10.2-1) ...
Scanning processes...
Scanning processor microcode...
Scanning linux images...

Running kernel seems to be up-to-date.

The processor microcode seems to be up-to-date.

No services need to be restarted.

No containers need to be restarted.

No user sessions are running outdated binaries.

No VM guests are running outdated hypervisor (qemu) binaries on this host.
mfm@wv04:/home/mfm$ kubectl get node
NAME    STATUS   ROLES           AGE   VERSION
node1   Ready    control-plane   32m   v1.25.0
node2   Ready    <none>          26m   v1.25.0
node3   Ready    <none>          24m   v1.25.0
mfm@wv04:/home/mfm$  kubectl describe node node1
Name:               node1
Roles:              control-plane
Labels:             beta.kubernetes.io/arch=amd64
                    beta.kubernetes.io/os=linux
                    kubernetes.io/arch=amd64
                    kubernetes.io/hostname=node1
                    kubernetes.io/os=linux
                    node-role.kubernetes.io/control-plane=
                    node.kubernetes.io/exclude-from-external-load-balancers=
Annotations:        csi.volume.kubernetes.io/nodeid: {"csi.tigera.io":"node1"}
                    kubeadm.alpha.kubernetes.io/cri-socket: unix:///var/run/containerd/containerd.sock
                    node.alpha.kubernetes.io/ttl: 0
                    projectcalico.org/IPv4Address: 10.9.233.141/24
                    projectcalico.org/IPv4VXLANTunnelAddr: 192.168.166.128
                    volumes.kubernetes.io/controller-managed-attach-detach: true
CreationTimestamp:  Mon, 29 Aug 2022 21:20:08 +0000
Taints:             node-role.kubernetes.io/control-plane:NoSchedule
Unschedulable:      false
Lease:
  HolderIdentity:  node1
  AcquireTime:     <unset>
  RenewTime:       Mon, 29 Aug 2022 22:00:59 +0000
Conditions:
  Type                 Status  LastHeartbeatTime                 LastTransitionTime                Reason                       Message
  ----                 ------  -----------------                 ------------------                ------                       -------
  NetworkUnavailable   False   Mon, 29 Aug 2022 21:23:55 +0000   Mon, 29 Aug 2022 21:23:55 +0000   CalicoIsUp                   Calico is running on this node
  MemoryPressure       False   Mon, 29 Aug 2022 22:00:32 +0000   Mon, 29 Aug 2022 21:20:06 +0000   KubeletHasSufficientMemory   kubelet has sufficient memory available
  DiskPressure         False   Mon, 29 Aug 2022 22:00:32 +0000   Mon, 29 Aug 2022 21:20:06 +0000   KubeletHasNoDiskPressure     kubelet has no disk pressure
  PIDPressure          False   Mon, 29 Aug 2022 22:00:32 +0000   Mon, 29 Aug 2022 21:20:06 +0000   KubeletHasSufficientPID      kubelet has sufficient PID available
  Ready                True    Mon, 29 Aug 2022 22:00:32 +0000   Mon, 29 Aug 2022 21:23:56 +0000   KubeletReady                 kubelet is posting ready status. AppArmor enabled
Addresses:
  InternalIP:  10.9.233.141
  Hostname:    node1
Capacity:
  cpu:                4
  ephemeral-storage:  50620216Ki
  hugepages-1Gi:      0
  hugepages-2Mi:      0
  memory:             8148196Ki
  pods:               110
Allocatable:
  cpu:                4
  ephemeral-storage:  46651590989
  hugepages-1Gi:      0
  hugepages-2Mi:      0
  memory:             8045796Ki
  pods:               110
System Info:
  Machine ID:                 03043214e617468c927ff76d89987e18
  System UUID:                03043214e617468c927ff76d89987e18
  Boot ID:                    00d12587-58e5-42bd-9a37-3e261cb79544
  Kernel Version:             5.4.0-125-generic
  OS Image:                   Ubuntu 20.04.4 LTS
  Operating System:           linux
  Architecture:               amd64
  Container Runtime Version:  containerd://1.6.8
  Kubelet Version:            v1.25.0
  Kube-Proxy Version:         v1.25.0
PodCIDR:                      192.168.0.0/24
PodCIDRs:                     192.168.0.0/24
Non-terminated Pods:          (14 in total)
  Namespace                   Name                                        CPU Requests  CPU Limits  Memory Requests  Memory Limits  Age
  ---------                   ----                                        ------------  ----------  ---------------  -------------  ---
  calico-apiserver            calico-apiserver-5bd759bb9b-nk65n           0 (0%)        0 (0%)      0 (0%)           0 (0%)         37m
  calico-apiserver            calico-apiserver-5bd759bb9b-tnf5p           0 (0%)        0 (0%)      0 (0%)           0 (0%)         37m
  calico-system               calico-kube-controllers-795d7b8659-h6pb7    0 (0%)        0 (0%)      0 (0%)           0 (0%)         37m
  calico-system               calico-node-q485k                           0 (0%)        0 (0%)      0 (0%)           0 (0%)         37m
  calico-system               calico-typha-65fdcdb46-htsmk                0 (0%)        0 (0%)      0 (0%)           0 (0%)         37m
  calico-system               csi-node-driver-6zkcc                       0 (0%)        0 (0%)      0 (0%)           0 (0%)         37m
  kube-system                 coredns-565d847f94-lmmwm                    100m (2%)     0 (0%)      70Mi (0%)        170Mi (2%)     40m
  kube-system                 coredns-565d847f94-v44z7                    100m (2%)     0 (0%)      70Mi (0%)        170Mi (2%)     40m
  kube-system                 etcd-node1                                  100m (2%)     0 (0%)      100Mi (1%)       0 (0%)         40m
  kube-system                 kube-apiserver-node1                        250m (6%)     0 (0%)      0 (0%)           0 (0%)         40m
  kube-system                 kube-controller-manager-node1               200m (5%)     0 (0%)      0 (0%)           0 (0%)         40m
  kube-system                 kube-proxy-lcj7n                            0 (0%)        0 (0%)      0 (0%)           0 (0%)         40m
  kube-system                 kube-scheduler-node1                        100m (2%)     0 (0%)      0 (0%)           0 (0%)         40m
  tigera-operator             tigera-operator-8699df55d6-mbcbd            0 (0%)        0 (0%)      0 (0%)           0 (0%)         37m
Allocated resources:
  (Total limits may be over 100 percent, i.e., overcommitted.)
  Resource           Requests    Limits
  --------           --------    ------
  cpu                850m (21%)  0 (0%)
  memory             240Mi (3%)  340Mi (4%)
  ephemeral-storage  0 (0%)      0 (0%)
  hugepages-1Gi      0 (0%)      0 (0%)
  hugepages-2Mi      0 (0%)      0 (0%)
Events:
  Type     Reason                   Age   From             Message
  ----     ------                   ----  ----             -------
  Normal   Starting                 40m   kube-proxy
  Normal   Starting                 40m   kubelet          Starting kubelet.
  Warning  InvalidDiskCapacity      40m   kubelet          invalid capacity 0 on image filesystem
  Normal   NodeHasSufficientMemory  40m   kubelet          Node node1 status is now: NodeHasSufficientMemory
  Normal   NodeHasNoDiskPressure    40m   kubelet          Node node1 status is now: NodeHasNoDiskPressure
  Normal   NodeHasSufficientPID     40m   kubelet          Node node1 status is now: NodeHasSufficientPID
  Normal   NodeAllocatableEnforced  40m   kubelet          Updated Node Allocatable limit across pods
  Normal   RegisteredNode           40m   node-controller  Node node1 event: Registered Node node1 in Controller
  Normal   NodeReady                37m   kubelet          Node node1 status is now: NodeReady
mfm@wv04:/home/mfm$ kubectl describe node node2
Name:               node2
Roles:              <none>
Labels:             beta.kubernetes.io/arch=amd64
                    beta.kubernetes.io/os=linux
                    kubernetes.io/arch=amd64
                    kubernetes.io/hostname=node2
                    kubernetes.io/os=linux
Annotations:        csi.volume.kubernetes.io/nodeid: {"csi.tigera.io":"node2"}
                    kubeadm.alpha.kubernetes.io/cri-socket: unix:///var/run/containerd/containerd.sock
                    node.alpha.kubernetes.io/ttl: 0
                    projectcalico.org/IPv4Address: 10.9.233.229/24
                    projectcalico.org/IPv4VXLANTunnelAddr: 192.168.104.0
                    volumes.kubernetes.io/controller-managed-attach-detach: true
CreationTimestamp:  Mon, 29 Aug 2022 21:26:19 +0000
Taints:             <none>
Unschedulable:      false
Lease:
  HolderIdentity:  node2
  AcquireTime:     <unset>
  RenewTime:       Mon, 29 Aug 2022 22:02:04 +0000
Conditions:
  Type                 Status  LastHeartbeatTime                 LastTransitionTime                Reason                       Message
  ----                 ------  -----------------                 ------------------                ------                       -------
  NetworkUnavailable   False   Mon, 29 Aug 2022 21:26:40 +0000   Mon, 29 Aug 2022 21:26:40 +0000   CalicoIsUp                   Calico is running on this node
  MemoryPressure       False   Mon, 29 Aug 2022 21:57:46 +0000   Mon, 29 Aug 2022 21:26:19 +0000   KubeletHasSufficientMemory   kubelet has sufficient memory available
  DiskPressure         False   Mon, 29 Aug 2022 21:57:46 +0000   Mon, 29 Aug 2022 21:26:19 +0000   KubeletHasNoDiskPressure     kubelet has no disk pressure
  PIDPressure          False   Mon, 29 Aug 2022 21:57:46 +0000   Mon, 29 Aug 2022 21:26:19 +0000   KubeletHasSufficientPID      kubelet has sufficient PID available
  Ready                True    Mon, 29 Aug 2022 21:57:46 +0000   Mon, 29 Aug 2022 21:26:40 +0000   KubeletReady                 kubelet is posting ready status. AppArmor enabled
Addresses:
  InternalIP:  10.9.233.229
  Hostname:    node2
Capacity:
  cpu:                4
  ephemeral-storage:  50620216Ki
  hugepages-1Gi:      0
  hugepages-2Mi:      0
  memory:             8148196Ki
  pods:               110
Allocatable:
  cpu:                4
  ephemeral-storage:  46651590989
  hugepages-1Gi:      0
  hugepages-2Mi:      0
  memory:             8045796Ki
  pods:               110
System Info:
  Machine ID:                 a5406022d70e47778c20f1e0065f5ad0
  System UUID:                a5406022d70e47778c20f1e0065f5ad0
  Boot ID:                    ca365510-e610-4670-9d5e-043aa7e18e64
  Kernel Version:             5.4.0-125-generic
  OS Image:                   Ubuntu 20.04.4 LTS
  Operating System:           linux
  Architecture:               amd64
  Container Runtime Version:  containerd://1.6.8
  Kubelet Version:            v1.25.0
  Kube-Proxy Version:         v1.25.0
PodCIDR:                      192.168.1.0/24
PodCIDRs:                     192.168.1.0/24
Non-terminated Pods:          (3 in total)
  Namespace                   Name                     CPU Requests  CPU Limits  Memory Requests  Memory Limits  Age
  ---------                   ----                     ------------  ----------  ---------------  -------------  ---
  calico-system               calico-node-mws6f        0 (0%)        0 (0%)      0 (0%)           0 (0%)         35m
  calico-system               csi-node-driver-ghxx8    0 (0%)        0 (0%)      0 (0%)           0 (0%)         35m
  kube-system                 kube-proxy-wg8s5         0 (0%)        0 (0%)      0 (0%)           0 (0%)         35m
Allocated resources:
  (Total limits may be over 100 percent, i.e., overcommitted.)
  Resource           Requests  Limits
  --------           --------  ------
  cpu                0 (0%)    0 (0%)
  memory             0 (0%)    0 (0%)
  ephemeral-storage  0 (0%)    0 (0%)
  hugepages-1Gi      0 (0%)    0 (0%)
  hugepages-2Mi      0 (0%)    0 (0%)
Events:
  Type    Reason                   Age                From             Message
  ----    ------                   ----               ----             -------
  Normal  Starting                 35m                kube-proxy
  Normal  NodeHasSufficientMemory  35m (x8 over 35m)  kubelet          Node node2 status is now: NodeHasSufficientMemory
  Normal  RegisteredNode           35m                node-controller  Node node2 event: Registered Node node2 in Controller
mfm@wv04:/home/mfm$ ll
total 40
drwxr-x--- 6 mfm  mfm  4096 Aug 29 21:46 ./
drwxr-xr-x 3 root root 4096 Aug 29 21:06 ../
-rw-r--r-- 1 mfm  mfm   220 Jan  6  2022 .bash_logout
-rw-r--r-- 1 mfm  mfm  3771 Jan  6  2022 .bashrc
drwx------ 2 mfm  mfm  4096 Aug 29 21:07 .cache/
drwxrwxrwx 3 mfm  mfm  4096 Aug 29 21:52 .kube/
-rw-r--r-- 1 mfm  mfm   807 Jan  6  2022 .profile
drwx------ 2 mfm  mfm  4096 Aug 29 21:07 .ssh/
-rw-r--r-- 1 mfm  mfm     0 Aug 29 21:08 .sudo_as_admin_successful
-rw------- 1 mfm  mfm   823 Aug 29 21:46 .viminfo
-rw-rw-rw- 1 root root    0 Aug 29 21:42 config
drwx------ 3 mfm  mfm  4096 Aug 29 21:08 snap/
mfm@wv04:/home/mfm$
mfm@wv04:/home/mfm$
mfm@wv04:/home/mfm$ kubectl get pv
No resources found
mfm@wv04:/home/mfm$ kubectl get sc
No resources found
mfm@wv04:/home/mfm$ kubectl get pvc
No resources found in default namespace.
mfm@wv04:/home/mfm$ sudo mkdir -p /k8s/weathervane/vol
[sudo] password for mfm:
mfm@wv04:/home/mfm$ sudo chmod -R 777 /k8s
mfm@wv04:/home/mfm$ git clone http://github.com/vmware/weathervane
Cloning into 'weathervane'...
warning: redirecting to https://github.com/vmware/weathervane/
remote: Enumerating objects: 19164, done.
remote: Counting objects: 100% (1955/1955), done.
remote: Compressing objects: 100% (639/639), done.
remote: Total 19164 (delta 1014), reused 1892 (delta 968), pack-reused 17209
Receiving objects: 100% (19164/19164), 64.64 MiB | 57.66 MiB/s, done.
Resolving deltas: 100% (11710/11710), done.
mfm@wv04:/home/mfm$ cd weathervane/
mfm@wv04:/home/mfm/weathervane$ cat > create-persistent-vol.yaml << EOF
> apiVersion: v1
> kind: PersistentVolume
> metadata:
>   name: weathervane-pv
> spec:
>   capacity:
>     storage: 400Gi
>   accessModes:
>   - ReadWriteOnce
>   persistentVolumeReclaimPolicy: Retain
>   storageClassName: local-storage
>   local:
>     path: /k8s/weathervane/vol
>   nodeAffinity:
>     required:
>       nodeSelectorTerms:
>       - matchExpressions:
>         - key: kubernetes.io/hostname
>           operator: In
>           values:
>           - node2
> EOF
mfm@wv04:/home/mfm/weathervane$ kubectl create -f create-persistent-vol.yaml
persistentvolume/weathervane-pv created
mfm@wv04:/home/mfm/weathervane$ kubectl get pv
NAME             CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS      CLAIM   STORAGECLASS    REASON   AGE
weathervane-pv   400Gi      RWO            Retain           Available           local-storage            9s
mfm@wv04:/home/mfm/weathervane$ cat > create-storage-class.yaml << EOF
> kind: StorageClass
> apiVersion: storage.k8s.io/v1
> metadata:
>   name: local-storage
> provisioner: kubernetes.io/no-provisioner
> volumeBindingMode: Immediate
> EOF
mfm@wv04:/home/mfm/weathervane$ kubectl create -f create-storage-class.yaml
storageclass.storage.k8s.io/local-storage created
mfm@wv04:/home/mfm/weathervane$ kubectl get sc
NAME            PROVISIONER                    RECLAIMPOLICY   VOLUMEBINDINGMODE   ALLOWVOLUMEEXPANSION   AGE
local-storage   kubernetes.io/no-provisioner   Delete          Immediate           false                  14s
mfm@wv04:/home/mfm/weathervane$ ll
total 260
drwxrwxr-x 16 mfm mfm  4096 Aug 29 22:23 ./
drwxr-x---  7 mfm mfm  4096 Aug 29 22:16 ../
drwxrwxr-x  8 mfm mfm  4096 Aug 29 22:16 .git/
-rw-rw-r--  1 mfm mfm  2411 Aug 29 22:16 .gitignore
-rw-rw-r--  1 mfm mfm  2959 Aug 29 22:16 BRANCHING.md
-rw-rw-r--  1 mfm mfm   200 Aug 29 22:16 Branches.md
-rw-rw-r--  1 mfm mfm  5247 Aug 29 22:16 CODE-OF-CONDUCT.md
-rw-rw-r--  1 mfm mfm  9540 Aug 29 22:16 CONTRIBUTING.md
-rw-rw-r--  1 mfm mfm  4952 Aug 29 22:16 ISSUES.md
-rw-rw-r--  1 mfm mfm  1485 Aug 29 22:16 LICENSE.txt
-rw-rw-r--  1 mfm mfm   454 Aug 29 22:16 Notice.txt
-rw-rw-r--  1 mfm mfm  4585 Aug 29 22:16 README.md
drwxrwxr-x  3 mfm mfm  4096 Aug 29 22:16 auctionApp/
drwxrwxr-x  3 mfm mfm  4096 Aug 29 22:16 auctionAppServerWarmer/
drwxrwxr-x  3 mfm mfm  4096 Aug 29 22:16 auctionBidService/
drwxrwxr-x  3 mfm mfm  4096 Aug 29 22:16 auctionWeb/
-rw-rw-r--  1 mfm mfm 10152 Aug 29 22:16 build.gradle
-rwxrwxr-x  1 mfm mfm 13779 Aug 29 22:16 buildDockerImages.pl*
drwxrwxr-x  4 mfm mfm  4096 Aug 29 22:16 configFiles/
-rw-rw-r--  1 mfm mfm   433 Aug 29 22:22 create-persistent-vol.yaml
-rw-rw-r--  1 mfm mfm   152 Aug 29 22:23 create-storage-class.yaml
drwxrwxr-x  3 mfm mfm  4096 Aug 29 22:16 dbLoader/
drwxrwxr-x  8 mfm mfm  4096 Aug 29 22:16 doc/
drwxrwxr-x 14 mfm mfm  4096 Aug 29 22:16 dockerImages/
drwxrwxr-x  3 mfm mfm  4096 Aug 29 22:16 gradle/
-rw-rw-r--  1 mfm mfm    20 Aug 29 22:16 gradle.properties
-rwxrwxr-x  1 mfm mfm  5305 Aug 29 22:16 gradlew*
-rwxrwxr-x  1 mfm mfm  2185 Aug 29 22:16 gradlew.bat*
drwxrwxr-x 14 mfm mfm  4096 Aug 29 22:16 runHarness/
-rwxrwxr-x  1 mfm mfm 20497 Aug 29 22:16 runWeathervane.pl*
-rwxrwxr-x  1 mfm mfm  2527 Aug 29 22:16 runmany.sh*
-rw-rw-r--  1 mfm mfm   145 Aug 29 22:16 settings.gradle
drwxrwxr-x  3 mfm mfm  4096 Aug 29 22:16 testing/
-rw-rw-r--  1 mfm mfm     6 Aug 29 22:16 version.txt
-rw-rw-r--  1 mfm mfm   708 Aug 29 22:16 weathervane.config.k8s.micro
-rw-rw-r--  1 mfm mfm   721 Aug 29 22:16 weathervane.config.k8s.small2
-rwxrwxr-x  1 mfm mfm 42556 Aug 29 22:16 weathervane.pl*
drwxrwxr-x  3 mfm mfm  4096 Aug 29 22:16 workloadConfiguration/
drwxrwxr-x  3 mfm mfm  4096 Aug 29 22:16 workloadDriver/
mfm@wv04:/home/mfm/weathervane$ cp weathervane.config.k8s.micro weathervane.config.k8s.quickstart
mfm@wv04:/home/mfm/weathervane$ vi *.q*
mfm@wv04:/home/mfm/weathervane$ mfm@wv04:/home/mfm/weathervane$ cat weathervane.config.k8s.quickstart
{
  "description" : "micro",

  "configurationSize": "micro",

  "runStrategy" : "fixed",

  "dockerNamespace" : "mikemoranamd",
  "kubernetesClusters" : [
    {
      "name" : "appCluster",
      "kubeconfigFile" : "/root/.kube/config",
      "kubeconfigContext" : "cluster-context-1",
    },
    {
      "name" : "driverCluster",
      "kubeconfigFile" : "/root/.kube/config",
      "kubeconfigContext" : "cluster-context-2",
    },
  ],

  "driverCluster" : "driverCluster",

  "appInstanceCluster" : "appCluster",
  "appIngressMethod" : "clusterip",

  "cassandraDataStorageClass" : "local-storage",
  "postgresqlStorageClass" : "local-storage",
  "nginxCacheStorageClass" : "local-storage",

}
mfm@wv04:/home/mfm/weathervane$ vi z
mfm@wv04:/home/mfm/weathervane$ ll
total 268
drwxrwxr-x 16 mfm mfm  4096 Aug 29 22:32 ./
drwxr-x---  7 mfm mfm  4096 Aug 29 22:32 ../
drwxrwxr-x  8 mfm mfm  4096 Aug 29 22:16 .git/
-rw-rw-r--  1 mfm mfm  2411 Aug 29 22:16 .gitignore
-rw-rw-r--  1 mfm mfm  2959 Aug 29 22:16 BRANCHING.md
-rw-rw-r--  1 mfm mfm   200 Aug 29 22:16 Branches.md
-rw-rw-r--  1 mfm mfm  5247 Aug 29 22:16 CODE-OF-CONDUCT.md
-rw-rw-r--  1 mfm mfm  9540 Aug 29 22:16 CONTRIBUTING.md
-rw-rw-r--  1 mfm mfm  4952 Aug 29 22:16 ISSUES.md
-rw-rw-r--  1 mfm mfm  1485 Aug 29 22:16 LICENSE.txt
-rw-rw-r--  1 mfm mfm   454 Aug 29 22:16 Notice.txt
-rw-rw-r--  1 mfm mfm  4585 Aug 29 22:16 README.md
drwxrwxr-x  3 mfm mfm  4096 Aug 29 22:16 auctionApp/
drwxrwxr-x  3 mfm mfm  4096 Aug 29 22:16 auctionAppServerWarmer/
drwxrwxr-x  3 mfm mfm  4096 Aug 29 22:16 auctionBidService/
drwxrwxr-x  3 mfm mfm  4096 Aug 29 22:16 auctionWeb/
-rw-rw-r--  1 mfm mfm 10152 Aug 29 22:16 build.gradle
-rwxrwxr-x  1 mfm mfm 13779 Aug 29 22:16 buildDockerImages.pl*
drwxrwxr-x  4 mfm mfm  4096 Aug 29 22:16 configFiles/
-rw-rw-r--  1 mfm mfm   433 Aug 29 22:22 create-persistent-vol.yaml
-rw-rw-r--  1 mfm mfm   152 Aug 29 22:23 create-storage-class.yaml
drwxrwxr-x  3 mfm mfm  4096 Aug 29 22:16 dbLoader/
drwxrwxr-x  8 mfm mfm  4096 Aug 29 22:16 doc/
drwxrwxr-x 14 mfm mfm  4096 Aug 29 22:16 dockerImages/
drwxrwxr-x  3 mfm mfm  4096 Aug 29 22:16 gradle/
-rw-rw-r--  1 mfm mfm    20 Aug 29 22:16 gradle.properties
-rwxrwxr-x  1 mfm mfm  5305 Aug 29 22:16 gradlew*
-rwxrwxr-x  1 mfm mfm  2185 Aug 29 22:16 gradlew.bat*
drwxrwxr-x 14 mfm mfm  4096 Aug 29 22:16 runHarness/
-rwxrwxr-x  1 mfm mfm 20497 Aug 29 22:16 runWeathervane.pl*
-rwxrwxr-x  1 mfm mfm  2527 Aug 29 22:16 runmany.sh*
-rw-rw-r--  1 mfm mfm   145 Aug 29 22:16 settings.gradle
drwxrwxr-x  3 mfm mfm  4096 Aug 29 22:16 testing/
-rw-rw-r--  1 mfm mfm     6 Aug 29 22:16 version.txt
-rw-rw-r--  1 mfm mfm   708 Aug 29 22:16 weathervane.config.k8s.micro
-rw-rw-r--  1 mfm mfm   704 Aug 29 22:28 weathervane.config.k8s.quickstart
-rw-rw-r--  1 mfm mfm   721 Aug 29 22:16 weathervane.config.k8s.small2
-rwxrwxr-x  1 mfm mfm 42556 Aug 29 22:16 weathervane.pl*
drwxrwxr-x  3 mfm mfm  4096 Aug 29 22:16 workloadConfiguration/
drwxrwxr-x  3 mfm mfm  4096 Aug 29 22:16 workloadDriver/
-rw-rw-r--  1 mfm mfm  1907 Aug 29 22:32 z
mfm@wv04:/home/mfm/weathervane$ . z
Z_DIR=/tmp/220829223305
Error from server (NotFound): persistentvolumeclaims "cassandra-data-cassandra-0" not found
Error from server (NotFound): persistentvolumeclaims "postgresql-postgresql-0" not found

$ kubectl get sc --all-namespaces
NAME            PROVISIONER                    RECLAIMPOLICY   VOLUMEBINDINGMODE   ALLOWVOLUMEEXPANSION   AGE
local-storage   kubernetes.io/no-provisioner   Delete          Immediate           false                  9m50s

$ kubectl get pv --all-namespaces
NAME             CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS      CLAIM   STORAGECLASS    REASON   AGE
weathervane-pv   400Gi      RWO            Retain           Available           local-storage            10m

$ kubectl get pvc --all-namespaces
No resources found


BEGIN OF WEATHERVANE PERL SCRIPT OUTPUT
Weathervane
Copyright (c) 2019 VMware, Inc. All Rights Reserved.

This product is licensed to you under the BSD-2 license (the "License").  You may not use this product except in compliance with the BSD-2 License.

This product may include a number of subcomponents with separate copyright notices and license terms. Your use of these subcomponents is subject to the terms and conditions of the subcomponent's license, as noted in the LICENSE file.

Do you accept these terms and conditions (yes/no)? yes
The kubeconfigFile /root/.kube/config must exist and be a regular file.
Usage: ./runWeathervane.pl [options] [-- parameters]

This script is used to run the Weathervane benchmark using the configuration specified in a configuration file.
It takes the following options:
--configFile: This specifies the configuration file used to control the Weathervane run.
              If this parameter is not a fully-qualified file name starting with a / then
              the location of the file is assumed to be relative to the directory in which
              this script was invoked.
              For a description of the Weathervane configuration file, please see the
              Weathervane User's Guide
              default value: weathervane.config
--version:    The version of Weathervane to use.  This will override the default version
              number to use for the Weathervane container images.
              default value: 2.1.1
--outputDir:  The directory in which to store the output from the Weathervane run.  You should
              use the same directory for all runs. Output is only placed in this directory
              at the end of a run.  The directory is created if it does not exist.
              If this parameter is not a fully-qualified file name starting with a / then
              the location of the file is assumed to be relative to the directory in which
              this script was invoked.
              default value: output
--tmpDir:     The directory in which to store temporary output created during the run.
              This information can be helpful when troubleshooting runs which do not complete
              properly.  The directory is created if it does not exist.
              If this parameter is not a fully-qualified file name starting with a / then
              the location of the file is assumed to be relative to the directory in which
              this script was invoked.
              default value: None.  If no value is specified the temporary files are stored
                             inside the Weathervane container.
--script:     The path to a script that should be run every scriptPeriod seconds.
              The script may be used to refresh the credentials in the kubeconfig file
              or to trigger external stats collection.
              If this parameter is not a fully-qualified file name starting with a / then
              the location of the file is assumed to be relative to the directory in which
              this script was invoked.
              default value: None.
--scriptPeriod: The frequency at which the script should be run in seconds.
              default value: 60
--mapSsh:     Causes the user's $HOME/.ssh directory to be mapped into the run harness container.
              This is only needed when collecting esxtop data, which requires passwordless ssh.
              default value: False
--accept:     Accepts the terms of the Weathervane license.  Useful when running this script
              from another script.  Only needs to be specified on the first run in a given directory.
              default value: None.  If no value is specified the user is prompted to accept the
                             license terms.
--skipPvTest: Causes the scipt to skip testing whether Weathervane can dynamically allocate
              persistant volumes in the storage classes defined in the configuration file.
              default value: False--help:       Displays this text.

To pass command-line parameters to the Weathervane run harness, enter them following two dashes
after the options.  For example, to stop the services from a previous run you would use:
./runWeathervane.pl --configFile=weathervane.config -- --stop

END OF WEATHERVANE PERL SCRIPT OUTPUT

$ kubectl get sc --all-namespaces
NAME            PROVISIONER                    RECLAIMPOLICY   VOLUMEBINDINGMODE   ALLOWVOLUMEEXPANSION   AGE
local-storage   kubernetes.io/no-provisioner   Delete          Immediate           false                  9m53s

$ kubectl get pv --all-namespaces
NAME             CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS      CLAIM   STORAGECLASS    REASON   AGE
weathervane-pv   400Gi      RWO            Retain           Available           local-storage            10m

$ kubectl get pvc --all-namespaces
No resources found

mfm@wv04:/home/mfm/weathervane$ ll /tmp
total 56
drwxrwxrwt 14 root root 4096 Aug 29 22:33 ./
drwxr-xr-x 20 root root 4096 Aug 29 22:16 ../
drwxrwxrwt  2 root root 4096 Aug 29 21:03 .ICE-unix/
drwxrwxrwt  2 root root 4096 Aug 29 21:03 .Test-unix/
drwxrwxrwt  2 root root 4096 Aug 29 21:03 .X11-unix/
drwxrwxrwt  2 root root 4096 Aug 29 21:03 .XIM-unix/
drwxrwxrwt  2 root root 4096 Aug 29 21:03 .font-unix/
drwxrwxr-x  4 mfm  mfm  4096 Aug 29 22:33 220829223305/
drwx------  3 root root 4096 Aug 29 21:04 snap.lxd/
drwx------  3 root root 4096 Aug 29 21:08 snap.multipass/
drwx------  3 root root 4096 Aug 29 21:04 systemd-private-04d454b135a94ba5820a5ecbb7ab0c0f-ModemManager.service-xFuxcL/
drwx------  3 root root 4096 Aug 29 21:04 systemd-private-04d454b135a94ba5820a5ecbb7ab0c0f-systemd-logind.service-Ejmi2A/
drwx------  3 root root 4096 Aug 29 21:03 systemd-private-04d454b135a94ba5820a5ecbb7ab0c0f-systemd-resolved.service-eNPMkA/
drwx------  3 root root 4096 Aug 29 21:03 systemd-private-04d454b135a94ba5820a5ecbb7ab0c0f-systemd-timesyncd.service-IwGzsl/
mfm@wv04:/home/mfm/weathervane$ ll /tmp/220829223305
total 64
drwxrwxr-x  4 mfm  mfm   4096 Aug 29 22:33 ./
drwxrwxrwt 14 root root  4096 Aug 29 22:33 ../
-rw-rw-r--  1 mfm  mfm   5464 Aug 29 22:33 ZOUT
-rw-rw-r--  1 mfm  mfm    433 Aug 29 22:33 create-persistent-vol.yaml
-rw-rw-r--  1 mfm  mfm    152 Aug 29 22:33 create-storage-class.yaml
drwxrwxr-x  2 mfm  mfm   4096 Aug 29 22:33 outDir/
-rwxrwxr-x  1 mfm  mfm  20497 Aug 29 22:33 runWeathervane.pl*
drwxrwxr-x  2 mfm  mfm   4096 Aug 29 22:33 tmpDir/
-rw-rw-r--  1 mfm  mfm    704 Aug 29 22:33 weathervane.config.k8s.quickstart
-rw-rw-r--  1 mfm  mfm   1907 Aug 29 22:33 z
mfm@wv04:/home/mfm/weathervane$ cat z

TS="$(date +%y%m%d%H%M%S)"
Z_DIR="/tmp/$TS"
mkdir -p $Z_DIR
echo "Z_DIR=$Z_DIR"
cp z $Z_DIR
cp weathervane.config.k8s.quickstart $Z_DIR
cp *.yaml $Z_DIR
cp runWeathervane.pl $Z_DIR


kubectl delete pvc --namespace auctionw1i1 cassandra-data-cassandra-0
kubectl delete pvc --namespace auctionw1i1 postgresql-postgresql-0
#kubectl delete pv weathervane-pv1
#kubectl delete pv weathervane-pv2
#kubectl delete pv weathervane-pv3
#kubectl delete sc local-storage

#kubectl create -f create-storage-class.yaml
#kubectl apply -f pv01.yaml
#kubectl apply -f pv02.yaml
#kubectl apply -f pv03.yaml



echo "" | tee -a $Z_DIR/ZOUT
echo "$ kubectl get sc --all-namespaces" | tee -a $Z_DIR/ZOUT
kubectl get sc --all-namespaces 2>&1 | tee -a $Z_DIR/ZOUT
echo "" | tee -a $Z_DIR/ZOUT

echo "$ kubectl get pv --all-namespaces" | tee -a $Z_DIR/ZOUT
kubectl get pv --all-namespaces 2>&1 | tee -a $Z_DIR/ZOUT
echo "" | tee -a $Z_DIR/ZOUT

echo "$ kubectl get pvc --all-namespaces" | tee -a $Z_DIR/ZOUT
kubectl get pvc --all-namespaces 2>&1 | tee -a $Z_DIR/ZOUT
echo "" | tee -a $Z_DIR/ZOUT


echo "" | tee -a $Z_DIR/ZOUT
echo "BEGIN OF WEATHERVANE PERL SCRIPT OUTPUT" | tee -a $Z_DIR/ZOUT


./runWeathervane.pl --skipPvTest --configFile=weathervane.config.k8s.quickstart --outputDir $Z_DIR/outDir --tmpDir $Z_DIR/tmpDir 2>&1 | tee -a $Z_DIR/ZOUT


echo "" | tee -a $Z_DIR/ZOUT
echo "END OF WEATHERVANE PERL SCRIPT OUTPUT" | tee -a $Z_DIR/ZOUT

echo "" | tee -a $Z_DIR/ZOUT
echo "$ kubectl get sc --all-namespaces" | tee -a $Z_DIR/ZOUT
kubectl get sc --all-namespaces 2>&1 | tee -a $Z_DIR/ZOUT
echo "" | tee -a $Z_DIR/ZOUT

echo "$ kubectl get pv --all-namespaces" | tee -a $Z_DIR/ZOUT
kubectl get pv --all-namespaces 2>&1 | tee -a $Z_DIR/ZOUT
echo "" | tee -a $Z_DIR/ZOUT

echo "$ kubectl get pvc --all-namespaces" | tee -a $Z_DIR/ZOUT
kubectl get pvc --all-namespaces 2>&1 | tee -a $Z_DIR/ZOUT
echo "" | tee -a $Z_DIR/ZOUT

mfm@wv04:/home/mfm/weathervane$ ./runWeathervane.pl --configFile=weathervane.config.k8s.quickstart
The kubeconfigFile /root/.kube/config must exist and be a regular file.
Usage: ./runWeathervane.pl [options] [-- parameters]

This script is used to run the Weathervane benchmark using the configuration specified in a configuration file.
It takes the following options:
--configFile: This specifies the configuration file used to control the Weathervane run.
              If this parameter is not a fully-qualified file name starting with a / then
              the location of the file is assumed to be relative to the directory in which
              this script was invoked.
              For a description of the Weathervane configuration file, please see the
              Weathervane User's Guide
              default value: weathervane.config
--version:    The version of Weathervane to use.  This will override the default version
              number to use for the Weathervane container images.
              default value: 2.1.1
--outputDir:  The directory in which to store the output from the Weathervane run.  You should
              use the same directory for all runs. Output is only placed in this directory
              at the end of a run.  The directory is created if it does not exist.
              If this parameter is not a fully-qualified file name starting with a / then
              the location of the file is assumed to be relative to the directory in which
              this script was invoked.
              default value: output
--tmpDir:     The directory in which to store temporary output created during the run.
              This information can be helpful when troubleshooting runs which do not complete
              properly.  The directory is created if it does not exist.
              If this parameter is not a fully-qualified file name starting with a / then
              the location of the file is assumed to be relative to the directory in which
              this script was invoked.
              default value: None.  If no value is specified the temporary files are stored
                             inside the Weathervane container.
--script:     The path to a script that should be run every scriptPeriod seconds.
              The script may be used to refresh the credentials in the kubeconfig file
              or to trigger external stats collection.
              If this parameter is not a fully-qualified file name starting with a / then
              the location of the file is assumed to be relative to the directory in which
              this script was invoked.
              default value: None.
--scriptPeriod: The frequency at which the script should be run in seconds.
              default value: 60
--mapSsh:     Causes the user's $HOME/.ssh directory to be mapped into the run harness container.
              This is only needed when collecting esxtop data, which requires passwordless ssh.
              default value: False
--accept:     Accepts the terms of the Weathervane license.  Useful when running this script
              from another script.  Only needs to be specified on the first run in a given directory.
              default value: None.  If no value is specified the user is prompted to accept the
                             license terms.
--skipPvTest: Causes the scipt to skip testing whether Weathervane can dynamically allocate
              persistant volumes in the storage classes defined in the configuration file.
              default value: False--help:       Displays this text.

To pass command-line parameters to the Weathervane run harness, enter them following two dashes
after the options.  For example, to stop the services from a previous run you would use:
./runWeathervane.pl --configFile=weathervane.config -- --stop
mfm@wv04:/home/mfm/weathervane$ vi z
mfm@wv04:/home/mfm/weathervane$ mfm@wv04:/home/mfm/weathervane$ ll
total 272
drwxrwxr-x 17 mfm mfm  4096 Aug 29 22:38 ./
drwxr-x---  7 mfm mfm  4096 Aug 29 22:38 ../
-rw-rw-r--  1 mfm mfm     0 Aug 29 22:33 .accept-weathervane
drwxrwxr-x  8 mfm mfm  4096 Aug 29 22:16 .git/
-rw-rw-r--  1 mfm mfm  2411 Aug 29 22:16 .gitignore
-rw-rw-r--  1 mfm mfm  2959 Aug 29 22:16 BRANCHING.md
-rw-rw-r--  1 mfm mfm   200 Aug 29 22:16 Branches.md
-rw-rw-r--  1 mfm mfm  5247 Aug 29 22:16 CODE-OF-CONDUCT.md
-rw-rw-r--  1 mfm mfm  9540 Aug 29 22:16 CONTRIBUTING.md
-rw-rw-r--  1 mfm mfm  4952 Aug 29 22:16 ISSUES.md
-rw-rw-r--  1 mfm mfm  1485 Aug 29 22:16 LICENSE.txt
-rw-rw-r--  1 mfm mfm   454 Aug 29 22:16 Notice.txt
-rw-rw-r--  1 mfm mfm  4585 Aug 29 22:16 README.md
drwxrwxr-x  3 mfm mfm  4096 Aug 29 22:16 auctionApp/
drwxrwxr-x  3 mfm mfm  4096 Aug 29 22:16 auctionAppServerWarmer/
drwxrwxr-x  3 mfm mfm  4096 Aug 29 22:16 auctionBidService/
drwxrwxr-x  3 mfm mfm  4096 Aug 29 22:16 auctionWeb/
-rw-rw-r--  1 mfm mfm 10152 Aug 29 22:16 build.gradle
-rwxrwxr-x  1 mfm mfm 13779 Aug 29 22:16 buildDockerImages.pl*
drwxrwxr-x  4 mfm mfm  4096 Aug 29 22:16 configFiles/
-rw-rw-r--  1 mfm mfm   433 Aug 29 22:22 create-persistent-vol.yaml
-rw-rw-r--  1 mfm mfm   152 Aug 29 22:23 create-storage-class.yaml
drwxrwxr-x  3 mfm mfm  4096 Aug 29 22:16 dbLoader/
drwxrwxr-x  8 mfm mfm  4096 Aug 29 22:16 doc/
drwxrwxr-x 14 mfm mfm  4096 Aug 29 22:16 dockerImages/
drwxrwxr-x  3 mfm mfm  4096 Aug 29 22:16 gradle/
-rw-rw-r--  1 mfm mfm    20 Aug 29 22:16 gradle.properties
-rwxrwxr-x  1 mfm mfm  5305 Aug 29 22:16 gradlew*
-rwxrwxr-x  1 mfm mfm  2185 Aug 29 22:16 gradlew.bat*
drwxrwxr-x  2 mfm mfm  4096 Aug 29 22:36 output/
drwxrwxr-x 14 mfm mfm  4096 Aug 29 22:16 runHarness/
-rwxrwxr-x  1 mfm mfm 20497 Aug 29 22:16 runWeathervane.pl*
-rwxrwxr-x  1 mfm mfm  2527 Aug 29 22:16 runmany.sh*
-rw-rw-r--  1 mfm mfm   145 Aug 29 22:16 settings.gradle
drwxrwxr-x  3 mfm mfm  4096 Aug 29 22:16 testing/
-rw-rw-r--  1 mfm mfm     6 Aug 29 22:16 version.txt
-rw-rw-r--  1 mfm mfm   708 Aug 29 22:16 weathervane.config.k8s.micro
-rw-rw-r--  1 mfm mfm   704 Aug 29 22:28 weathervane.config.k8s.quickstart
-rw-rw-r--  1 mfm mfm   721 Aug 29 22:16 weathervane.config.k8s.small2
-rwxrwxr-x  1 mfm mfm 42556 Aug 29 22:16 weathervane.pl*
-rw-rw-r--  1 mfm mfm     0 Aug 29 22:33 weathervaneResults.csv
drwxrwxr-x  3 mfm mfm  4096 Aug 29 22:16 workloadConfiguration/
drwxrwxr-x  3 mfm mfm  4096 Aug 29 22:16 workloadDriver/
-rw-rw-r--  1 mfm mfm  1907 Aug 29 22:32 z
mfm@wv04:/home/mfm/weathervane$ vi weathervane.config.k8s.quickstart


[1]+  Stopped                 vi weathervane.config.k8s.quickstart
mfm@wv04:/home/mfm/weathervane$ fg
vi weathervane.config.k8s.quickstart
mfm@wv04:/home/mfm/weathervane$ . z
Z_DIR=/tmp/220829224043
Error from server (NotFound): persistentvolumeclaims "cassandra-data-cassandra-0" not found
Error from server (NotFound): persistentvolumeclaims "postgresql-postgresql-0" not found

$ kubectl get sc --all-namespaces
NAME            PROVISIONER                    RECLAIMPOLICY   VOLUMEBINDINGMODE   ALLOWVOLUMEEXPANSION   AGE
local-storage   kubernetes.io/no-provisioner   Delete          Immediate           false                  17m

$ kubectl get pv --all-namespaces
NAME             CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS      CLAIM   STORAGECLASS    REASON   AGE
weathervane-pv   400Gi      RWO            Retain           Available           local-storage            18m

$ kubectl get pvc --all-namespaces
No resources found


BEGIN OF WEATHERVANE PERL SCRIPT OUTPUT
Starting Weathervane Run-Harness.  Pulling container image may take a few minutes.
Can't open docker logs pipe (docker logs --follow weathervane |) : No such file or directory

END OF WEATHERVANE PERL SCRIPT OUTPUT

$ kubectl get sc --all-namespaces
NAME            PROVISIONER                    RECLAIMPOLICY   VOLUMEBINDINGMODE   ALLOWVOLUMEEXPANSION   AGE
local-storage   kubernetes.io/no-provisioner   Delete          Immediate           false                  17m

$ kubectl get pv --all-namespaces
NAME             CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS      CLAIM   STORAGECLASS    REASON   AGE
weathervane-pv   400Gi      RWO            Retain           Available           local-storage            18m

$ kubectl get pvc --all-namespaces
No resources found

mfm@wv04:/home/mfm/weathervane$ . z
Z_DIR=/tmp/220829224054
Error from server (NotFound): persistentvolumeclaims "cassandra-data-cassandra-0" not found
Error from server (NotFound): persistentvolumeclaims "postgresql-postgresql-0" not found

$ kubectl get sc --all-namespaces
NAME            PROVISIONER                    RECLAIMPOLICY   VOLUMEBINDINGMODE   ALLOWVOLUMEEXPANSION   AGE
local-storage   kubernetes.io/no-provisioner   Delete          Immediate           false                  17m

$ kubectl get pv --all-namespaces
NAME             CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS      CLAIM   STORAGECLASS    REASON   AGE
weathervane-pv   400Gi      RWO            Retain           Available           local-storage            18m

$ kubectl get pvc --all-namespaces
No resources found


BEGIN OF WEATHERVANE PERL SCRIPT OUTPUT
Starting Weathervane Run-Harness.  Pulling container image may take a few minutes.
Can't open docker logs pipe (docker logs --follow weathervane |) : No such file or directory

END OF WEATHERVANE PERL SCRIPT OUTPUT

$ kubectl get sc --all-namespaces
NAME            PROVISIONER                    RECLAIMPOLICY   VOLUMEBINDINGMODE   ALLOWVOLUMEEXPANSION   AGE
local-storage   kubernetes.io/no-provisioner   Delete          Immediate           false                  17m

$ kubectl get pv --all-namespaces
NAME             CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS      CLAIM   STORAGECLASS    REASON   AGE
weathervane-pv   400Gi      RWO            Retain           Available           local-storage            18m

$ kubectl get pvc --all-namespaces
No resources found

mfm@wv04:/home/mfm/weathervane$ cat z

TS="$(date +%y%m%d%H%M%S)"
Z_DIR="/tmp/$TS"
mkdir -p $Z_DIR
echo "Z_DIR=$Z_DIR"
cp z $Z_DIR
cp weathervane.config.k8s.quickstart $Z_DIR
cp *.yaml $Z_DIR
cp runWeathervane.pl $Z_DIR


kubectl delete pvc --namespace auctionw1i1 cassandra-data-cassandra-0
kubectl delete pvc --namespace auctionw1i1 postgresql-postgresql-0
#kubectl delete pv weathervane-pv1
#kubectl delete pv weathervane-pv2
#kubectl delete pv weathervane-pv3
#kubectl delete sc local-storage

#kubectl create -f create-storage-class.yaml
#kubectl apply -f pv01.yaml
#kubectl apply -f pv02.yaml
#kubectl apply -f pv03.yaml



echo "" | tee -a $Z_DIR/ZOUT
echo "$ kubectl get sc --all-namespaces" | tee -a $Z_DIR/ZOUT
kubectl get sc --all-namespaces 2>&1 | tee -a $Z_DIR/ZOUT
echo "" | tee -a $Z_DIR/ZOUT

echo "$ kubectl get pv --all-namespaces" | tee -a $Z_DIR/ZOUT
kubectl get pv --all-namespaces 2>&1 | tee -a $Z_DIR/ZOUT
echo "" | tee -a $Z_DIR/ZOUT

echo "$ kubectl get pvc --all-namespaces" | tee -a $Z_DIR/ZOUT
kubectl get pvc --all-namespaces 2>&1 | tee -a $Z_DIR/ZOUT
echo "" | tee -a $Z_DIR/ZOUT


echo "" | tee -a $Z_DIR/ZOUT
echo "BEGIN OF WEATHERVANE PERL SCRIPT OUTPUT" | tee -a $Z_DIR/ZOUT


./runWeathervane.pl --skipPvTest --configFile=weathervane.config.k8s.quickstart --outputDir $Z_DIR/outDir --tmpDir $Z_DIR/tmpDir 2>&1 | tee -a $Z_DIR/ZOUT


echo "" | tee -a $Z_DIR/ZOUT
echo "END OF WEATHERVANE PERL SCRIPT OUTPUT" | tee -a $Z_DIR/ZOUT

echo "" | tee -a $Z_DIR/ZOUT
echo "$ kubectl get sc --all-namespaces" | tee -a $Z_DIR/ZOUT
kubectl get sc --all-namespaces 2>&1 | tee -a $Z_DIR/ZOUT
echo "" | tee -a $Z_DIR/ZOUT

echo "$ kubectl get pv --all-namespaces" | tee -a $Z_DIR/ZOUT
kubectl get pv --all-namespaces 2>&1 | tee -a $Z_DIR/ZOUT
echo "" | tee -a $Z_DIR/ZOUT

echo "$ kubectl get pvc --all-namespaces" | tee -a $Z_DIR/ZOUT
kubectl get pvc --all-namespaces 2>&1 | tee -a $Z_DIR/ZOUT
echo "" | tee -a $Z_DIR/ZOUT

mfm@wv04:/home/mfm/weathervane$
mfm@wv04:/home/mfm/weathervane$ history
    1  sudo snap install multipass
    2  multipass launch -c 4 -d 50G -m 8G -n node1
    3  multipass launch -c 4 -d 50G -m 8G -n node2
    4  multipass launch -c 4 -d 50G -m 8G -n node3
    5  multipass info --all
    6  multipass shell node1
    7  multipass shell node2
    8  multipass shell node3
    9  mkdir ~/.kube
   10  multipass copy-files mode1:.kube/config ~/.kube/
   11  multipass copy-files node1:.kube/config ~/.kube/
   12  sudo multipass copy-files node1:.kube/config ~/.kube/
   13  ll ~/.kube
   14  multipass copy-files node1:.kube/config ~/.kube/
   15  ll
   16  cd .kube
   17  ll
   18  ls
   19  ll
   20  multipass copy-files node1:.kube/config .
   21  sudo multipass copy-files node1:.kube/config .
   22  sudo multipass copy-files node1:.kube/config config
   23  touch config
   24  ll
   25  chmod 777 config
   26  sudo multipass copy-files node1:.kube/config config
   27  ll
   28  cd ..
   29  chmod 777 .kube
   30  ll
   31  cd kube
   32  cd .kube/
   33  ll
   34  multipass copy-files node1:.kube/config config
   35  cd
   36  sudo bash
   37  multipass shell node1
   38  cd .kube/
   39  ll
   40  chmod 600 config
   41  vi config
   42  kubectl get nodes
   43  cd
   44  sudo apt install kubectl
   45  multipass shell node1
   46  cat .kube/config
   47  sudo apt update
   48  sudo apt install -y apt-transport-https ca-certificates curl
   49  sudo curl -fsSLo /usr/share/keyrings/kubernetes-archive-keyring.gpg https://packages.cloud.google.com/apt/doc/apt-key.gpg
   50  echo "deb [signed-by=/usr/share/keyrings/kubernetes-archive-keyring.gpg] https://apt.kubernetes.io/ kubernetes-xenial main" | sudo tee /etc/apt/sources.list.d/kubernetes.list
   51  sudo apt update
   52  sudo apt install -y kubelet kubeadm kubectl
   53  kubectl get node
   54  kubectl describe node node2
   55  ll
   56  kubectl get pv
   57  kubectl get sc
   58  kubectl get pvc
   59  sudo mkdir -p /k8s/weathervane/vol
   60  sudo chmod -R 777 /k8s
   61  git clone http://github.com/vmware/weathervane
   62  cd weathervane/
   63  cat > create-persistent-vol.yaml << EOF
apiVersion: v1
kind: PersistentVolume
metadata:
  name: weathervane-pv
spec:
  capacity:
    storage: 400Gi
  accessModes:
  - ReadWriteOnce
  persistentVolumeReclaimPolicy: Retain
  storageClassName: local-storage
  local:
    path: /k8s/weathervane/vol
  nodeAffinity:
    required:
      nodeSelectorTerms:
      - matchExpressions:
        - key: kubernetes.io/hostname
          operator: In
          values:
          - node2
EOF

   64  kubectl create -f create-persistent-vol.yaml
   65  kubectl get pv
   66  cat > create-storage-class.yaml << EOF
kind: StorageClass
apiVersion: storage.k8s.io/v1
metadata:
  name: local-storage
provisioner: kubernetes.io/no-provisioner
volumeBindingMode: Immediate
EOF

   67  kubectl create -f create-storage-class.yaml
   68  kubectl get sc
   69  ll
   70  cp weathervane.config.k8s.micro weathervane.config.k8s.quickstart
   71  vi *.q*
   72  cat weathervane.config.k8s.quickstart
   73  vi z
   74  ll
   75  . z
   76  ll /tmp
   77  ll /tmp/220829223305
   78  cat z
   79  ./runWeathervane.pl --configFile=weathervane.config.k8s.quickstart
   80  vi z
   81  ll
   82  vi weathervane.config.k8s.quickstart
   83  fg
   84  . z
   85  cat z
   86  history
mfm@wv04:/home/mfm/weathervane$

