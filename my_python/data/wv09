Microsoft Windows [Version 10.0.19044.1889]
(c) Microsoft Corporation. All rights reserved.

C:\Users\mikmoran>ssh root@147.75.55.235
The authenticity of host '147.75.55.235 (147.75.55.235)' can't be established.
ECDSA key fingerprint is SHA256:17PCsj4CqVC331ebYMpB8YmXWJqv581Gn8GLeZYAYOw.
Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
Warning: Permanently added '147.75.55.235' (ECDSA) to the list of known hosts.
Welcome to Ubuntu 22.04.1 LTS (GNU/Linux 5.15.0-47-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

  System information as of Wed Sep  7 19:01:51 UTC 2022

  System load:            0.17333984375
  Usage of /:             1.3% of 218.00GB
  Memory usage:           1%
  Swap usage:             0%
  Processes:              544
  Users logged in:        0
  IPv4 address for bond0: 147.75.55.235
  IPv6 address for bond0: 2604:1380:4641:3b00::17

6 updates can be applied immediately.
6 of these updates are standard security updates.
To see these additional updates run: apt list --upgradable



The programs included with the Ubuntu system are free software;
the exact distribution terms for each program are described in the
individual files in /usr/share/doc/*/copyright.

Ubuntu comes with ABSOLUTELY NO WARRANTY, to the extent permitted by
applicable law.

root@wv09:~# useradd -s /bin/bash -d /home/ubuntu/ -m -G sudo ubuntu
root@wv09:~# passwd ubuntu
New password:
Retype new password:
passwd: password updated successfully
root@wv09:~# cp -r ~/.ssh /home/ubuntu/.ssh
root@wv09:~# chown -R ubuntu:ubuntu /home/ubuntu/.ssh
root@wv09:~# exit
logout
Connection to 147.75.55.235 closed.

C:\Users\mikmoran>ssh ubuntu@147.75.55.235
Welcome to Ubuntu 22.04.1 LTS (GNU/Linux 5.15.0-47-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

  System information as of Wed Sep  7 19:05:40 UTC 2022

  System load:            0.0205078125
  Usage of /:             1.3% of 218.00GB
  Memory usage:           1%
  Swap usage:             0%
  Processes:              496
  Users logged in:        0
  IPv4 address for bond0: 147.75.55.235
  IPv6 address for bond0: 2604:1380:4641:3b00::17


6 updates can be applied immediately.
6 of these updates are standard security updates.
To see these additional updates run: apt list --upgradable



The programs included with the Ubuntu system are free software;
the exact distribution terms for each program are described in the
individual files in /usr/share/doc/*/copyright.

Ubuntu comes with ABSOLUTELY NO WARRANTY, to the extent permitted by
applicable law.

To run a command as administrator (user "root"), use "sudo <command>".
See "man sudo_root" for details.

ubuntu@wv09:~$ uname -a
Linux wv09 5.15.0-47-generic #51-Ubuntu SMP Thu Aug 11 07:51:15 UTC 2022 x86_64 x86_64 x86_64 GNU/Linux
ubuntu@wv09:~$ sudo snap install multipass
[sudo] password for ubuntu:
Sorry, try again.
[sudo] password for ubuntu:
multipass 1.10.1 from Canonicalâœ“ installed
ubuntu@wv09:~$ multipass launch -c 8 -d 50G -m 8G -n node1
Launched: node1
ubuntu@wv09:~$ multipass shell node1
Welcome to Ubuntu 20.04.4 LTS (GNU/Linux 5.4.0-125-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

  System information as of Wed Sep  7 19:15:51 UTC 2022

  System load:  0.04              Processes:             183
  Usage of /:   2.8% of 48.27GB   Users logged in:       0
  Memory usage: 3%                IPv4 address for ens3: 10.26.45.13
  Swap usage:   0%


0 updates can be applied immediately.


The list of available updates is more than a week old.
To check for new updates run: sudo apt update
New release '22.04.1 LTS' available.
Run 'do-release-upgrade' to upgrade to it.


To run a command as administrator (user "root"), use "sudo <command>".
See "man sudo_root" for details.

ubuntu@node1:~$ uname -a
Linux node1 5.4.0-125-generic #141-Ubuntu SMP Wed Aug 10 13:42:03 UTC 2022 x86_64 x86_64 x86_64 GNU/Linux
ubuntu@node1:~$ sudo apt update
Hit:1 http://archive.ubuntu.com/ubuntu focal InRelease
Get:2 http://archive.ubuntu.com/ubuntu focal-updates InRelease [114 kB]
Get:3 http://security.ubuntu.com/ubuntu focal-security InRelease [114 kB]
Get:4 http://archive.ubuntu.com/ubuntu focal-backports InRelease [108 kB]
Get:5 http://archive.ubuntu.com/ubuntu focal/universe amd64 Packages [8628 kB]
Get:6 http://security.ubuntu.com/ubuntu focal-security/main amd64 Packages [1707 kB]
Get:7 http://archive.ubuntu.com/ubuntu focal/universe Translation-en [5124 kB]
Get:8 http://security.ubuntu.com/ubuntu focal-security/main Translation-en [286 kB]
Get:9 http://security.ubuntu.com/ubuntu focal-security/main amd64 c-n-f Metadata [11.0 kB]
Get:10 http://security.ubuntu.com/ubuntu focal-security/restricted amd64 Packages [1169 kB]
Get:11 http://security.ubuntu.com/ubuntu focal-security/restricted Translation-en [166 kB]
Get:12 http://security.ubuntu.com/ubuntu focal-security/universe amd64 Packages [717 kB]
Get:13 http://security.ubuntu.com/ubuntu focal-security/universe Translation-en [131 kB]
Get:14 http://security.ubuntu.com/ubuntu focal-security/universe amd64 c-n-f Metadata [14.8 kB]
Get:15 http://security.ubuntu.com/ubuntu focal-security/multiverse amd64 Packages [22.2 kB]
Get:16 http://security.ubuntu.com/ubuntu focal-security/multiverse Translation-en [5376 B]
Get:17 http://security.ubuntu.com/ubuntu focal-security/multiverse amd64 c-n-f Metadata [508 B]
Get:18 http://archive.ubuntu.com/ubuntu focal/universe amd64 c-n-f Metadata [265 kB]
Get:19 http://archive.ubuntu.com/ubuntu focal/multiverse amd64 Packages [144 kB]
Get:20 http://archive.ubuntu.com/ubuntu focal/multiverse Translation-en [104 kB]
Get:21 http://archive.ubuntu.com/ubuntu focal/multiverse amd64 c-n-f Metadata [9136 B]
Get:22 http://archive.ubuntu.com/ubuntu focal-updates/main amd64 Packages [2077 kB]
Get:23 http://archive.ubuntu.com/ubuntu focal-updates/main Translation-en [369 kB]
Get:24 http://archive.ubuntu.com/ubuntu focal-updates/main amd64 c-n-f Metadata [15.9 kB]
Get:25 http://archive.ubuntu.com/ubuntu focal-updates/restricted amd64 Packages [1256 kB]
Get:26 http://archive.ubuntu.com/ubuntu focal-updates/restricted Translation-en [178 kB]
Get:27 http://archive.ubuntu.com/ubuntu focal-updates/universe amd64 Packages [949 kB]
Get:28 http://archive.ubuntu.com/ubuntu focal-updates/universe Translation-en [216 kB]
Get:29 http://archive.ubuntu.com/ubuntu focal-updates/universe amd64 c-n-f Metadata [21.4 kB]
Get:30 http://archive.ubuntu.com/ubuntu focal-updates/multiverse amd64 Packages [24.4 kB]
Get:31 http://archive.ubuntu.com/ubuntu focal-updates/multiverse Translation-en [7336 B]
Get:32 http://archive.ubuntu.com/ubuntu focal-updates/multiverse amd64 c-n-f Metadata [588 B]
Get:33 http://archive.ubuntu.com/ubuntu focal-backports/main amd64 Packages [45.6 kB]
Get:34 http://archive.ubuntu.com/ubuntu focal-backports/main Translation-en [16.3 kB]
Get:35 http://archive.ubuntu.com/ubuntu focal-backports/main amd64 c-n-f Metadata [1420 B]
Get:36 http://archive.ubuntu.com/ubuntu focal-backports/restricted amd64 c-n-f Metadata [116 B]
Get:37 http://archive.ubuntu.com/ubuntu focal-backports/universe amd64 Packages [23.9 kB]
Get:38 http://archive.ubuntu.com/ubuntu focal-backports/universe Translation-en [16.0 kB]
Get:39 http://archive.ubuntu.com/ubuntu focal-backports/universe amd64 c-n-f Metadata [860 B]
Get:40 http://archive.ubuntu.com/ubuntu focal-backports/multiverse amd64 c-n-f Metadata [116 B]
Fetched 24.1 MB in 5s (5333 kB/s)
Reading package lists... Done
Building dependency tree
Reading state information... Done
12 packages can be upgraded. Run 'apt list --upgradable' to see them.
ubuntu@node1:~$ ifconfig | grep inet

Command 'ifconfig' not found, but can be installed with:

sudo apt install net-tools

ubuntu@node1:~$ sudo apt install net-tools
Reading package lists... Done
Building dependency tree
Reading state information... Done
The following NEW packages will be installed:
  net-tools
0 upgraded, 1 newly installed, 0 to remove and 12 not upgraded.
Need to get 196 kB of archives.
After this operation, 864 kB of additional disk space will be used.
Get:1 http://archive.ubuntu.com/ubuntu focal/main amd64 net-tools amd64 1.60+git20180626.aebd88e-1ubuntu1 [196 kB]
Fetched 196 kB in 0s (749 kB/s)
Selecting previously unselected package net-tools.
(Reading database ... 63818 files and directories currently installed.)
Preparing to unpack .../net-tools_1.60+git20180626.aebd88e-1ubuntu1_amd64.deb ...
Unpacking net-tools (1.60+git20180626.aebd88e-1ubuntu1) ...
Setting up net-tools (1.60+git20180626.aebd88e-1ubuntu1) ...
Processing triggers for man-db (2.9.1-1) ...
ubuntu@node1:~$ ifconfig | grep inet
        inet 10.26.45.13  netmask 255.255.255.0  broadcast 10.26.45.255
        inet6 fe80::5054:ff:fe92:13b8  prefixlen 64  scopeid 0x20<link>
        inet 127.0.0.1  netmask 255.0.0.0
        inet6 ::1  prefixlen 128  scopeid 0x10<host>
ubuntu@node1:~$ exit
logout
ubuntu@wv09:~$ multipass launch -c 8 -d 50G -m 8G -n node2
Launched: node2
ubuntu@wv09:~$ multipass shell node2
Welcome to Ubuntu 20.04.4 LTS (GNU/Linux 5.4.0-125-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

  System information as of Wed Sep  7 19:22:12 UTC 2022

  System load:  0.16              Processes:             186
  Usage of /:   2.8% of 48.27GB   Users logged in:       0
  Memory usage: 3%                IPv4 address for ens3: 10.26.45.123
  Swap usage:   0%


0 updates can be applied immediately.


The list of available updates is more than a week old.
To check for new updates run: sudo apt update
New release '22.04.1 LTS' available.
Run 'do-release-upgrade' to upgrade to it.


To run a command as administrator (user "root"), use "sudo <command>".
See "man sudo_root" for details.

ubuntu@node2:~$ uname -a
Linux node2 5.4.0-125-generic #141-Ubuntu SMP Wed Aug 10 13:42:03 UTC 2022 x86_64 x86_64 x86_64 GNU/Linux
ubuntu@node2:~$ sudo apt update
Hit:1 http://archive.ubuntu.com/ubuntu focal InRelease
Get:2 http://archive.ubuntu.com/ubuntu focal-updates InRelease [114 kB]
Get:3 http://security.ubuntu.com/ubuntu focal-security InRelease [114 kB]
Get:4 http://archive.ubuntu.com/ubuntu focal-backports InRelease [108 kB]
Get:5 http://archive.ubuntu.com/ubuntu focal/universe amd64 Packages [8628 kB]
Get:6 http://security.ubuntu.com/ubuntu focal-security/main amd64 Packages [1707 kB]
Get:7 http://archive.ubuntu.com/ubuntu focal/universe Translation-en [5124 kB]
Get:8 http://security.ubuntu.com/ubuntu focal-security/main Translation-en [286 kB]
Get:9 http://security.ubuntu.com/ubuntu focal-security/main amd64 c-n-f Metadata [11.0 kB]
Get:10 http://security.ubuntu.com/ubuntu focal-security/restricted amd64 Packages [1169 kB]
Get:11 http://archive.ubuntu.com/ubuntu focal/universe amd64 c-n-f Metadata [265 kB]
Get:12 http://archive.ubuntu.com/ubuntu focal/multiverse amd64 Packages [144 kB]
Get:13 http://archive.ubuntu.com/ubuntu focal/multiverse Translation-en [104 kB]
Get:14 http://archive.ubuntu.com/ubuntu focal/multiverse amd64 c-n-f Metadata [9136 B]
Get:15 http://archive.ubuntu.com/ubuntu focal-updates/main amd64 Packages [2077 kB]
Get:16 http://security.ubuntu.com/ubuntu focal-security/restricted Translation-en [166 kB]
Get:17 http://security.ubuntu.com/ubuntu focal-security/universe amd64 Packages [717 kB]
Get:18 http://archive.ubuntu.com/ubuntu focal-updates/main Translation-en [369 kB]
Get:19 http://archive.ubuntu.com/ubuntu focal-updates/main amd64 c-n-f Metadata [15.9 kB]
Get:20 http://archive.ubuntu.com/ubuntu focal-updates/restricted amd64 Packages [1256 kB]
Get:21 http://security.ubuntu.com/ubuntu focal-security/universe Translation-en [131 kB]
Get:22 http://security.ubuntu.com/ubuntu focal-security/universe amd64 c-n-f Metadata [14.8 kB]
Get:23 http://security.ubuntu.com/ubuntu focal-security/multiverse amd64 Packages [22.2 kB]
Get:24 http://security.ubuntu.com/ubuntu focal-security/multiverse Translation-en [5376 B]
Get:25 http://security.ubuntu.com/ubuntu focal-security/multiverse amd64 c-n-f Metadata [508 B]
Get:26 http://archive.ubuntu.com/ubuntu focal-updates/restricted Translation-en [178 kB]
Get:27 http://archive.ubuntu.com/ubuntu focal-updates/universe amd64 Packages [949 kB]
Get:28 http://archive.ubuntu.com/ubuntu focal-updates/universe Translation-en [216 kB]
Get:29 http://archive.ubuntu.com/ubuntu focal-updates/universe amd64 c-n-f Metadata [21.4 kB]
Get:30 http://archive.ubuntu.com/ubuntu focal-updates/multiverse amd64 Packages [24.4 kB]
Get:31 http://archive.ubuntu.com/ubuntu focal-updates/multiverse Translation-en [7336 B]
Get:32 http://archive.ubuntu.com/ubuntu focal-updates/multiverse amd64 c-n-f Metadata [588 B]
Get:33 http://archive.ubuntu.com/ubuntu focal-backports/main amd64 Packages [45.6 kB]
Get:34 http://archive.ubuntu.com/ubuntu focal-backports/main Translation-en [16.3 kB]
Get:35 http://archive.ubuntu.com/ubuntu focal-backports/main amd64 c-n-f Metadata [1420 B]
Get:36 http://archive.ubuntu.com/ubuntu focal-backports/restricted amd64 c-n-f Metadata [116 B]
Get:37 http://archive.ubuntu.com/ubuntu focal-backports/universe amd64 Packages [23.9 kB]
Get:38 http://archive.ubuntu.com/ubuntu focal-backports/universe Translation-en [16.0 kB]
Get:39 http://archive.ubuntu.com/ubuntu focal-backports/universe amd64 c-n-f Metadata [860 B]
Get:40 http://archive.ubuntu.com/ubuntu focal-backports/multiverse amd64 c-n-f Metadata [116 B]
Fetched 24.1 MB in 4s (6492 kB/s)
Reading package lists... Done
Building dependency tree
Reading state information... Done
12 packages can be upgraded. Run 'apt list --upgradable' to see them.
ubuntu@node2:~$ sudo apt install net-tools
Reading package lists... Done
Building dependency tree
Reading state information... Done
The following NEW packages will be installed:
  net-tools
0 upgraded, 1 newly installed, 0 to remove and 12 not upgraded.
Need to get 196 kB of archives.
After this operation, 864 kB of additional disk space will be used.
Get:1 http://archive.ubuntu.com/ubuntu focal/main amd64 net-tools amd64 1.60+git20180626.aebd88e-1ubuntu1 [196 kB]
Fetched 196 kB in 1s (303 kB/s)
Selecting previously unselected package net-tools.
(Reading database ... 63818 files and directories currently installed.)
Preparing to unpack .../net-tools_1.60+git20180626.aebd88e-1ubuntu1_amd64.deb ...
Unpacking net-tools (1.60+git20180626.aebd88e-1ubuntu1) ...
Setting up net-tools (1.60+git20180626.aebd88e-1ubuntu1) ...
Processing triggers for man-db (2.9.1-1) ...
ubuntu@node2:~$ ifconfig | grep inet
        inet 10.26.45.123  netmask 255.255.255.0  broadcast 10.26.45.255
        inet6 fe80::5054:ff:fe76:9cec  prefixlen 64  scopeid 0x20<link>
        inet 127.0.0.1  netmask 255.0.0.0
        inet6 ::1  prefixlen 128  scopeid 0x10<host>
ubuntu@node2:~$ exit
logout
ubuntu@wv09:~$ ifconfig | grep inet
        inet 147.75.55.235  netmask 255.255.255.254  broadcast 255.255.255.255
        inet6 2604:1380:4641:3b00::17  prefixlen 127  scopeid 0x0<global>
        inet6 fe80::faf2:1eff:fe80:62e0  prefixlen 64  scopeid 0x20<link>
        inet 10.70.29.151  netmask 255.255.255.254  broadcast 255.255.255.255
        inet 127.0.0.1  netmask 255.0.0.0
        inet6 ::1  prefixlen 128  scopeid 0x10<host>
        inet 10.26.45.1  netmask 255.255.255.0  broadcast 10.26.45.255
        inet6 fe80::5054:ff:fe49:5a84  prefixlen 64  scopeid 0x20<link>
        inet6 fe80::f0fe:e4ff:fe04:dc36  prefixlen 64  scopeid 0x20<link>
        inet6 fe80::33:d3ff:fe18:b29f  prefixlen 64  scopeid 0x20<link>
ubuntu@wv09:~$ ping -c 1 10.26.45.13
PING 10.26.45.13 (10.26.45.13) 56(84) bytes of data.
64 bytes from 10.26.45.13: icmp_seq=1 ttl=64 time=0.230 ms

--- 10.26.45.13 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.230/0.230/0.230/0.000 ms
ubuntu@wv09:~$ 10.26.45.123
10.26.45.123: command not found
ubuntu@wv09:~$ ping 10.26.45.123
PING 10.26.45.123 (10.26.45.123) 56(84) bytes of data.
64 bytes from 10.26.45.123: icmp_seq=1 ttl=64 time=0.142 ms
64 bytes from 10.26.45.123: icmp_seq=2 ttl=64 time=0.082 ms
^C
--- 10.26.45.123 ping statistics ---
2 packets transmitted, 2 received, 0% packet loss, time 1004ms
rtt min/avg/max/mdev = 0.082/0.112/0.142/0.030 ms
ubuntu@wv09:~$ ping -c 110.26.45.123
ping: invalid argument: '110.26.45.123'
ubuntu@wv09:~$ ping -c 1 10.26.45.123
PING 10.26.45.123 (10.26.45.123) 56(84) bytes of data.
64 bytes from 10.26.45.123: icmp_seq=1 ttl=64 time=0.099 ms

--- 10.26.45.123 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.099/0.099/0.099/0.000 ms
ubuntu@wv09:~$ sudo vi /etc/hosts
[sudo] password for ubuntu:
ubuntu@wv09:~$ ping -c 1 node1
PING node1 (10.26.45.13) 56(84) bytes of data.
64 bytes from node1 (10.26.45.13): icmp_seq=1 ttl=64 time=0.127 ms

--- node1 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.127/0.127/0.127/0.000 ms
ubuntu@wv09:~$ ping -c 1 node2
PING node2 (10.26.45.123) 56(84) bytes of data.
64 bytes from node2 (10.26.45.123): icmp_seq=1 ttl=64 time=0.139 ms

--- node2 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.139/0.139/0.139/0.000 ms
ubuntu@wv09:~$ multipass shell node1
Welcome to Ubuntu 20.04.4 LTS (GNU/Linux 5.4.0-125-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

  System information as of Wed Sep  7 19:30:49 UTC 2022

  System load:  0.0               Processes:             169
  Usage of /:   3.1% of 48.27GB   Users logged in:       0
  Memory usage: 3%                IPv4 address for ens3: 10.26.45.13
  Swap usage:   0%


12 updates can be applied immediately.
4 of these updates are standard security updates.
To see these additional updates run: apt list --upgradable

New release '22.04.1 LTS' available.
Run 'do-release-upgrade' to upgrade to it.


Last login: Wed Sep  7 19:15:51 2022 from 10.26.45.1
ubuntu@node1:~$ sudo vi /etc/hosts
ubuntu@node1:~$ sudo cat /etc/hosts
# Your system has configured 'manage_etc_hosts' as True.
# As a result, if you wish for changes to this file to persist
# then you will need to either
# a.) make changes to the master file in /etc/cloud/templates/hosts.debian.tmpl
# b.) change or remove the value of 'manage_etc_hosts' in
#     /etc/cloud/cloud.cfg or cloud-config from user-data
#
127.0.1.1 node1 node1
127.0.0.1 localhost
10.26.45.1 wv09
10.26.45.123 node2


# The following lines are desirable for IPv6 capable hosts
::1 localhost ip6-localhost ip6-loopback
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters

ubuntu@node1:~$ exit
logout
ubuntu@wv09:~$ multipass shell node2
Welcome to Ubuntu 20.04.4 LTS (GNU/Linux 5.4.0-125-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

  System information as of Wed Sep  7 19:32:22 UTC 2022

  System load:  0.0               Processes:             173
  Usage of /:   3.1% of 48.27GB   Users logged in:       0
  Memory usage: 3%                IPv4 address for ens3: 10.26.45.123
  Swap usage:   0%


12 updates can be applied immediately.
4 of these updates are standard security updates.
To see these additional updates run: apt list --upgradable

New release '22.04.1 LTS' available.
Run 'do-release-upgrade' to upgrade to it.


Last login: Wed Sep  7 19:22:12 2022 from 10.26.45.1
ubuntu@node2:~$ sudo vi /etc/hosts
ubuntu@node2:~$ ping -c 1 node1
PING node1 (10.26.45.13) 56(84) bytes of data.
64 bytes from node1 (10.26.45.13): icmp_seq=1 ttl=64 time=0.289 ms

--- node1 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.289/0.289/0.289/0.000 ms
ubuntu@node2:~$ ping -c 1 wv09
PING wv09 (10.26.45.1) 56(84) bytes of data.
64 bytes from wv09 (10.26.45.1): icmp_seq=1 ttl=64 time=0.080 ms

--- wv09 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.080/0.080/0.080/0.000 ms
ubuntu@node2:~$ exit
logout
ubuntu@wv09:~$ # STEP 2 from https://www.linuxtechi.com/install-kubernetes-on-ubuntu-22-04/
ubuntu@wv09:~$ sudo swapoff -a
ubuntu@wv09:~$ sudo cat /etc/fstab
UUID=4c262a22-1007-4381-9183-2e1d3b71b3da       /       ext4    errors=remount-ro       0       1
UUID=7a9eae24-082e-406d-aa31-81e8941bdfbd       none    swap    none    0       0

ubuntu@wv09:~$ sudo sed -i '/ swap / s/^\(.*\)$/#\1/g' /etc/fstab
ubuntu@wv09:~$ sudo cat /etc/fstab
UUID=4c262a22-1007-4381-9183-2e1d3b71b3da       /       ext4    errors=remount-ro       0       1
UUID=7a9eae24-082e-406d-aa31-81e8941bdfbd       none    swap    none    0       0

ubuntu@wv09:~$ sudo vi /etc/fstab
ubuntu@wv09:~$ sudo tee /etc/modules-load.d/containerd.conf <<EOF
> overlay
> br_netfilter
> EOF
overlay
br_netfilter
ubuntu@wv09:~$ sudo modprobe overlay
ubuntu@wv09:~$ sudo modprobe br_netfilter
ubuntu@wv09:~$ sudo tee /etc/sysctl.d/kubernetes.conf <<EOF
> net.bridge.bridge-nf-call-ip6tables = 1
> net.bridge.bridge-nf-call-iptables = 1
> net.ipv4.ip_forward = 1
> EOF
net.bridge.bridge-nf-call-ip6tables = 1
net.bridge.bridge-nf-call-iptables = 1
net.ipv4.ip_forward = 1
ubuntu@wv09:~$ sudo sysctl --system
* Applying /etc/sysctl.d/10-console-messages.conf ...
kernel.printk = 4 4 1 7
* Applying /etc/sysctl.d/10-ipv6-privacy.conf ...
net.ipv6.conf.all.use_tempaddr = 2
net.ipv6.conf.default.use_tempaddr = 2
* Applying /etc/sysctl.d/10-kernel-hardening.conf ...
kernel.kptr_restrict = 1
* Applying /etc/sysctl.d/10-magic-sysrq.conf ...
kernel.sysrq = 176
* Applying /etc/sysctl.d/10-network-security.conf ...
net.ipv4.conf.default.rp_filter = 2
net.ipv4.conf.all.rp_filter = 2
* Applying /etc/sysctl.d/10-ptrace.conf ...
kernel.yama.ptrace_scope = 1
* Applying /etc/sysctl.d/10-zeropage.conf ...
vm.mmap_min_addr = 65536
* Applying /usr/lib/sysctl.d/50-default.conf ...
kernel.core_uses_pid = 1
net.ipv4.conf.default.rp_filter = 2
net.ipv4.conf.default.accept_source_route = 0
sysctl: setting key "net.ipv4.conf.all.accept_source_route": Invalid argument
net.ipv4.conf.default.promote_secondaries = 1
sysctl: setting key "net.ipv4.conf.all.promote_secondaries": Invalid argument
net.ipv4.ping_group_range = 0 2147483647
net.core.default_qdisc = fq_codel
fs.protected_hardlinks = 1
fs.protected_symlinks = 1
fs.protected_regular = 1
fs.protected_fifos = 1
* Applying /usr/lib/sysctl.d/50-pid-max.conf ...
kernel.pid_max = 4194304
* Applying /etc/sysctl.d/99-cloudimg-ipv6.conf ...
net.ipv6.conf.all.use_tempaddr = 0
net.ipv6.conf.default.use_tempaddr = 0
* Applying /usr/lib/sysctl.d/99-protect-links.conf ...
fs.protected_fifos = 1
fs.protected_hardlinks = 1
fs.protected_regular = 2
fs.protected_symlinks = 1
* Applying /etc/sysctl.d/99-sysctl.conf ...
net.core.rmem_default = 12582912
net.core.wmem_default = 12582912
net.core.rmem_max = 12582912
net.core.wmem_max = 12582912
net.ipv4.tcp_rmem = 10240 87380 12582912
net.ipv4.tcp_wmem = 10240 87380 12582912
net.ipv4.tcp_congestion_control = westwood
* Applying /etc/sysctl.d/kubernetes.conf ...
net.bridge.bridge-nf-call-ip6tables = 1
net.bridge.bridge-nf-call-iptables = 1
net.ipv4.ip_forward = 1
* Applying /etc/sysctl.conf ...
net.core.rmem_default = 12582912
net.core.wmem_default = 12582912
net.core.rmem_max = 12582912
net.core.wmem_max = 12582912
net.ipv4.tcp_rmem = 10240 87380 12582912
net.ipv4.tcp_wmem = 10240 87380 12582912
net.ipv4.tcp_congestion_control = westwood
ubuntu@wv09:~$ multipass shell node1
Welcome to Ubuntu 20.04.4 LTS (GNU/Linux 5.4.0-125-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

  System information as of Wed Sep  7 19:38:14 UTC 2022

  System load:  0.0               Processes:             166
  Usage of /:   3.1% of 48.27GB   Users logged in:       0
  Memory usage: 3%                IPv4 address for ens3: 10.26.45.13
  Swap usage:   0%


12 updates can be applied immediately.
4 of these updates are standard security updates.
To see these additional updates run: apt list --upgradable

New release '22.04.1 LTS' available.
Run 'do-release-upgrade' to upgrade to it.


Last login: Wed Sep  7 19:30:50 2022 from 10.26.45.1
ubuntu@node1:~$ sudo swapoff -a
ubuntu@node1:~$ sudo cat /etc/fstab
LABEL=cloudimg-rootfs   /        ext4   defaults        0 1
LABEL=UEFI      /boot/efi       vfat    umask=0077      0 1
ubuntu@node1:~$ # no swap
ubuntu@node1:~$ sudo tee /etc/modules-load.d/containerd.conf <<EOF
> overlay
> br_netfilter
> EOF
overlay
br_netfilter
ubuntu@node1:~$ sudo modprobe overlay
ubuntu@node1:~$ sudo modprobe br_netfilter
ubuntu@node1:~$ sudo tee /etc/sysctl.d/kubernetes.conf <<EOF
> net.bridge.bridge-nf-call-ip6tables = 1
> net.bridge.bridge-nf-call-iptables = 1
> net.ipv4.ip_forward = 1
> EOF
net.bridge.bridge-nf-call-ip6tables = 1
net.bridge.bridge-nf-call-iptables = 1
net.ipv4.ip_forward = 1
ubuntu@node1:~$ sudo sysctl --system
* Applying /etc/sysctl.d/10-console-messages.conf ...
kernel.printk = 4 4 1 7
* Applying /etc/sysctl.d/10-ipv6-privacy.conf ...
net.ipv6.conf.all.use_tempaddr = 2
net.ipv6.conf.default.use_tempaddr = 2
* Applying /etc/sysctl.d/10-kernel-hardening.conf ...
kernel.kptr_restrict = 1
* Applying /etc/sysctl.d/10-link-restrictions.conf ...
fs.protected_hardlinks = 1
fs.protected_symlinks = 1
* Applying /etc/sysctl.d/10-magic-sysrq.conf ...
kernel.sysrq = 176
* Applying /etc/sysctl.d/10-network-security.conf ...
net.ipv4.conf.default.rp_filter = 2
net.ipv4.conf.all.rp_filter = 2
* Applying /etc/sysctl.d/10-ptrace.conf ...
kernel.yama.ptrace_scope = 1
* Applying /etc/sysctl.d/10-zeropage.conf ...
vm.mmap_min_addr = 65536
* Applying /usr/lib/sysctl.d/50-default.conf ...
net.ipv4.conf.default.promote_secondaries = 1
sysctl: setting key "net.ipv4.conf.all.promote_secondaries": Invalid argument
net.ipv4.ping_group_range = 0 2147483647
net.core.default_qdisc = fq_codel
fs.protected_regular = 1
fs.protected_fifos = 1
* Applying /usr/lib/sysctl.d/50-pid-max.conf ...
kernel.pid_max = 4194304
* Applying /etc/sysctl.d/99-cloudimg-ipv6.conf ...
net.ipv6.conf.all.use_tempaddr = 0
net.ipv6.conf.default.use_tempaddr = 0
* Applying /etc/sysctl.d/99-sysctl.conf ...
* Applying /etc/sysctl.d/kubernetes.conf ...
net.bridge.bridge-nf-call-ip6tables = 1
net.bridge.bridge-nf-call-iptables = 1
net.ipv4.ip_forward = 1
* Applying /usr/lib/sysctl.d/protect-links.conf ...
fs.protected_fifos = 1
fs.protected_hardlinks = 1
fs.protected_regular = 2
fs.protected_symlinks = 1
* Applying /etc/sysctl.conf ...
ubuntu@node1:~$ exit
logout
ubuntu@wv09:~$ multipass shell node2\
> ^C
ubuntu@wv09:~$ multipass shell node2
Welcome to Ubuntu 20.04.4 LTS (GNU/Linux 5.4.0-125-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

  System information as of Wed Sep  7 19:39:51 UTC 2022

  System load:  0.0               Processes:             169
  Usage of /:   3.1% of 48.27GB   Users logged in:       0
  Memory usage: 3%                IPv4 address for ens3: 10.26.45.123
  Swap usage:   0%


12 updates can be applied immediately.
4 of these updates are standard security updates.
To see these additional updates run: apt list --upgradable

New release '22.04.1 LTS' available.
Run 'do-release-upgrade' to upgrade to it.


Last login: Wed Sep  7 19:32:22 2022 from 10.26.45.1
ubuntu@node2:~$ sudo swapoff -a
ubuntu@node2:~$ sudo cat /etc/fstab
LABEL=cloudimg-rootfs   /        ext4   defaults        0 1
LABEL=UEFI      /boot/efi       vfat    umask=0077      0 1
ubuntu@node2:~$ # no swap
ubuntu@node2:~$ sudo tee /etc/modules-load.d/containerd.conf <<EOF
> overlay
> br_netfilter
> EOF
overlay
br_netfilter
ubuntu@node2:~$ sudo modprobe overlay
ubuntu@node2:~$ sudo modprobe br_netfilter
ubuntu@node2:~$ sudo tee /etc/sysctl.d/kubernetes.conf <<EOF
> net.bridge.bridge-nf-call-ip6tables = 1
4.ip_forward = 1
EOF> net.bridge.bridge-nf-call-iptables = 1
> net.ipv4.ip_forward = 1
> EOF
net.bridge.bridge-nf-call-ip6tables = 1
net.bridge.bridge-nf-call-iptables = 1
net.ipv4.ip_forward = 1
ubuntu@node2:~$ sudo sysctl --system
* Applying /etc/sysctl.d/10-console-messages.conf ...
kernel.printk = 4 4 1 7
* Applying /etc/sysctl.d/10-ipv6-privacy.conf ...
net.ipv6.conf.all.use_tempaddr = 2
net.ipv6.conf.default.use_tempaddr = 2
* Applying /etc/sysctl.d/10-kernel-hardening.conf ...
kernel.kptr_restrict = 1
* Applying /etc/sysctl.d/10-link-restrictions.conf ...
fs.protected_hardlinks = 1
fs.protected_symlinks = 1
* Applying /etc/sysctl.d/10-magic-sysrq.conf ...
kernel.sysrq = 176
* Applying /etc/sysctl.d/10-network-security.conf ...
net.ipv4.conf.default.rp_filter = 2
net.ipv4.conf.all.rp_filter = 2
* Applying /etc/sysctl.d/10-ptrace.conf ...
kernel.yama.ptrace_scope = 1
* Applying /etc/sysctl.d/10-zeropage.conf ...
vm.mmap_min_addr = 65536
* Applying /usr/lib/sysctl.d/50-default.conf ...
net.ipv4.conf.default.promote_secondaries = 1
sysctl: setting key "net.ipv4.conf.all.promote_secondaries": Invalid argument
net.ipv4.ping_group_range = 0 2147483647
net.core.default_qdisc = fq_codel
fs.protected_regular = 1
fs.protected_fifos = 1
* Applying /usr/lib/sysctl.d/50-pid-max.conf ...
kernel.pid_max = 4194304
* Applying /etc/sysctl.d/99-cloudimg-ipv6.conf ...
net.ipv6.conf.all.use_tempaddr = 0
net.ipv6.conf.default.use_tempaddr = 0
* Applying /etc/sysctl.d/99-sysctl.conf ...
* Applying /etc/sysctl.d/kubernetes.conf ...
net.bridge.bridge-nf-call-ip6tables = 1
net.bridge.bridge-nf-call-iptables = 1
net.ipv4.ip_forward = 1
* Applying /usr/lib/sysctl.d/protect-links.conf ...
fs.protected_fifos = 1
fs.protected_hardlinks = 1
fs.protected_regular = 2
fs.protected_symlinks = 1
* Applying /etc/sysctl.conf ...
ubuntu@node2:~$ exit
logout
ubuntu@wv09:~$ # STEP 3 from https://www.linuxtechi.com/install-kubernetes-on-ubuntu-22-04/
ubuntu@wv09:~$ sudo apt install -y curl gnupg2 software-properties-common apt-transport-https ca-certificates
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
ca-certificates is already the newest version (20211016).
ca-certificates set to manually installed.
curl is already the newest version (7.81.0-1ubuntu1.3).
curl set to manually installed.
software-properties-common is already the newest version (0.99.22.3).
software-properties-common set to manually installed.
apt-transport-https is already the newest version (2.4.7).
The following NEW packages will be installed:
  gnupg2
0 upgraded, 1 newly installed, 0 to remove and 4 not upgraded.
Need to get 5548 B of archives.
After this operation, 52.2 kB of additional disk space will be used.
Get:1 http://archive.ubuntu.com/ubuntu jammy-updates/universe amd64 gnupg2 all 2.2.27-3ubuntu2.1 [5548 B]
Fetched 5548 B in 1s (8895 B/s)
Selecting previously unselected package gnupg2.
(Reading database ... 75031 files and directories currently installed.)
Preparing to unpack .../gnupg2_2.2.27-3ubuntu2.1_all.deb ...
Unpacking gnupg2 (2.2.27-3ubuntu2.1) ...
Setting up gnupg2 (2.2.27-3ubuntu2.1) ...
Processing triggers for man-db (2.10.2-1) ...
Scanning processes...
Scanning processor microcode...
Scanning linux images...

Running kernel seems to be up-to-date.

The processor microcode seems to be up-to-date.

No services need to be restarted.

No containers need to be restarted.

No user sessions are running outdated binaries.

No VM guests are running outdated hypervisor (qemu) binaries on this host.
ubuntu@wv09:~$ sudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmour -o /etc/apt/trusted.gpg.d/docker.gpg
ubuntu@wv09:~$ sudo add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable"
Repository: 'deb [arch=amd64] https://download.docker.com/linux/ubuntu jammy stable'
Description:
Archive for codename: jammy components: stable
More info: https://download.docker.com/linux/ubuntu
Adding repository.
Press [ENTER] to continue or Ctrl-c to cancel.
Adding deb entry to /etc/apt/sources.list.d/archive_uri-https_download_docker_com_linux_ubuntu-jammy.list
Adding disabled deb-src entry to /etc/apt/sources.list.d/archive_uri-https_download_docker_com_linux_ubuntu-jammy.list
Get:1 https://download.docker.com/linux/ubuntu jammy InRelease [48.9 kB]
Get:2 https://download.docker.com/linux/ubuntu jammy/stable amd64 Packages [6439 B]
Hit:3 http://archive.ubuntu.com/ubuntu jammy InRelease
Get:4 http://security.ubuntu.com/ubuntu jammy-security InRelease [110 kB]
Get:5 http://archive.ubuntu.com/ubuntu jammy-updates InRelease [114 kB]
Get:6 http://security.ubuntu.com/ubuntu jammy-security/main amd64 Packages [295 kB]
Get:7 http://archive.ubuntu.com/ubuntu jammy-backports InRelease [99.8 kB]
Get:8 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 Packages [544 kB]
Get:9 http://security.ubuntu.com/ubuntu jammy-security/main Translation-en [69.1 kB]
Get:10 http://security.ubuntu.com/ubuntu jammy-security/restricted amd64 Packages [274 kB]
Get:11 http://security.ubuntu.com/ubuntu jammy-security/restricted Translation-en [42.3 kB]
Get:12 http://archive.ubuntu.com/ubuntu jammy-updates/main Translation-en [129 kB]
Get:13 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 c-n-f Metadata [8168 B]
Get:14 http://archive.ubuntu.com/ubuntu jammy-updates/restricted amd64 Packages [306 kB]
Get:15 http://archive.ubuntu.com/ubuntu jammy-updates/restricted Translation-en [47.5 kB]
Get:16 http://archive.ubuntu.com/ubuntu jammy-updates/universe amd64 Packages [254 kB]
Get:17 http://archive.ubuntu.com/ubuntu jammy-updates/universe Translation-en [83.3 kB]
Fetched 2431 kB in 1s (1712 kB/s)
Reading package lists... Done
ubuntu@wv09:~$ sudo apt update
Hit:1 https://download.docker.com/linux/ubuntu jammy InRelease
Hit:2 http://archive.ubuntu.com/ubuntu jammy InRelease
Hit:3 http://archive.ubuntu.com/ubuntu jammy-updates InRelease
Hit:4 http://security.ubuntu.com/ubuntu jammy-security InRelease
Hit:5 http://archive.ubuntu.com/ubuntu jammy-backports InRelease
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
9 packages can be upgraded. Run 'apt list --upgradable' to see them.
ubuntu@wv09:~$ sudo apt install -y containerd.io
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
The following NEW packages will be installed:
  containerd.io
0 upgraded, 1 newly installed, 0 to remove and 9 not upgraded.
Need to get 28.1 MB of archives.
After this operation, 127 MB of additional disk space will be used.
Get:1 https://download.docker.com/linux/ubuntu jammy/stable amd64 containerd.io amd64 1.6.8-1 [28.1 MB]
Fetched 28.1 MB in 0s (85.0 MB/s)
Selecting previously unselected package containerd.io.
(Reading database ... 75037 files and directories currently installed.)
Preparing to unpack .../containerd.io_1.6.8-1_amd64.deb ...
Unpacking containerd.io (1.6.8-1) ...
Setting up containerd.io (1.6.8-1) ...
Created symlink /etc/systemd/system/multi-user.target.wants/containerd.service â†’ /lib/systemd/system/containerd.service.
Processing triggers for man-db (2.10.2-1) ...
Scanning processes...
Scanning processor microcode...
Scanning linux images...

Running kernel seems to be up-to-date.

The processor microcode seems to be up-to-date.

No services need to be restarted.

No containers need to be restarted.

No user sessions are running outdated binaries.

No VM guests are running outdated hypervisor (qemu) binaries on this host.
ubuntu@wv09:~$ containerd config default | sudo tee /etc/containerd/config.toml >/dev/null 2>&1
ubuntu@wv09:~$ sudo sed -i 's/SystemdCgroup \= false/SystemdCgroup \= true/g' /etc/containerd/config.toml
ubuntu@wv09:~$ sudo grep SystemdCgroup /etc/containerd/config.toml
            SystemdCgroup = true
ubuntu@wv09:~$ sudo systemctl restart containerd
ubuntu@wv09:~$ sudo systemctl enable containerd
ubuntu@wv09:~$ multipass shell node1
Welcome to Ubuntu 20.04.4 LTS (GNU/Linux 5.4.0-125-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

  System information as of Wed Sep  7 19:45:57 UTC 2022

  System load:  0.0               Processes:             170
  Usage of /:   3.1% of 48.27GB   Users logged in:       0
  Memory usage: 3%                IPv4 address for ens3: 10.26.45.13
  Swap usage:   0%


12 updates can be applied immediately.
4 of these updates are standard security updates.
To see these additional updates run: apt list --upgradable

New release '22.04.1 LTS' available.
Run 'do-release-upgrade' to upgrade to it.


Last login: Wed Sep  7 19:38:14 2022 from 10.26.45.1
ubuntu@node1:~$ sudo apt install -y curl gnupg2 software-properties-common apt-transport-https ca-certificates
Reading package lists... Done
Building dependency tree
Reading state information... Done
ca-certificates is already the newest version (20211016~20.04.1).
ca-certificates set to manually installed.
software-properties-common is already the newest version (0.99.9.8).
software-properties-common set to manually installed.
The following additional packages will be installed:
  libcurl4
The following NEW packages will be installed:
  apt-transport-https gnupg2
The following packages will be upgraded:
  curl libcurl4
2 upgraded, 2 newly installed, 0 to remove and 10 not upgraded.
Need to get 403 kB of archives.
After this operation, 213 kB of additional disk space will be used.
Get:1 http://archive.ubuntu.com/ubuntu focal-updates/universe amd64 apt-transport-https all 2.0.9 [1704 B]
Get:2 http://archive.ubuntu.com/ubuntu focal-updates/main amd64 curl amd64 7.68.0-1ubuntu2.13 [161 kB]
Get:3 http://archive.ubuntu.com/ubuntu focal-updates/main amd64 libcurl4 amd64 7.68.0-1ubuntu2.13 [235 kB]
Get:4 http://archive.ubuntu.com/ubuntu focal-updates/universe amd64 gnupg2 all 2.2.19-3ubuntu2.2 [5316 B]
Fetched 403 kB in 1s (431 kB/s)
Selecting previously unselected package apt-transport-https.
(Reading database ... 63867 files and directories currently installed.)
Preparing to unpack .../apt-transport-https_2.0.9_all.deb ...
Unpacking apt-transport-https (2.0.9) ...
Preparing to unpack .../curl_7.68.0-1ubuntu2.13_amd64.deb ...
Unpacking curl (7.68.0-1ubuntu2.13) over (7.68.0-1ubuntu2.12) ...
Preparing to unpack .../libcurl4_7.68.0-1ubuntu2.13_amd64.deb ...
Unpacking libcurl4:amd64 (7.68.0-1ubuntu2.13) over (7.68.0-1ubuntu2.12) ...
Selecting previously unselected package gnupg2.
Preparing to unpack .../gnupg2_2.2.19-3ubuntu2.2_all.deb ...
Unpacking gnupg2 (2.2.19-3ubuntu2.2) ...
Setting up gnupg2 (2.2.19-3ubuntu2.2) ...
Setting up apt-transport-https (2.0.9) ...
Setting up libcurl4:amd64 (7.68.0-1ubuntu2.13) ...
Setting up curl (7.68.0-1ubuntu2.13) ...
Processing triggers for man-db (2.9.1-1) ...
Processing triggers for libc-bin (2.31-0ubuntu9.9) ...
ubuntu@node1:~$ sudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmour -o /etc/apt/trusted.gpg.d/docker.gpg
ubuntu@node1:~$ sudo add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable"
Get:1 https://download.docker.com/linux/ubuntu focal InRelease [57.7 kB]
Get:2 https://download.docker.com/linux/ubuntu focal/stable amd64 Packages [17.9 kB]
Hit:3 http://archive.ubuntu.com/ubuntu focal InRelease
Hit:4 http://security.ubuntu.com/ubuntu focal-security InRelease
Hit:5 http://archive.ubuntu.com/ubuntu focal-updates InRelease
Hit:6 http://archive.ubuntu.com/ubuntu focal-backports InRelease
Fetched 75.6 kB in 0s (154 kB/s)
Reading package lists... Done
ubuntu@node1:~$ sudo apt update
Hit:1 https://download.docker.com/linux/ubuntu focal InRelease
Hit:2 http://security.ubuntu.com/ubuntu focal-security InRelease
Hit:3 http://archive.ubuntu.com/ubuntu focal InRelease
Hit:4 http://archive.ubuntu.com/ubuntu focal-updates InRelease
Hit:5 http://archive.ubuntu.com/ubuntu focal-backports InRelease
Reading package lists... Done
Building dependency tree
Reading state information... Done
10 packages can be upgraded. Run 'apt list --upgradable' to see them.
ubuntu@node1:~$ sudo apt install -y containerd.io
Reading package lists... Done
Building dependency tree
Reading state information... Done
The following NEW packages will be installed:
  containerd.io
0 upgraded, 1 newly installed, 0 to remove and 10 not upgraded.
Need to get 28.1 MB of archives.
After this operation, 127 MB of additional disk space will be used.
Get:1 https://download.docker.com/linux/ubuntu focal/stable amd64 containerd.io amd64 1.6.8-1 [28.1 MB]
Fetched 28.1 MB in 2s (16.7 MB/s)
Selecting previously unselected package containerd.io.
(Reading database ... 63877 files and directories currently installed.)
Preparing to unpack .../containerd.io_1.6.8-1_amd64.deb ...
Unpacking containerd.io (1.6.8-1) ...
Setting up containerd.io (1.6.8-1) ...
Created symlink /etc/systemd/system/multi-user.target.wants/containerd.service â†’ /lib/systemd/system/containerd.service.
Processing triggers for man-db (2.9.1-1) ...
ubuntu@node1:~$ containerd config default | sudo tee /etc/containerd/config.toml >/dev/null 2>&1
ubuntu@node1:~$ sudo sed -i 's/SystemdCgroup \= false/SystemdCgroup \= true/g' /etc/containerd/config.toml
ubuntu@node1:~$ sudo grep SystemdCgroup /etc/containerd/config.toml
            SystemdCgroup = true
ubuntu@node1:~$  sudo systemctl restart containerd
ubuntu@node1:~$ sudo systemctl enable containerd
ubuntu@node1:~$ exit
logout
ubuntu@wv09:~$ multipass shell node2
Welcome to Ubuntu 20.04.4 LTS (GNU/Linux 5.4.0-125-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

  System information as of Wed Sep  7 19:48:06 UTC 2022

  System load:  0.0               Processes:             168
  Usage of /:   3.1% of 48.27GB   Users logged in:       0
  Memory usage: 3%                IPv4 address for ens3: 10.26.45.123
  Swap usage:   0%


12 updates can be applied immediately.
4 of these updates are standard security updates.
To see these additional updates run: apt list --upgradable

New release '22.04.1 LTS' available.
Run 'do-release-upgrade' to upgrade to it.


Last login: Wed Sep  7 19:39:52 2022 from 10.26.45.1
ubuntu@node2:~$ sudo apt install -y curl gnupg2 software-properties-common apt-transport-https ca-certificates
Reading package lists... Done
Building dependency tree
Reading state information... Done
ca-certificates is already the newest version (20211016~20.04.1).
ca-certificates set to manually installed.
software-properties-common is already the newest version (0.99.9.8).
software-properties-common set to manually installed.
The following additional packages will be installed:
  libcurl4
The following NEW packages will be installed:
  apt-transport-https gnupg2
The following packages will be upgraded:
  curl libcurl4
2 upgraded, 2 newly installed, 0 to remove and 10 not upgraded.
Need to get 403 kB of archives.
After this operation, 213 kB of additional disk space will be used.
Get:1 http://archive.ubuntu.com/ubuntu focal-updates/universe amd64 apt-transport-https all 2.0.9 [1704 B]
Get:2 http://archive.ubuntu.com/ubuntu focal-updates/main amd64 curl amd64 7.68.0-1ubuntu2.13 [161 kB]
Get:3 http://archive.ubuntu.com/ubuntu focal-updates/main amd64 libcurl4 amd64 7.68.0-1ubuntu2.13 [235 kB]
Get:4 http://archive.ubuntu.com/ubuntu focal-updates/universe amd64 gnupg2 all 2.2.19-3ubuntu2.2 [5316 B]
Fetched 403 kB in 0s (871 kB/s)
Selecting previously unselected package apt-transport-https.
(Reading database ... 63867 files and directories currently installed.)
Preparing to unpack .../apt-transport-https_2.0.9_all.deb ...
Unpacking apt-transport-https (2.0.9) ...
Preparing to unpack .../curl_7.68.0-1ubuntu2.13_amd64.deb ...
Unpacking curl (7.68.0-1ubuntu2.13) over (7.68.0-1ubuntu2.12) ...
Preparing to unpack .../libcurl4_7.68.0-1ubuntu2.13_amd64.deb ...
Unpacking libcurl4:amd64 (7.68.0-1ubuntu2.13) over (7.68.0-1ubuntu2.12) ...
Selecting previously unselected package gnupg2.
Preparing to unpack .../gnupg2_2.2.19-3ubuntu2.2_all.deb ...
Unpacking gnupg2 (2.2.19-3ubuntu2.2) ...
Setting up gnupg2 (2.2.19-3ubuntu2.2) ...
Setting up apt-transport-https (2.0.9) ...
Setting up libcurl4:amd64 (7.68.0-1ubuntu2.13) ...
Setting up curl (7.68.0-1ubuntu2.13) ...
Processing triggers for man-db (2.9.1-1) ...
Processing triggers for libc-bin (2.31-0ubuntu9.9) ...
ubuntu@node2:~$ sudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmour -o /etc/apt/trusted.gpg.d/docker.gpg
ubuntu@node2:~$ sudo add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable"
Get:1 https://download.docker.com/linux/ubuntu focal InRelease [57.7 kB]
Get:2 https://download.docker.com/linux/ubuntu focal/stable amd64 Packages [17.9 kB]
Hit:3 http://security.ubuntu.com/ubuntu focal-security InRelease
Hit:4 http://archive.ubuntu.com/ubuntu focal InRelease
Hit:5 http://archive.ubuntu.com/ubuntu focal-updates InRelease
Hit:6 http://archive.ubuntu.com/ubuntu focal-backports InRelease
Fetched 75.6 kB in 0s (154 kB/s)
Reading package lists... Done
ubuntu@node2:~$ sudo apt update
Hit:1 https://download.docker.com/linux/ubuntu focal InRelease
Hit:2 http://security.ubuntu.com/ubuntu focal-security InRelease
Hit:3 http://archive.ubuntu.com/ubuntu focal InRelease
Hit:4 http://archive.ubuntu.com/ubuntu focal-updates InRelease
Hit:5 http://archive.ubuntu.com/ubuntu focal-backports InRelease
Reading package lists... Done
Building dependency tree
Reading state information... Done
10 packages can be upgraded. Run 'apt list --upgradable' to see them.
ubuntu@node2:~$ sudo apt install -y containerd.io
Reading package lists... Done
Building dependency tree
Reading state information... Done
The following NEW packages will be installed:
  containerd.io
0 upgraded, 1 newly installed, 0 to remove and 10 not upgraded.
Need to get 28.1 MB of archives.
After this operation, 127 MB of additional disk space will be used.
Get:1 https://download.docker.com/linux/ubuntu focal/stable amd64 containerd.io amd64 1.6.8-1 [28.1 MB]
Fetched 28.1 MB in 2s (18.6 MB/s)
Selecting previously unselected package containerd.io.
(Reading database ... 63877 files and directories currently installed.)
Preparing to unpack .../containerd.io_1.6.8-1_amd64.deb ...
Unpacking containerd.io (1.6.8-1) ...
Setting up containerd.io (1.6.8-1) ...
Created symlink /etc/systemd/system/multi-user.target.wants/containerd.service â†’ /lib/systemd/system/containerd.service.
Processing triggers for man-db (2.9.1-1) ...
ubuntu@node2:~$  containerd config default | sudo tee /etc/containerd/config.toml >/dev/null 2>&1
ubuntu@node2:~$ sudo sed -i 's/SystemdCgroup \= false/SystemdCgroup \= true/g' /etc/containerd/config.toml
ubuntu@node2:~$ sudo systemctl restart containerd
ubuntu@node2:~$ sudo systemctl enable containerd
ubuntu@node2:~$ exit
logout
ubuntu@wv09:~$ # STEP 4 https://www.linuxtechi.com/install-kubernetes-on-ubuntu-22-04/
ubuntu@wv09:~$ curl -s https://packages.cloud.google.com/apt/doc/apt-key.gpg | sudo apt-key add -
Warning: apt-key is deprecated. Manage keyring files in trusted.gpg.d instead (see apt-key(8)).
OK
ubuntu@wv09:~$ sudo apt-add-repository "deb http://apt.kubernetes.io/ kubernetes-xenial main"
Repository: 'deb http://apt.kubernetes.io/ kubernetes-xenial main'
Description:
Archive for codename: kubernetes-xenial components: main
More info: http://apt.kubernetes.io/
Adding repository.
Press [ENTER] to continue or Ctrl-c to cancel.
Adding deb entry to /etc/apt/sources.list.d/archive_uri-http_apt_kubernetes_io_-jammy.list
Adding disabled deb-src entry to /etc/apt/sources.list.d/archive_uri-http_apt_kubernetes_io_-jammy.list
Hit:2 https://download.docker.com/linux/ubuntu jammy InRelease
Get:1 https://packages.cloud.google.com/apt kubernetes-xenial InRelease [9383 B]
Hit:3 http://archive.ubuntu.com/ubuntu jammy InRelease
Get:4 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 Packages [58.4 kB]
Hit:5 http://archive.ubuntu.com/ubuntu jammy-updates InRelease
Hit:6 http://security.ubuntu.com/ubuntu jammy-security InRelease
Hit:7 http://archive.ubuntu.com/ubuntu jammy-backports InRelease
Fetched 67.8 kB in 1s (124 kB/s)
Reading package lists... Done
W: http://apt.kubernetes.io/dists/kubernetes-xenial/InRelease: Key is stored in legacy trusted.gpg keyring (/etc/apt/trusted.gpg), see the DEPRECATION section in apt-key(8) for details.
ubuntu@wv09:~$ multipass shell node1
Welcome to Ubuntu 20.04.4 LTS (GNU/Linux 5.4.0-125-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

  System information as of Wed Sep  7 19:51:59 UTC 2022

  System load:  0.0               Processes:             181
  Usage of /:   3.4% of 48.27GB   Users logged in:       0
  Memory usage: 4%                IPv4 address for ens3: 10.26.45.13
  Swap usage:   0%


10 updates can be applied immediately.
2 of these updates are standard security updates.
To see these additional updates run: apt list --upgradable

New release '22.04.1 LTS' available.
Run 'do-release-upgrade' to upgrade to it.


Last login: Wed Sep  7 19:45:57 2022 from 10.26.45.1
ubuntu@node1:~$ curl -s https://packages.cloud.google.com/apt/doc/apt-key.gpg | sudo apt-key add -
OK
ubuntu@node1:~$ sudo apt-add-repository "deb http://apt.kubernetes.io/ kubernetes-xenial main"
Hit:1 https://download.docker.com/linux/ubuntu focal InRelease
Hit:3 http://security.ubuntu.com/ubuntu focal-security InRelease
Get:2 https://packages.cloud.google.com/apt kubernetes-xenial InRelease [9383 B]
Hit:4 http://archive.ubuntu.com/ubuntu focal InRelease
Get:5 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 Packages [58.4 kB]
Hit:6 http://archive.ubuntu.com/ubuntu focal-updates InRelease
Hit:7 http://archive.ubuntu.com/ubuntu focal-backports InRelease
Fetched 67.8 kB in 1s (112 kB/s)
Reading package lists... Done
ubuntu@node1:~$ exit
logout
ubuntu@wv09:~$ multipass shell node2
Welcome to Ubuntu 20.04.4 LTS (GNU/Linux 5.4.0-125-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

  System information as of Wed Sep  7 19:52:27 UTC 2022

  System load:  0.0               Processes:             175
  Usage of /:   3.4% of 48.27GB   Users logged in:       0
  Memory usage: 4%                IPv4 address for ens3: 10.26.45.123
  Swap usage:   0%

 * Super-optimized for small spaces - read how we shrank the memory
   footprint of MicroK8s to make it the smallest full K8s around.

   https://ubuntu.com/blog/microk8s-memory-optimisation

10 updates can be applied immediately.
2 of these updates are standard security updates.
To see these additional updates run: apt list --upgradable

New release '22.04.1 LTS' available.
Run 'do-release-upgrade' to upgrade to it.


Last login: Wed Sep  7 19:48:06 2022 from 10.26.45.1
ubuntu@node2:~$ curl -s https://packages.cloud.google.com/apt/doc/apt-key.gpg | sudo apt-key add -
OK
ubuntu@node2:~$ sudo apt-add-repository "deb http://apt.kubernetes.io/ kubernetes-xenial main"
Hit:1 https://download.docker.com/linux/ubuntu focal InRelease
Get:2 https://packages.cloud.google.com/apt kubernetes-xenial InRelease [9383 B]
Hit:3 http://archive.ubuntu.com/ubuntu focal InRelease
Hit:4 http://security.ubuntu.com/ubuntu focal-security InRelease
Hit:5 http://archive.ubuntu.com/ubuntu focal-updates InRelease
Get:6 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 Packages [58.4 kB]
Hit:7 http://archive.ubuntu.com/ubuntu focal-backports InRelease
Fetched 67.8 kB in 0s (140 kB/s)
Reading package lists... Done
ubuntu@node2:~$ exit
logout
ubuntu@wv09:~$ # STEP 5 https://www.linuxtechi.com/install-kubernetes-on-ubuntu-22-04/
ubuntu@wv09:~$ sudo apt update
Hit:2 https://download.docker.com/linux/ubuntu jammy InRelease
Hit:1 https://packages.cloud.google.com/apt kubernetes-xenial InRelease
Hit:3 http://archive.ubuntu.com/ubuntu jammy InRelease
Hit:4 http://security.ubuntu.com/ubuntu jammy-security InRelease
Hit:5 http://archive.ubuntu.com/ubuntu jammy-updates InRelease
Hit:6 http://archive.ubuntu.com/ubuntu jammy-backports InRelease
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
9 packages can be upgraded. Run 'apt list --upgradable' to see them.
W: http://apt.kubernetes.io/dists/kubernetes-xenial/InRelease: Key is stored in legacy trusted.gpg keyring (/etc/apt/trusted.gpg), see the DEPRECATION section in apt-key(8) for details.
ubuntu@wv09:~$ sudo apt install -y kubelet kubeadm kubectl
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
The following additional packages will be installed:
  conntrack cri-tools ebtables kubernetes-cni socat
The following NEW packages will be installed:
  conntrack cri-tools ebtables kubeadm kubectl kubelet kubernetes-cni socat
0 upgraded, 8 newly installed, 0 to remove and 9 not upgraded.
Need to get 75.9 MB of archives.
After this operation, 310 MB of additional disk space will be used.
Get:1 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 cri-tools amd64 1.24.2-00 [12.3 MB]
Get:6 http://archive.ubuntu.com/ubuntu jammy/main amd64 conntrack amd64 1:1.4.6-2build2 [33.5 kB]
Get:2 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 kubernetes-cni amd64 0.8.7-00 [25.0 MB]
Get:7 http://archive.ubuntu.com/ubuntu jammy/main amd64 ebtables amd64 2.0.11-4build2 [84.9 kB]
Get:3 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 kubelet amd64 1.25.0-00 [19.5 MB]
Get:8 http://archive.ubuntu.com/ubuntu jammy/main amd64 socat amd64 1.7.4.1-3ubuntu4 [349 kB]
Get:4 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 kubectl amd64 1.25.0-00 [9500 kB]
Get:5 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 kubeadm amd64 1.25.0-00 [9213 kB]
Fetched 75.9 MB in 1s (75.0 MB/s)
Selecting previously unselected package conntrack.
(Reading database ... 75053 files and directories currently installed.)
Preparing to unpack .../0-conntrack_1%3a1.4.6-2build2_amd64.deb ...
Unpacking conntrack (1:1.4.6-2build2) ...
Selecting previously unselected package cri-tools.
Preparing to unpack .../1-cri-tools_1.24.2-00_amd64.deb ...
Unpacking cri-tools (1.24.2-00) ...
Selecting previously unselected package ebtables.
Preparing to unpack .../2-ebtables_2.0.11-4build2_amd64.deb ...
Unpacking ebtables (2.0.11-4build2) ...
Selecting previously unselected package kubernetes-cni.
Preparing to unpack .../3-kubernetes-cni_0.8.7-00_amd64.deb ...
Unpacking kubernetes-cni (0.8.7-00) ...
Selecting previously unselected package socat.
Preparing to unpack .../4-socat_1.7.4.1-3ubuntu4_amd64.deb ...
Unpacking socat (1.7.4.1-3ubuntu4) ...
Selecting previously unselected package kubelet.
Preparing to unpack .../5-kubelet_1.25.0-00_amd64.deb ...
Unpacking kubelet (1.25.0-00) ...
Selecting previously unselected package kubectl.
Preparing to unpack .../6-kubectl_1.25.0-00_amd64.deb ...
Unpacking kubectl (1.25.0-00) ...
Selecting previously unselected package kubeadm.
Preparing to unpack .../7-kubeadm_1.25.0-00_amd64.deb ...
Unpacking kubeadm (1.25.0-00) ...
Setting up conntrack (1:1.4.6-2build2) ...
Setting up kubectl (1.25.0-00) ...
Setting up ebtables (2.0.11-4build2) ...
Setting up socat (1.7.4.1-3ubuntu4) ...
Setting up cri-tools (1.24.2-00) ...
Setting up kubernetes-cni (0.8.7-00) ...
Setting up kubelet (1.25.0-00) ...
Created symlink /etc/systemd/system/multi-user.target.wants/kubelet.service â†’ /lib/systemd/system/kubelet.service.
Setting up kubeadm (1.25.0-00) ...
Processing triggers for man-db (2.10.2-1) ...
Scanning processes...
Scanning processor microcode...
Scanning linux images...

Running kernel seems to be up-to-date.

The processor microcode seems to be up-to-date.

No services need to be restarted.

No containers need to be restarted.

No user sessions are running outdated binaries.

No VM guests are running outdated hypervisor (qemu) binaries on this host.
ubuntu@wv09:~$ sudo apt-mark hold kubelet kubeadm kubectl
kubelet set on hold.
kubeadm set on hold.
kubectl set on hold.
ubuntu@wv09:~$ multipass shell node1
Welcome to Ubuntu 20.04.4 LTS (GNU/Linux 5.4.0-125-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

  System information as of Wed Sep  7 19:54:11 UTC 2022

  System load:  0.0               Processes:             175
  Usage of /:   3.4% of 48.27GB   Users logged in:       0
  Memory usage: 4%                IPv4 address for ens3: 10.26.45.13
  Swap usage:   0%


10 updates can be applied immediately.
2 of these updates are standard security updates.
To see these additional updates run: apt list --upgradable

New release '22.04.1 LTS' available.
Run 'do-release-upgrade' to upgrade to it.


Last login: Wed Sep  7 19:52:00 2022 from 10.26.45.1
ubuntu@node1:~$ sudo apt update
Hit:2 https://download.docker.com/linux/ubuntu focal InRelease
Hit:1 https://packages.cloud.google.com/apt kubernetes-xenial InRelease
Hit:3 http://security.ubuntu.com/ubuntu focal-security InRelease
Hit:4 http://archive.ubuntu.com/ubuntu focal InRelease
Hit:5 http://archive.ubuntu.com/ubuntu focal-updates InRelease
Hit:6 http://archive.ubuntu.com/ubuntu focal-backports InRelease
Reading package lists... Done
Building dependency tree
Reading state information... Done
10 packages can be upgraded. Run 'apt list --upgradable' to see them.
ubuntu@node1:~$ sudo apt install -y kubelet kubeadm kubectl
Reading package lists... Done
Building dependency tree
Reading state information... Done
The following additional packages will be installed:
  conntrack cri-tools ebtables kubernetes-cni socat
Suggested packages:
  nftables
The following NEW packages will be installed:
  conntrack cri-tools ebtables kubeadm kubectl kubelet kubernetes-cni socat
0 upgraded, 8 newly installed, 0 to remove and 10 not upgraded.
Need to get 75.9 MB of archives.
After this operation, 310 MB of additional disk space will be used.
Get:5 http://archive.ubuntu.com/ubuntu focal/main amd64 conntrack amd64 1:1.4.5-2 [30.3 kB]
Get:1 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 cri-tools amd64 1.24.2-00 [12.3 MB]
Get:7 http://archive.ubuntu.com/ubuntu focal/main amd64 ebtables amd64 2.0.11-3build1 [80.3 kB]
Get:2 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 kubernetes-cni amd64 0.8.7-00 [25.0 MB]
Get:8 http://archive.ubuntu.com/ubuntu focal/main amd64 socat amd64 1.7.3.3-2 [323 kB]
Get:3 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 kubelet amd64 1.25.0-00 [19.5 MB]
Get:4 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 kubectl amd64 1.25.0-00 [9500 kB]
Get:6 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 kubeadm amd64 1.25.0-00 [9213 kB]
Fetched 75.9 MB in 1s (65.8 MB/s)
Selecting previously unselected package conntrack.
(Reading database ... 63893 files and directories currently installed.)
Preparing to unpack .../0-conntrack_1%3a1.4.5-2_amd64.deb ...
Unpacking conntrack (1:1.4.5-2) ...
Selecting previously unselected package cri-tools.
Preparing to unpack .../1-cri-tools_1.24.2-00_amd64.deb ...
Unpacking cri-tools (1.24.2-00) ...
Selecting previously unselected package ebtables.
Preparing to unpack .../2-ebtables_2.0.11-3build1_amd64.deb ...
Unpacking ebtables (2.0.11-3build1) ...
Selecting previously unselected package kubernetes-cni.
Preparing to unpack .../3-kubernetes-cni_0.8.7-00_amd64.deb ...
Unpacking kubernetes-cni (0.8.7-00) ...
Selecting previously unselected package socat.
Preparing to unpack .../4-socat_1.7.3.3-2_amd64.deb ...
Unpacking socat (1.7.3.3-2) ...
Selecting previously unselected package kubelet.
Preparing to unpack .../5-kubelet_1.25.0-00_amd64.deb ...
Unpacking kubelet (1.25.0-00) ...
Selecting previously unselected package kubectl.
Preparing to unpack .../6-kubectl_1.25.0-00_amd64.deb ...
Unpacking kubectl (1.25.0-00) ...
Selecting previously unselected package kubeadm.
Preparing to unpack .../7-kubeadm_1.25.0-00_amd64.deb ...
Unpacking kubeadm (1.25.0-00) ...
Setting up conntrack (1:1.4.5-2) ...
Setting up kubectl (1.25.0-00) ...
Setting up ebtables (2.0.11-3build1) ...
Setting up socat (1.7.3.3-2) ...
Setting up cri-tools (1.24.2-00) ...
Setting up kubernetes-cni (0.8.7-00) ...
Setting up kubelet (1.25.0-00) ...
Created symlink /etc/systemd/system/multi-user.target.wants/kubelet.service â†’ /lib/systemd/system/kubelet.service.
Setting up kubeadm (1.25.0-00) ...
Processing triggers for man-db (2.9.1-1) ...
ubuntu@node1:~$ sudo apt-mark hold kubelet kubeadm kubectl
kubelet set on hold.
kubeadm set on hold.
kubectl set on hold.
ubuntu@node1:~$ exit
logout
ubuntu@wv09:~$ multipass shell node2
Welcome to Ubuntu 20.04.4 LTS (GNU/Linux 5.4.0-125-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

  System information as of Wed Sep  7 19:54:57 UTC 2022

  System load:  0.0               Processes:             173
  Usage of /:   3.4% of 48.27GB   Users logged in:       0
  Memory usage: 4%                IPv4 address for ens3: 10.26.45.123
  Swap usage:   0%

 * Super-optimized for small spaces - read how we shrank the memory
   footprint of MicroK8s to make it the smallest full K8s around.

   https://ubuntu.com/blog/microk8s-memory-optimisation

10 updates can be applied immediately.
2 of these updates are standard security updates.
To see these additional updates run: apt list --upgradable

New release '22.04.1 LTS' available.
Run 'do-release-upgrade' to upgrade to it.


Last login: Wed Sep  7 19:52:28 2022 from 10.26.45.1
ubuntu@node2:~$ sudo apt update
Hit:1 https://download.docker.com/linux/ubuntu focal InRelease
Hit:3 http://archive.ubuntu.com/ubuntu focal InRelease
Hit:2 https://packages.cloud.google.com/apt kubernetes-xenial InRelease
Hit:4 http://archive.ubuntu.com/ubuntu focal-updates InRelease
Hit:5 http://archive.ubuntu.com/ubuntu focal-backports InRelease
Hit:6 http://security.ubuntu.com/ubuntu focal-security InRelease
Reading package lists... Done
Building dependency tree
Reading state information... Done
10 packages can be upgraded. Run 'apt list --upgradable' to see them.
ubuntu@node2:~$ sudo apt install -y kubelet kubeadm kubectl
Reading package lists... Done
Building dependency tree
Reading state information... Done
The following additional packages will be installed:
  conntrack cri-tools ebtables kubernetes-cni socat
Suggested packages:
  nftables
The following NEW packages will be installed:
  conntrack cri-tools ebtables kubeadm kubectl kubelet kubernetes-cni socat
0 upgraded, 8 newly installed, 0 to remove and 10 not upgraded.
Need to get 75.9 MB of archives.
After this operation, 310 MB of additional disk space will be used.
Get:1 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 cri-tools amd64 1.24.2-00 [12.3 MB]
Get:6 http://archive.ubuntu.com/ubuntu focal/main amd64 conntrack amd64 1:1.4.5-2 [30.3 kB]
Get:7 http://archive.ubuntu.com/ubuntu focal/main amd64 ebtables amd64 2.0.11-3build1 [80.3 kB]
Get:8 http://archive.ubuntu.com/ubuntu focal/main amd64 socat amd64 1.7.3.3-2 [323 kB]
Get:2 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 kubernetes-cni amd64 0.8.7-00 [25.0 MB]
Get:3 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 kubelet amd64 1.25.0-00 [19.5 MB]
Get:4 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 kubectl amd64 1.25.0-00 [9500 kB]
Get:5 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 kubeadm amd64 1.25.0-00 [9213 kB]
Fetched 75.9 MB in 2s (35.6 MB/s)
Selecting previously unselected package conntrack.
(Reading database ... 63893 files and directories currently installed.)
Preparing to unpack .../0-conntrack_1%3a1.4.5-2_amd64.deb ...
Unpacking conntrack (1:1.4.5-2) ...
Selecting previously unselected package cri-tools.
Preparing to unpack .../1-cri-tools_1.24.2-00_amd64.deb ...
Unpacking cri-tools (1.24.2-00) ...
Selecting previously unselected package ebtables.
Preparing to unpack .../2-ebtables_2.0.11-3build1_amd64.deb ...
Unpacking ebtables (2.0.11-3build1) ...
Selecting previously unselected package kubernetes-cni.
Preparing to unpack .../3-kubernetes-cni_0.8.7-00_amd64.deb ...
Unpacking kubernetes-cni (0.8.7-00) ...
Selecting previously unselected package socat.
Preparing to unpack .../4-socat_1.7.3.3-2_amd64.deb ...
Unpacking socat (1.7.3.3-2) ...
Selecting previously unselected package kubelet.
Preparing to unpack .../5-kubelet_1.25.0-00_amd64.deb ...
Unpacking kubelet (1.25.0-00) ...
Selecting previously unselected package kubectl.
Preparing to unpack .../6-kubectl_1.25.0-00_amd64.deb ...
Unpacking kubectl (1.25.0-00) ...
Selecting previously unselected package kubeadm.
Preparing to unpack .../7-kubeadm_1.25.0-00_amd64.deb ...
Unpacking kubeadm (1.25.0-00) ...
Setting up conntrack (1:1.4.5-2) ...
Setting up kubectl (1.25.0-00) ...
Setting up ebtables (2.0.11-3build1) ...
Setting up socat (1.7.3.3-2) ...
Setting up cri-tools (1.24.2-00) ...
Setting up kubernetes-cni (0.8.7-00) ...
Setting up kubelet (1.25.0-00) ...
Created symlink /etc/systemd/system/multi-user.target.wants/kubelet.service â†’ /lib/systemd/system/kubelet.service.
Setting up kubeadm (1.25.0-00) ...
Processing triggers for man-db (2.9.1-1) ...
ubuntu@node2:~$ sudo apt-mark hold kubelet kubeadm kubectl
kubelet set on hold.
kubeadm set on hold.
kubectl set on hold.
ubuntu@node2:~$ exit
logout
ubuntu@wv09:~$ # STEP 6 https://www.linuxtechi.com/install-kubernetes-on-ubuntu-22-04/
ubuntu@wv09:~$  sudo kubeadm init --control-plane-endpoint=wv09
[init] Using Kubernetes version: v1.25.0
[preflight] Running pre-flight checks
        [WARNING SystemVerification]: missing optional cgroups: blkio
[preflight] Pulling images required for setting up a Kubernetes cluster
[preflight] This might take a minute or two, depending on the speed of your internet connection
[preflight] You can also perform this action in beforehand using 'kubeadm config images pull'
[certs] Using certificateDir folder "/etc/kubernetes/pki"
[certs] Generating "ca" certificate and key
[certs] Generating "apiserver" certificate and key
[certs] apiserver serving cert is signed for DNS names [kubernetes kubernetes.default kubernetes.default.svc kubernetes.default.svc.cluster.local wv09] and IPs [10.96.0.1 147.75.55.235]
[certs] Generating "apiserver-kubelet-client" certificate and key
[certs] Generating "front-proxy-ca" certificate and key
[certs] Generating "front-proxy-client" certificate and key
[certs] Generating "etcd/ca" certificate and key
[certs] Generating "etcd/server" certificate and key
[certs] etcd/server serving cert is signed for DNS names [localhost wv09] and IPs [147.75.55.235 127.0.0.1 ::1]
[certs] Generating "etcd/peer" certificate and key
[certs] etcd/peer serving cert is signed for DNS names [localhost wv09] and IPs [147.75.55.235 127.0.0.1 ::1]
[certs] Generating "etcd/healthcheck-client" certificate and key
[certs] Generating "apiserver-etcd-client" certificate and key
[certs] Generating "sa" key and public key
[kubeconfig] Using kubeconfig folder "/etc/kubernetes"
[kubeconfig] Writing "admin.conf" kubeconfig file
[kubeconfig] Writing "kubelet.conf" kubeconfig file
[kubeconfig] Writing "controller-manager.conf" kubeconfig file
[kubeconfig] Writing "scheduler.conf" kubeconfig file
[kubelet-start] Writing kubelet environment file with flags to file "/var/lib/kubelet/kubeadm-flags.env"
[kubelet-start] Writing kubelet configuration to file "/var/lib/kubelet/config.yaml"
[kubelet-start] Starting the kubelet
[control-plane] Using manifest folder "/etc/kubernetes/manifests"
[control-plane] Creating static Pod manifest for "kube-apiserver"
[control-plane] Creating static Pod manifest for "kube-controller-manager"
[control-plane] Creating static Pod manifest for "kube-scheduler"
[etcd] Creating static Pod manifest for local etcd in "/etc/kubernetes/manifests"
[wait-control-plane] Waiting for the kubelet to boot up the control plane as static Pods from directory "/etc/kubernetes/manifests". This can take up to 4m0s
[apiclient] All control plane components are healthy after 5.501683 seconds
[upload-config] Storing the configuration used in ConfigMap "kubeadm-config" in the "kube-system" Namespace
[kubelet] Creating a ConfigMap "kubelet-config" in namespace kube-system with the configuration for the kubelets in the cluster
[upload-certs] Skipping phase. Please see --upload-certs
[mark-control-plane] Marking the node wv09 as control-plane by adding the labels: [node-role.kubernetes.io/control-plane node.kubernetes.io/exclude-from-external-load-balancers]
[mark-control-plane] Marking the node wv09 as control-plane by adding the taints [node-role.kubernetes.io/control-plane:NoSchedule]
[bootstrap-token] Using token: 1ptzre.6v9nnav6z3hl7zx2
[bootstrap-token] Configuring bootstrap tokens, cluster-info ConfigMap, RBAC Roles
[bootstrap-token] Configured RBAC rules to allow Node Bootstrap tokens to get nodes
[bootstrap-token] Configured RBAC rules to allow Node Bootstrap tokens to post CSRs in order for nodes to get long term certificate credentials
[bootstrap-token] Configured RBAC rules to allow the csrapprover controller automatically approve CSRs from a Node Bootstrap Token
[bootstrap-token] Configured RBAC rules to allow certificate rotation for all node client certificates in the cluster
[bootstrap-token] Creating the "cluster-info" ConfigMap in the "kube-public" namespace
[kubelet-finalize] Updating "/etc/kubernetes/kubelet.conf" to point to a rotatable kubelet client certificate and key
[addons] Applied essential addon: CoreDNS
[addons] Applied essential addon: kube-proxy

Your Kubernetes control-plane has initialized successfully!

To start using your cluster, you need to run the following as a regular user:

  mkdir -p $HOME/.kube
  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
  sudo chown $(id -u):$(id -g) $HOME/.kube/config

Alternatively, if you are the root user, you can run:

  export KUBECONFIG=/etc/kubernetes/admin.conf

You should now deploy a pod network to the cluster.
Run "kubectl apply -f [podnetwork].yaml" with one of the options listed at:
  https://kubernetes.io/docs/concepts/cluster-administration/addons/

You can now join any number of control-plane nodes by copying certificate authorities
and service account keys on each node and then running the following as root:

  kubeadm join wv09:6443 --token 1ptzre.6v9nnav6z3hl7zx2 \
        --discovery-token-ca-cert-hash sha256:1befe9e71c14ec04c3a6a18fd926f69616bc90ee8bab111b9fa3762cda5b5029 \
        --control-plane

Then you can join any number of worker nodes by running the following on each as root:

kubeadm join wv09:6443 --token 1ptzre.6v9nnav6z3hl7zx2 \
        --discovery-token-ca-cert-hash sha256:1befe9e71c14ec04c3a6a18fd926f69616bc90ee8bab111b9fa3762cda5b5029
ubuntu@wv09:~$ mkdir -p $HOME/.kube
ubuntu@wv09:~$ sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
ubuntu@wv09:~$ sudo chown $(id -u):$(id -g) $HOME/.kube/config
ubuntu@wv09:~$ kubectl cluster-info
Kubernetes control plane is running at https://wv09:6443
CoreDNS is running at https://wv09:6443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy

To further debug and diagnose cluster problems, use 'kubectl cluster-info dump'.
ubuntu@wv09:~$ kubectl get nodes
NAME   STATUS     ROLES           AGE     VERSION
wv09   NotReady   control-plane   2m50s   v1.25.0
ubuntu@wv09:~$ multipass shell node1
Welcome to Ubuntu 20.04.4 LTS (GNU/Linux 5.4.0-125-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

  System information as of Wed Sep  7 20:01:13 UTC 2022

  System load:  0.0               Processes:             173
  Usage of /:   4.0% of 48.27GB   Users logged in:       0
  Memory usage: 4%                IPv4 address for ens3: 10.26.45.13
  Swap usage:   0%


10 updates can be applied immediately.
2 of these updates are standard security updates.
To see these additional updates run: apt list --upgradable

New release '22.04.1 LTS' available.
Run 'do-release-upgrade' to upgrade to it.


Last login: Wed Sep  7 19:54:11 2022 from 10.26.45.1
ubuntu@node1:~$ kubeadm join wv09:6443 --token 1ptzre.6v9nnav6z3hl7zx2 --discovery-token-ca-cert-hash sha256:1befe9e71c14ec04c3a6a18fd926f69616bc90ee8bab111b9fa3762cda5b5029
[preflight] Running pre-flight checks
error execution phase preflight: [preflight] Some fatal errors occurred:
        [ERROR IsPrivilegedUser]: user is not running as root
[preflight] If you know what you are doing, you can make a check non-fatal with `--ignore-preflight-errors=...`
To see the stack trace of this error execute with --v=5 or higher
ubuntu@node1:~$ sudo kubeadm join wv09:6443 --token 1ptzre.6v9nnav6z3hl7zx2 --discovery-token-ca-cert-hash sha256:1befe9
e71c14ec04c3a6a18fd926f69616bc90ee8bab111b9fa3762cda5b5029
[preflight] Running pre-flight checks
[preflight] Reading configuration from the cluster...
[preflight] FYI: You can look at this config file with 'kubectl -n kube-system get cm kubeadm-config -o yaml'
[kubelet-start] Writing kubelet configuration to file "/var/lib/kubelet/config.yaml"
[kubelet-start] Writing kubelet environment file with flags to file "/var/lib/kubelet/kubeadm-flags.env"
[kubelet-start] Starting the kubelet
[kubelet-start] Waiting for the kubelet to perform the TLS Bootstrap...

This node has joined the cluster:
* Certificate signing request was sent to apiserver and a response was received.
* The Kubelet was informed of the new secure connection details.

Run 'kubectl get nodes' on the control-plane to see this node join the cluster.

ubuntu@node1:~$ exit
logout
ubuntu@wv09:~$ kubectl get nodes
NAME    STATUS     ROLES           AGE     VERSION
node1   NotReady   <none>          15s     v1.25.0
wv09    NotReady   control-plane   4m38s   v1.25.0
ubuntu@wv09:~$ multipass shell node2
Welcome to Ubuntu 20.04.4 LTS (GNU/Linux 5.4.0-125-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

  System information as of Wed Sep  7 20:02:41 UTC 2022

  System load:  0.03              Processes:             175
  Usage of /:   4.0% of 48.27GB   Users logged in:       0
  Memory usage: 4%                IPv4 address for ens3: 10.26.45.123
  Swap usage:   0%

 * Super-optimized for small spaces - read how we shrank the memory
   footprint of MicroK8s to make it the smallest full K8s around.

   https://ubuntu.com/blog/microk8s-memory-optimisation

10 updates can be applied immediately.
2 of these updates are standard security updates.
To see these additional updates run: apt list --upgradable

New release '22.04.1 LTS' available.
Run 'do-release-upgrade' to upgrade to it.


Last login: Wed Sep  7 19:54:57 2022 from 10.26.45.1
ubuntu@node2:~$ sudo kubeadm join wv09:6443 --token 1ptzre.6v9nnav6z3hl7zx2 --discovery-token-ca-cert-hash sha256:1befe9e71c14ec04c3a6a18fd926f69616bc90ee8bab111b9fa3762cda5b5029
[preflight] Running pre-flight checks
[preflight] Reading configuration from the cluster...
[preflight] FYI: You can look at this config file with 'kubectl -n kube-system get cm kubeadm-config -o yaml'
[kubelet-start] Writing kubelet configuration to file "/var/lib/kubelet/config.yaml"
[kubelet-start] Writing kubelet environment file with flags to file "/var/lib/kubelet/kubeadm-flags.env"
[kubelet-start] Starting the kubelet
[kubelet-start] Waiting for the kubelet to perform the TLS Bootstrap...

This node has joined the cluster:
* Certificate signing request was sent to apiserver and a response was received.
* The Kubelet was informed of the new secure connection details.

Run 'kubectl get nodes' on the control-plane to see this node join the cluster.

ubuntu@node2:~$ exit
logout
ubuntu@wv09:~$ kubectl get nodes
NAME    STATUS     ROLES           AGE     VERSION
node1   NotReady   <none>          66s     v1.25.0
node2   NotReady   <none>          8s      v1.25.0
wv09    NotReady   control-plane   5m29s   v1.25.0
ubuntu@wv09:~$ kubectl describe node
Name:               node1
Roles:              <none>
Labels:             beta.kubernetes.io/arch=amd64
                    beta.kubernetes.io/os=linux
                    kubernetes.io/arch=amd64
                    kubernetes.io/hostname=node1
                    kubernetes.io/os=linux
Annotations:        kubeadm.alpha.kubernetes.io/cri-socket: unix:///var/run/containerd/containerd.sock
                    node.alpha.kubernetes.io/ttl: 0
                    volumes.kubernetes.io/controller-managed-attach-detach: true
CreationTimestamp:  Wed, 07 Sep 2022 20:02:09 +0000
Taints:             node.kubernetes.io/not-ready:NoSchedule
Unschedulable:      false
Lease:
  HolderIdentity:  node1
  AcquireTime:     <unset>
  RenewTime:       Wed, 07 Sep 2022 20:05:42 +0000
Conditions:
  Type             Status  LastHeartbeatTime                 LastTransitionTime                Reason                       Message
  ----             ------  -----------------                 ------------------                ------                       -------
  MemoryPressure   False   Wed, 07 Sep 2022 20:02:29 +0000   Wed, 07 Sep 2022 20:02:08 +0000   KubeletHasSufficientMemory   kubelet has sufficient memory available
  DiskPressure     False   Wed, 07 Sep 2022 20:02:29 +0000   Wed, 07 Sep 2022 20:02:08 +0000   KubeletHasNoDiskPressure     kubelet has no disk pressure
  PIDPressure      False   Wed, 07 Sep 2022 20:02:29 +0000   Wed, 07 Sep 2022 20:02:08 +0000   KubeletHasSufficientPID      kubelet has sufficient PID available
  Ready            False   Wed, 07 Sep 2022 20:02:29 +0000   Wed, 07 Sep 2022 20:02:08 +0000   KubeletNotReady              container runtime network not ready: NetworkReady=false reason:NetworkPluginNotReady message:Network plugin returns error: cni plugin not initialized
Addresses:
  InternalIP:  10.26.45.13
  Hostname:    node1
Capacity:
  cpu:                8
  ephemeral-storage:  50620216Ki
  hugepages-1Gi:      0
  hugepages-2Mi:      0
  memory:             8147228Ki
  pods:               110
Allocatable:
  cpu:                8
  ephemeral-storage:  46651590989
  hugepages-1Gi:      0
  hugepages-2Mi:      0
  memory:             8044828Ki
  pods:               110
System Info:
  Machine ID:                 509cfd209ed04b74abd7617510cc82ee
  System UUID:                509cfd209ed04b74abd7617510cc82ee
  Boot ID:                    d2f2b7f8-118f-4825-ade8-f81c8308dc23
  Kernel Version:             5.4.0-125-generic
  OS Image:                   Ubuntu 20.04.4 LTS
  Operating System:           linux
  Architecture:               amd64
  Container Runtime Version:  containerd://1.6.8
  Kubelet Version:            v1.25.0
  Kube-Proxy Version:         v1.25.0
Non-terminated Pods:          (1 in total)
  Namespace                   Name                CPU Requests  CPU Limits  Memory Requests  Memory Limits  Age
  ---------                   ----                ------------  ----------  ---------------  -------------  ---
  kube-system                 kube-proxy-mtbft    0 (0%)        0 (0%)      0 (0%)           0 (0%)         3m37s
Allocated resources:
  (Total limits may be over 100 percent, i.e., overcommitted.)
  Resource           Requests  Limits
  --------           --------  ------
  cpu                0 (0%)    0 (0%)
  memory             0 (0%)    0 (0%)
  ephemeral-storage  0 (0%)    0 (0%)
  hugepages-1Gi      0 (0%)    0 (0%)
  hugepages-2Mi      0 (0%)    0 (0%)
Events:
  Type    Reason                   Age                    From             Message
  ----    ------                   ----                   ----             -------
  Normal  Starting                 3m29s                  kube-proxy
  Normal  NodeHasSufficientMemory  3m38s (x8 over 3m50s)  kubelet          Node node1 status is now: NodeHasSufficientMemory
  Normal  RegisteredNode           3m37s                  node-controller  Node node1 event: Registered Node node1 in Controller


Name:               node2
Roles:              <none>
Labels:             beta.kubernetes.io/arch=amd64
                    beta.kubernetes.io/os=linux
                    kubernetes.io/arch=amd64
                    kubernetes.io/hostname=node2
                    kubernetes.io/os=linux
Annotations:        kubeadm.alpha.kubernetes.io/cri-socket: unix:///var/run/containerd/containerd.sock
                    node.alpha.kubernetes.io/ttl: 0
                    volumes.kubernetes.io/controller-managed-attach-detach: true
CreationTimestamp:  Wed, 07 Sep 2022 20:03:07 +0000
Taints:             node.kubernetes.io/not-ready:NoSchedule
Unschedulable:      false
Lease:
  HolderIdentity:  node2
  AcquireTime:     <unset>
  RenewTime:       Wed, 07 Sep 2022 20:05:40 +0000
Conditions:
  Type             Status  LastHeartbeatTime                 LastTransitionTime                Reason                       Message
  ----             ------  -----------------                 ------------------                ------                       -------
  MemoryPressure   False   Wed, 07 Sep 2022 20:03:27 +0000   Wed, 07 Sep 2022 20:03:07 +0000   KubeletHasSufficientMemory   kubelet has sufficient memory available
  DiskPressure     False   Wed, 07 Sep 2022 20:03:27 +0000   Wed, 07 Sep 2022 20:03:07 +0000   KubeletHasNoDiskPressure     kubelet has no disk pressure
  PIDPressure      False   Wed, 07 Sep 2022 20:03:27 +0000   Wed, 07 Sep 2022 20:03:07 +0000   KubeletHasSufficientPID      kubelet has sufficient PID available
  Ready            False   Wed, 07 Sep 2022 20:03:27 +0000   Wed, 07 Sep 2022 20:03:07 +0000   KubeletNotReady              container runtime network not ready: NetworkReady=false reason:NetworkPluginNotReady message:Network plugin returns error: cni plugin not initialized
Addresses:
  InternalIP:  10.26.45.123
  Hostname:    node2
Capacity:
  cpu:                8
  ephemeral-storage:  50620216Ki
  hugepages-1Gi:      0
  hugepages-2Mi:      0
  memory:             8147236Ki
  pods:               110
Allocatable:
  cpu:                8
  ephemeral-storage:  46651590989
  hugepages-1Gi:      0
  hugepages-2Mi:      0
  memory:             8044836Ki
  pods:               110
System Info:
  Machine ID:                 ae465c9896ca404da4aa71538e0fcf78
  System UUID:                ae465c9896ca404da4aa71538e0fcf78
  Boot ID:                    ccddd94c-019c-4c39-9291-db5b66aa458b
  Kernel Version:             5.4.0-125-generic
  OS Image:                   Ubuntu 20.04.4 LTS
  Operating System:           linux
  Architecture:               amd64
  Container Runtime Version:  containerd://1.6.8
  Kubelet Version:            v1.25.0
  Kube-Proxy Version:         v1.25.0
Non-terminated Pods:          (1 in total)
  Namespace                   Name                CPU Requests  CPU Limits  Memory Requests  Memory Limits  Age
  ---------                   ----                ------------  ----------  ---------------  -------------  ---
  kube-system                 kube-proxy-5d68k    0 (0%)        0 (0%)      0 (0%)           0 (0%)         2m39s
Allocated resources:
  (Total limits may be over 100 percent, i.e., overcommitted.)
  Resource           Requests  Limits
  --------           --------  ------
  cpu                0 (0%)    0 (0%)
  memory             0 (0%)    0 (0%)
  ephemeral-storage  0 (0%)    0 (0%)
  hugepages-1Gi      0 (0%)    0 (0%)
  hugepages-2Mi      0 (0%)    0 (0%)
Events:
  Type    Reason                   Age                    From             Message
  ----    ------                   ----                   ----             -------
  Normal  Starting                 2m30s                  kube-proxy
  Normal  NodeHasSufficientMemory  2m39s (x8 over 2m52s)  kubelet          Node node2 status is now: NodeHasSufficientMemory
  Normal  RegisteredNode           2m37s                  node-controller  Node node2 event: Registered Node node2 in Controller


Name:               wv09
Roles:              control-plane
Labels:             beta.kubernetes.io/arch=amd64
                    beta.kubernetes.io/os=linux
                    kubernetes.io/arch=amd64
                    kubernetes.io/hostname=wv09
                    kubernetes.io/os=linux
                    node-role.kubernetes.io/control-plane=
                    node.kubernetes.io/exclude-from-external-load-balancers=
Annotations:        kubeadm.alpha.kubernetes.io/cri-socket: unix:///var/run/containerd/containerd.sock
                    node.alpha.kubernetes.io/ttl: 0
                    volumes.kubernetes.io/controller-managed-attach-detach: true
CreationTimestamp:  Wed, 07 Sep 2022 19:57:46 +0000
Taints:             node-role.kubernetes.io/control-plane:NoSchedule
                    node.kubernetes.io/not-ready:NoSchedule
Unschedulable:      false
Lease:
  HolderIdentity:  wv09
  AcquireTime:     <unset>
  RenewTime:       Wed, 07 Sep 2022 20:05:39 +0000
Conditions:
  Type             Status  LastHeartbeatTime                 LastTransitionTime                Reason                       Message
  ----             ------  -----------------                 ------------------                ------                       -------
  MemoryPressure   False   Wed, 07 Sep 2022 20:02:55 +0000   Wed, 07 Sep 2022 19:57:44 +0000   KubeletHasSufficientMemory   kubelet has sufficient memory available
  DiskPressure     False   Wed, 07 Sep 2022 20:02:55 +0000   Wed, 07 Sep 2022 19:57:44 +0000   KubeletHasNoDiskPressure     kubelet has no disk pressure
  PIDPressure      False   Wed, 07 Sep 2022 20:02:55 +0000   Wed, 07 Sep 2022 19:57:44 +0000   KubeletHasSufficientPID      kubelet has sufficient PID available
  Ready            False   Wed, 07 Sep 2022 20:02:55 +0000   Wed, 07 Sep 2022 19:57:44 +0000   KubeletNotReady              container runtime network not ready: NetworkReady=false reason:NetworkPluginNotReady message:Network plugin returns error: cni plugin not initialized
Addresses:
  InternalIP:  147.75.55.235
  Hostname:    wv09
Capacity:
  cpu:                48
  ephemeral-storage:  228591256Ki
  hugepages-1Gi:      0
  hugepages-2Mi:      0
  memory:             65435488Ki
  pods:               110
Allocatable:
  cpu:                48
  ephemeral-storage:  210669701181
  hugepages-1Gi:      0
  hugepages-2Mi:      0
  memory:             65333088Ki
  pods:               110
System Info:
  Machine ID:                 f37f280afc3d44c3865ba78e703670f3
  System UUID:                4c4c4544-0043-4c10-8036-c8c04f483133
  Boot ID:                    91fbf62d-716b-4347-b9c8-d512abd0f76c
  Kernel Version:             5.15.0-47-generic
  OS Image:                   Ubuntu 22.04.1 LTS
  Operating System:           linux
  Architecture:               amd64
  Container Runtime Version:  containerd://1.6.8
  Kubelet Version:            v1.25.0
  Kube-Proxy Version:         v1.25.0
Non-terminated Pods:          (5 in total)
  Namespace                   Name                            CPU Requests  CPU Limits  Memory Requests  Memory Limits  Age
  ---------                   ----                            ------------  ----------  ---------------  -------------  ---
  kube-system                 etcd-wv09                       100m (0%)     0 (0%)      100Mi (0%)       0 (0%)         7m57s
  kube-system                 kube-apiserver-wv09             250m (0%)     0 (0%)      0 (0%)           0 (0%)         7m59s
  kube-system                 kube-controller-manager-wv09    200m (0%)     0 (0%)      0 (0%)           0 (0%)         7m59s
  kube-system                 kube-proxy-9ch8z                0 (0%)        0 (0%)      0 (0%)           0 (0%)         7m51s
  kube-system                 kube-scheduler-wv09             100m (0%)     0 (0%)      0 (0%)           0 (0%)         7m57s
Allocated resources:
  (Total limits may be over 100 percent, i.e., overcommitted.)
  Resource           Requests    Limits
  --------           --------    ------
  cpu                650m (1%)   0 (0%)
  memory             100Mi (0%)  0 (0%)
  ephemeral-storage  0 (0%)      0 (0%)
  hugepages-1Gi      0 (0%)      0 (0%)
  hugepages-2Mi      0 (0%)      0 (0%)
Events:
  Type     Reason                   Age                  From             Message
  ----     ------                   ----                 ----             -------
  Normal   Starting                 7m49s                kube-proxy
  Normal   NodeHasSufficientMemory  8m3s (x5 over 8m4s)  kubelet          Node wv09 status is now: NodeHasSufficientMemory
  Normal   NodeHasNoDiskPressure    8m3s (x4 over 8m4s)  kubelet          Node wv09 status is now: NodeHasNoDiskPressure
  Normal   NodeHasSufficientPID     8m3s (x4 over 8m4s)  kubelet          Node wv09 status is now: NodeHasSufficientPID
  Normal   Starting                 7m58s                kubelet          Starting kubelet.
  Warning  InvalidDiskCapacity      7m58s                kubelet          invalid capacity 0 on image filesystem
  Normal   NodeAllocatableEnforced  7m57s                kubelet          Updated Node Allocatable limit across pods
  Normal   NodeHasSufficientMemory  7m57s                kubelet          Node wv09 status is now: NodeHasSufficientMemory
  Normal   NodeHasNoDiskPressure    7m57s                kubelet          Node wv09 status is now: NodeHasNoDiskPressure
  Normal   NodeHasSufficientPID     7m57s                kubelet          Node wv09 status is now: NodeHasSufficientPID
  Normal   RegisteredNode           7m52s                node-controller  Node wv09 event: Registered Node wv09 in Controller
ubuntu@wv09:~$
ubuntu@wv09:~$ curl https://projectcalico.docs.tigera.io/manifests/calico.yaml -O
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100  229k  100  229k    0     0   720k      0 --:--:-- --:--:-- --:--:--  719k
ubuntu@wv09:~$ kubectl apply -f calico.yaml
poddisruptionbudget.policy/calico-kube-controllers created
serviceaccount/calico-kube-controllers created
serviceaccount/calico-node created
configmap/calico-config created
customresourcedefinition.apiextensions.k8s.io/bgpconfigurations.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/bgppeers.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/blockaffinities.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/caliconodestatuses.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/clusterinformations.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/felixconfigurations.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/globalnetworkpolicies.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/globalnetworksets.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/hostendpoints.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/ipamblocks.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/ipamconfigs.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/ipamhandles.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/ippools.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/ipreservations.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/kubecontrollersconfigurations.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/networkpolicies.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/networksets.crd.projectcalico.org created
clusterrole.rbac.authorization.k8s.io/calico-kube-controllers created
clusterrole.rbac.authorization.k8s.io/calico-node created
clusterrolebinding.rbac.authorization.k8s.io/calico-kube-controllers created
clusterrolebinding.rbac.authorization.k8s.io/calico-node created
daemonset.apps/calico-node created
deployment.apps/calico-kube-controllers created
ubuntu@wv09:~$ kubectl get pods -A
NAMESPACE     NAME                                       READY   STATUS              RESTARTS   AGE
kube-system   calico-kube-controllers-58dbc876ff-ks5st   0/1     ContainerCreating   0          20s
kube-system   calico-node-c9q7v                          0/1     Running             0          20s
kube-system   calico-node-h6hfq                          0/1     PodInitializing     0          20s
kube-system   calico-node-knf2g                          0/1     PodInitializing     0          20s
kube-system   coredns-565d847f94-klmjh                   0/1     ContainerCreating   0          10m
kube-system   coredns-565d847f94-kprhj                   0/1     ContainerCreating   0          10m
kube-system   etcd-wv09                                  1/1     Running             0          10m
kube-system   kube-apiserver-wv09                        1/1     Running             0          10m
kube-system   kube-controller-manager-wv09               1/1     Running             0          10m
kube-system   kube-proxy-5d68k                           1/1     Running             0          4m56s
kube-system   kube-proxy-9ch8z                           1/1     Running             0          10m
kube-system   kube-proxy-mtbft                           1/1     Running             0          5m54s
kube-system   kube-scheduler-wv09                        1/1     Running             0          10m
ubuntu@wv09:~$ kubectl get pods -A
NAMESPACE     NAME                                       READY   STATUS    RESTARTS   AGE
kube-system   calico-kube-controllers-58dbc876ff-ks5st   1/1     Running   0          42s
kube-system   calico-node-c9q7v                          1/1     Running   0          42s
kube-system   calico-node-h6hfq                          1/1     Running   0          42s
kube-system   calico-node-knf2g                          1/1     Running   0          42s
kube-system   coredns-565d847f94-klmjh                   1/1     Running   0          10m
kube-system   coredns-565d847f94-kprhj                   1/1     Running   0          10m
kube-system   etcd-wv09                                  1/1     Running   0          10m
kube-system   kube-apiserver-wv09                        1/1     Running   0          10m
kube-system   kube-controller-manager-wv09               1/1     Running   0          10m
kube-system   kube-proxy-5d68k                           1/1     Running   0          5m18s
kube-system   kube-proxy-9ch8z                           1/1     Running   0          10m
kube-system   kube-proxy-mtbft                           1/1     Running   0          6m16s
kube-system   kube-scheduler-wv09                        1/1     Running   0          10m
ubuntu@wv09:~$ kubectl get nodes
NAME    STATUS   ROLES           AGE     VERSION
node1   Ready    <none>          6m30s   v1.25.0
node2   Ready    <none>          5m32s   v1.25.0
wv09    Ready    control-plane   10m     v1.25.0
ubuntu@wv09:~$ ls
calico.yaml  snap
ubuntu@wv09:~$ git clone http://github.com/mike-moran-amd/my_python.git
Cloning into 'my_python'...
warning: redirecting to https://github.com/mike-moran-amd/my_python.git/
remote: Enumerating objects: 754, done.
remote: Counting objects: 100% (5/5), done.
remote: Compressing objects: 100% (5/5), done.
remote: Total 754 (delta 0), reused 1 (delta 0), pack-reused 749
Receiving objects: 100% (754/754), 738.52 KiB | 104.00 KiB/s, done.
Resolving deltas: 100% (442/442), done.
ubuntu@wv09:~$ git clone https://github.com/vmware/weathervane
Cloning into 'weathervane'...
remote: Enumerating objects: 19164, done.
remote: Counting objects: 100% (1955/1955), done.
remote: Compressing objects: 100% (639/639), done.
remote: Total 19164 (delta 1014), reused 1892 (delta 968), pack-reused 17209
Receiving objects: 100% (19164/19164), 64.64 MiB | 60.23 MiB/s, done.
Resolving deltas: 100% (11710/11710), done.
ubuntu@wv09:~$ alias sc="kubectl get sc -A"
ubuntu@wv09:~$ sc
No resources found
ubuntu@wv09:~$ alias pv="kubectl get pv -A"
ubuntu@wv09:~$ pv
No resources found
ubuntu@wv09:~$ alias pvc="kubectl get pvc -A"
ubuntu@wv09:~$ pvc
No resources found
ubuntu@wv09:~$ cd my_python/my_python/k8s/weathervane/
ubuntu@wv09:/home/ubuntu/my_python/my_python/k8s/weathervane$ ll
total 76
drwxrwxr-x 2 ubuntu ubuntu  4096 Sep  7 20:11 ./
drwxrwxr-x 3 ubuntu ubuntu  4096 Sep  7 20:11 ../
-rw-rw-r-- 1 ubuntu ubuntu     0 Sep  7 20:11 __init__.py
-rw-rw-r-- 1 ubuntu ubuntu    89 Sep  7 20:11 alias
-rw-rw-r-- 1 ubuntu ubuntu   196 Sep  7 20:11 create-storage-class.yaml
-rw-rw-r-- 1 ubuntu ubuntu  1022 Sep  7 20:11 create_pvc.yaml
-rw-rw-r-- 1 ubuntu ubuntu 26794 Sep  7 20:11 debugWeathervane.pl
-rw-rw-r-- 1 ubuntu ubuntu   462 Sep  7 20:11 pv01.yaml
-rw-rw-r-- 1 ubuntu ubuntu   462 Sep  7 20:11 pv02.yaml
-rw-rw-r-- 1 ubuntu ubuntu   462 Sep  7 20:11 pv03.yaml
-rw-rw-r-- 1 ubuntu ubuntu   273 Sep  7 20:11 pvc2.yaml
-rw-rw-r-- 1 ubuntu ubuntu   270 Sep  7 20:11 test-pvc.yaml
-rw-rw-r-- 1 ubuntu ubuntu   569 Sep  7 20:11 weathervane.config.k8s.quickstart
-rw-rw-r-- 1 ubuntu ubuntu  1878 Sep  7 20:11 z
ubuntu@wv09:/home/ubuntu/my_python/my_python/k8s/weathervane$


